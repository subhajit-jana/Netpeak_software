window._clConfig={"accountId":20885,"guid":"26328BE0FD5949BB816813CA965939EF","siteId":21546,"version":"latest","forms":{"37124":{"id":37124,"name":"BF'24-launcher","publishStatus":"FOR_ALL","testingStatus":"OFF","branded":false},"37400":{"id":37400,"name":"BF'24-pricing bottom bar","publishStatus":"FOR_ALL","testingStatus":"OFF","branded":false},"36941":{"id":36941,"name":"BF'24-banner","publishStatus":"FOR_ALL","testingStatus":"OFF","branded":false}},"formVariants":{"f37400v37400":{"formId":37400,"id":"f37400v37400","type":"FLOATING_BAR","layoutType":"FLOATING_BAR","placements":[],"rules":{"FREQUENCY":{"enabled":false,"type":"FREQUENCY","predicates":[{"name":"ONCE_PER_SESSION","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":false,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[{"operand":{"name":"VISITOR"},"operator":"TIME_SPENT_ON_PAGE","value":{"unit":"SECOND","amount":"20"}}]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"}}]}]},"exclude":{"relation":"OR","groups":[]}}},"SCHEDULE":{"enabled":false,"type":"SCHEDULE","predicates":[]},"HIDE":{"enabled":false,"type":"HIDE","relation":"OR","conditions":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"},"SELECTOR":{"enabled":false,"selector":"","selectors":[]}},"asyncRules":{},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"revision":"7d7ca51b-79f1-4de2-b1d9-76997bcf7da5","linkedToVariantId":37124,"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"INFORMER","widgetType":"INFORMER"},"f37124v37124":{"formId":37124,"id":"f37124v37124","type":"LAUNCHER","layoutType":"LAUNCHER","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true},{"name":"ONCE_PER_SITE","isActive":false},{"name":"ONCE_PER_SESSION","isActive":false},{"name":"MIN_INTERVAL","isActive":false,"params":{"unit":"DAY","amount":5.0}}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"OR","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/uk"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/ru"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/en/support/home"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/ru-RU/support/home"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/uk/support/home"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/signup,/buy,/login,/resetting/,/unsubscribe/,/resubscribe/,/checker/ahrefs,/checker/facebook,/upgrade,/openid,/thank-you,/terms-of-use,/privacy-policy,/black-friday"}]}]}}},"HIDE":{"enabled":false,"type":"HIDE","relation":"OR","conditions":[]},"SELECTOR":{"enabled":false,"selector":"","selectors":[]}},"asyncRules":{},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"revision":"a670c0b6-598d-43a5-bfa9-3d299e74027b","linkedToVariantId":37400,"asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"LAUNCHER","widgetType":"LAUNCHER"},"f36941v36941":{"formId":36941,"id":"f36941v36941","type":"FLOATING_BOX","layoutType":"FLOATING_BOX","placements":[],"rules":{"FREQUENCY":{"enabled":true,"type":"FREQUENCY","predicates":[{"name":"NO_LIMIT","isActive":true}]},"CUSTOM_CODE":{"enabled":false},"TARGETING":{"enabled":true,"type":"TARGETING","schema":{"include":{"relation":"AND","groups":[{"relation":"AND","conditions":[]},{"relation":"AND","conditions":[{"operand":{"name":"DEVICE_TYPE"},"operator":"EQUALS","value":"DESKTOP"}]},{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/uk"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://netpeaksoftware.com/ru"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/en/support/home"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/ru-RU/support/home"},{"operand":{"name":"URL"},"operator":"STARTS_WITH","value":"https://help.netpeaksoftware.com/uk/support/home"}]}]},"exclude":{"relation":"OR","groups":[{"relation":"OR","conditions":[{"operand":{"name":"URL"},"operator":"CONTAINS_ONE_OF","value":"/signup,/buy,/login,/resetting/,/unsubscribe/,/resubscribe/,/checker/ahrefs,/checker/facebook,/download,/upgrade,/openid,/thank-you,/ucp,/terms-of-use,/privacy-policy,/black-friday"}]}]}}},"SCHEDULE":{"type":"SCHEDULE","enabled":false,"predicates":[]},"HIDE":{"enabled":true,"type":"HIDE","relation":"OR","conditions":[{"name":"WIDGET_CLOSED","isActive":true,"params":{"unit":"COUNT","amount":2.0}}]},"SELECTOR":{"enabled":false,"selector":"","selectors":[]},"ANNOYANCE":{"type":"SHOW_IN_INTERVAL"}},"asyncRules":{},"tracking":{"trackers":[{"name":"GOOGLE_ANALYTICS"}]},"revision":"3ea2fd16-5a4d-42d3-8989-061ba6fd28a8","asyncRulesEnabled":false,"checkThisWidgetOnly":false,"useCase":"INFORMER","widgetType":"INFORMER"}},"formConfig":{"ANNOYANCE_SAFEGUARD_ENABLED":"true","ANNOYANCE_SAFEGUARD":"{\"unit\":\"MINUTE\",\"amount\":3}","SESSION_TTL":"{\"unit\":\"MINUTE\",\"amount\":30}","CHECK_SEGMENT_MEMBERSHIP":"false","abTests":[]},"apiConfig":{"staticResourcesUrl":"https://cdn.claspo.io/","hostUrl":"https://script.claspo.io/","scriptClientEventsUrl":"https://script.claspo.io/site-script/v1/event","asyncRulesCheckUrl":"https://script.claspo.io/forms/v2/async-rules/{id}/check"}};//config end
window.scriptLog09u8y9 = function scriptLog09u8y9(logLevel, message, data) {
  var productPrefix = 'cl';
  var config = window["_" + productPrefix + 'Config'];
  var tryCallback = function (cb) {
    try {
      return cb();
    } catch (e) {
      return undefined;
    }
  }

  function send(d) {
    const url = config && config.apiConfig && config.apiConfig.scriptClientEventsUrl;

    const c = new XMLHttpRequest;
    c.open("POST", url, !0);
    c.setRequestHeader("Content-type", "application/json; charset=utf-8");
    c.send(JSON.stringify(d));
  }

  function composeError(data) {
    if (data instanceof Error) {
      return tryCallback(() => JSON.stringify({error: data.name + ' ' + data.message + ' ' + data.stack})) || 'UNHANDLED';
    } else {
      return tryCallback(() => JSON.stringify({error: data})) || 'UNHANDLED';
    }
  }

  let key = productPrefix + 'ScriptStatus';
  if (logLevel === 'OK') {
    tryCallback(() => localStorage.setItem(key, logLevel));
    return;
  }

  var d = {
    scriptVersion: config.version,
    orgId: +config.orgId,
    siteId: +config.siteId,
    tenantId: config.tenantId,
    guid: config.guid,
    url: window.location.href,
    message: message,
    log_level: logLevel
  };

  if (logLevel === 'ERROR') {

    var prevStatus = tryCallback(() => localStorage.getItem(key));
    if (prevStatus !== undefined && prevStatus !== logLevel) {
      tryCallback(() => localStorage.setItem(key, logLevel));
      d.data = composeError(data);
      send(d);
    }

  } else {
    d.data = tryCallback(() => JSON.stringify(data));
    send(d);
  }


}

try {
   "use strict";!function(){async function e(e,t){return t||(t=await import(e)),t}function t(e,t,n){e:if("object"==typeof t&&null!==t){var i=t[Symbol.toPrimitive];if(void 0!==i){if("object"!=typeof(t=i.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return e=Number.parseInt(e),Number.isInteger(e)?e:0}function i(e){return Fe.SYSTEM_ATTRIBUTE_PREFIX+e}function o(e){return[...e].reduce(((e,t)=>{let[n,i]=t;return e[n]=i,e}),{})}function r(e,t){return o(Object.entries(e).filter((e=>([e]=e,!t.includes(e)))))}function s(e){var t;return e.useCase&&e.useCase===We.REQUEST_FORM?null:(null===(t=fe.getUserInfo())||void 0===t?void 0:t.clContactId)||ge.get("clContactId")}function a(e,t){return btoa(unescape(encodeURIComponent(JSON.stringify(je.createFormParams(e,void 0,t)))))}function l(e,t){e&&Object.keys(e)&&Object.keys(e).forEach(t)}function c(e){var t=this;let n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];clearTimeout(n),n=setTimeout((()=>{e.apply(t,r)}),i)}}function d(e,t){e.children&&e.children.forEach((e=>d(e,t))),t(e)}function h(e,t,n){return Math.min(Math.max(t,e),n)}function u(e,t){return function(n){return t(e(n))}}function m(e,t){if(!(this instanceof m))return new m(e,t);if(t&&t in Zt&&(t=null),t&&!(t in Qt))throw Error("Unknown model: "+t);if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof m)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if("string"==typeof e){if(null===(t=Xt.get(e)))throw Error("Unable to parse color from string: "+e);this.model=t.model;var n=Qt[this.model].channels;this.color=t.value.slice(0,n),this.valpha="number"==typeof t.value[n]?t.value[n]:1}else if(0<e.length)this.model=t||"rgb",n=Qt[this.model].channels,t=Array.prototype.slice.call(e,0,n),this.color=g(t,n),this.valpha="number"==typeof e[n]?e[n]:1;else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{if(this.valpha=1,t=Object.keys(e),"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0),!((t=t.sort().join(""))in Jt))throw Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Jt[t],({labels:n}=Qt[this.model]);let i=[];for(t=0;t<n.length;t++)i.push(e[n[t]]);this.color=g(i)}if($t[this.model])for(n=Qt[this.model].channels,t=0;t<n;t++)(e=$t[this.model][t])&&(this.color[t]=e(this.color[t]));this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function p(e){return function(t){return Number(t.toFixed(e))}}function g(e,t){for(let n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}function E(e,t){return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,n)=>Object.assign(Object.assign({},t),{[n]:e[n]})),{})}function v(e,t,n){var i;return null===(i=e[t])||void 0===i?void 0:i.find((e=>e.element===n))}function f(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Object.assign(Object.assign({},e),{styleAttributes:Object.assign({},e.styleAttributes)})))}function y(e){return Object.values(yn).reduce(((t,n)=>Object.assign(t,{[n]:f(e)})),{[yn.DESKTOP]:[],[yn.MOBILE]:[]})}function _(e,t,n,i){let o=e=>{var r,s;(r=e=e instanceof DocumentFragment||(null==e?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE?e.host:e)&&(r=i&&"function"==typeof i?i(e.getAttribute(t)):(null===(s=null==e?void 0:e.getAttribute)||void 0===s?void 0:s.call(e,t))===n);return r?e:e&&e.parentNode&&o(e.parentNode)||null};return o(e)}function T(e){return[e.getConfig("appearanceLanguage"),e.getConfig("browserLanguage"),"en"].filter((e=>!!e))}function b(e,t){return t.reduce(((t,n)=>t||(n?e[n]?t={translations:e[n],language:n}:(t=n.includes("-")?n.split("-")[0].toLowerCase():n.includes("_")?n.split("_")[0].toLowerCase():n,t=e[t]?{translations:e[t],language:t}:null):t=null,t||null)),null)}function C(e,t){let n=t.id,i=[...t.options].sort(((e,t)=>t.length-e.length)).at(0);var o=t.options.map((n=>{const o=document.createElement("span");o.classList.add("opt");const r=document.createElement("span");r.innerText=n,o.appendChild(r),n=Object.assign(Object.assign({},An),t.styleAttributes);const s=window.getComputedStyle(e.parentElement);return I(r,n),I(o,{display:"inline-flex",justifyContent:s["text-align"]||Nn.justifyContent},i,n),o}));e.innerHTML='\n  <span class="container"><span style="visibility:hidden;padding:5px">'.concat(i,'</span><span class="opts"></span></span>'),I(e,Object.assign({},Sn));let r=e.querySelector(".opts");o.forEach((e=>{r.appendChild(e)})),(o=e.querySelector(".container")).style.paddingLeft=t.styleAttributes.borderLeftWidth||0,o.style.paddingRight=t.styleAttributes.borderRightWidth||0,o.style.paddingTop=t.styleAttributes.borderTopWidth||0,o.style.paddingBottom=t.styleAttributes.borderBottomWidth||0;let s=1===t.options.length?10:0;return o.style.height="".concat(o.querySelectorAll(".opt")[0].offsetHeight-s,"px"),e.classList.add("container--staticTextRoller"),o=function(e){var t=Math.max(...e.options.map((e=>e.replace(/\s+/g,"").length)));return t=Math.max(Math.ceil(t/15),1),e=e.options.length,{optionTimePercentage:100/e,duration:e*(1e3*t+500),longestOptionFractions:t}}(t),function(e,t,n){var i=t.options.length-1;let o=n.optionTimePercentage/(1<n.longestOptionFractions?1.5:3);i=t.options.map(((e,t)=>"\n    ".concat(t*n.optionTimePercentage,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }\n    ").concat(t*n.optionTimePercentage+o,"% {\n      transform: translateY(calc(").concat(100*t,"% + ").concat(1*t,"px));\n    }"))).flat().concat("\n    100% {\n      transform: translateY(calc(".concat(100*t.options.length,"% + ").concat(i,"px));\n    }\n    ")).join("\n"),t=document.createElement("style"),t.innerHTML="@keyframes slide-down {".concat(i,"}"),i=e.querySelector(".opt").cloneNode(!0),e.appendChild(t),e.querySelector(".opts").appendChild(i)}(e,t,o),function(e,t,n){n=n.duration/1e3,1<t.options.length?e.style.animation="slide-down ".concat(n,"s infinite"):(e.style.transform="translateY(0%)",e.querySelectorAll(".opt")[0].style.display="none")}(r,t,o),{element:e,id:n}}function I(e,t,n,i,o){let r={};n&&(n=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};let i=document.createElement("span"),o=document.createElement("span");o.innerText=e,i.appendChild(o);for(let[e,t]of Object.entries(n))o.style[e]=t;for(let[e,n]of Object.entries(t))i.style[e]=n;return i.style.visibility="hidden",document.body.appendChild(i),n=window.getComputedStyle(i),n=parseFloat(n.width),document.body.removeChild(i),n}(n,t,i)-5,r={minWidth:"".concat(Math.min(n,o),"px")}),Object.entries(Object.assign(Object.assign({},r),t)||{}).forEach((t=>{let[n,i]=t;e.style[n]=i}))}function O(e){return"\n    .".concat(e," {\n      position: absolute;\n      display: flex;\n      width: fit-content;\n      height: fit-content;\n      padding: 20px 0;\n      background: #000000;\n      border: 2px solid #FFFFFF;\n      border-radius: 5px;\n      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.28);\n      animation: jello-animation 10.9s both;\n      animation-iteration-count: 1;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:after {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 5px);\n        margin-left: -8px;\n        margin-top: -2px;\n        border-width: ").concat("12px",";\n        border-style: solid;\n        border-color: black transparent transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='top']:before {\n        content: \"\";\n        position: absolute;\n        top: 100%;\n        left: calc(50% - 15px);\n        border-width: ").concat("14px",";\n        border-style: solid;\n        border-color: white transparent transparent transparent;\n    }\n    \n    .").concat(e,"[cl-overlay-position='bottom']:after {\n      content: \"\";\n      position: absolute;\n      top: -22px;\n      left: calc(50% - 4px);\n      margin-left: -5px;\n      margin-bottom: -2px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent black transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='bottom']:before {\n      content: \"\";\n      position: absolute;\n      top: -28px;\n      left: calc(50% - 11px);\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent white transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      left: -18px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent black transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='right']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      left: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent white transparent transparent;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:after {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 7px);\n      right: -22px;\n      margin-left: -5px;\n      border-width: ").concat("12px",";\n      border-style: solid;\n      border-color: transparent transparent transparent black;\n    }\n\n    .").concat(e,"[cl-overlay-position='left']:before {\n      content: \"\";\n      position: absolute;\n      top: calc(50% - 9px);\n      right: -28px;\n      border-width: ").concat("14px",";\n      border-style: solid;\n      border-color: transparent transparent transparent white;\n    }\n\n    .suggestion-text-container {\n      height: fit-content;\n      width: fit-content;\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 3px;\n      margin: 2px 10px;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .did-you-mean-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      line-height: 16px;\n      letter-spacing: normal;\n      font-size: 14px;\n      color: white;\n    }\n\n    .suggestion-text {\n      height: 16px;\n      white-space: nowrap;\n      width: fit-content;\n      color: white;\n      line-height: 16px;\n      font-weight: bold;\n      letter-spacing: normal;\n      font-size: 14px;\n    }\n\n    .accept-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n\n      border: 2px solid #FFFFFF;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .accept-button:after {\n      content: '';\n      position: absolute;\n      top: 42%;\n      left: 50%;\n      width: 9px;\n      height: 14px;\n      border: solid;\n      border-color: white;\n      border-width: 0 3px 3px 0;\n      -webkit-transform: translate(-50%, -50%) rotate(45deg);\n      -ms-transform: translate(-50%, -50%) rotate(45deg);\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button {\n      position: relative;\n      width: 36px;\n      height: 36px;\n      border: 2px solid black;\n      border-radius: 7px;\n      cursor: pointer;\n    }\n\n    .deny-button:before, .deny-button:after {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      content: '';\n      height: 18px;\n      width: 2px;\n      background-color: #595959;\n    }\n\n    .deny-button:before {\n      transform: translate(-50%, -50%) rotate(45deg);\n    }\n\n    .deny-button:after {\n      transform: translate(-50%, -50%) rotate(-45deg);\n    }\n\n    @keyframes jello-animation {\n      0% {\n        transform: scale3d(1, 1, 1);\n      }\n      3% {\n        transform: scale3d(1.25, 0.75, 1);\n      }\n      4% {\n        transform: scale3d(0.75, 1.25, 1);\n      }\n      5% {\n        transform: scale3d(1.15, 0.85, 1);\n      }\n      6.5% {\n        transform: scale3d(0.95, 1.05, 1);\n      }\n      7.5% {\n        transform: scale3d(1.05, 0.95, 1);\n      }\n      10% {\n        transform: scale3d(1, 1, 1);\n      }\n      100% {\n        transform: scale3d(1, 1, 1);\n      }\n    }\n  ")}function S(e){return class extends e{connect(e,t,n){switch(e){case Ct.INSIDE:t.appendChild(n);break;case Ct.BEFORE:case Ct.AFTER:t.insertAdjacentElement(e===Ct.BEFORE?"beforebegin":"afterend",n)}}}}function A(e){return(e=e.parentNode).host?e.host:A(e)}function N(e){return class extends(S(e)){constructor(){super(),this.eventListeners=[],this.lastDragOverEvent=null,this.focusedElements=[],this.observer=null,this._observeChanges()}connectedCallback(){super.connectedCallback(),this._addAllListeners()}disconnectedCallback(){var e,t,n;super.disconnectedCallback(),this._deactivateEventListeners(),null===(e=this.removeFocusSubscription)||void 0===e||e.off(),null===(t=this.setFocusSubscription)||void 0===t||t.off(),null===(n=this.componentFocusedSubscription)||void 0===n||n.off(),this.observer.disconnect()}_addAllListeners(){this.observer.observe(this.getRootElement(),{childList:!0,subtree:!0}),this.model.type===Tt.VIEW&&(this.eventListeners.push({eventName:"mousemove",callback:this._mouseMoveEventListener.bind(this),element:this}),this.eventListeners.push({eventName:"mouseout",callback:this._mouseOutEventListener.bind(this),element:this})),this.removeFocusSubscription=this.services.eventEmitter.on(Fn.REMOVE_FOCUS,(()=>{this._removeFocus()})),this.setFocusSubscription=this.services.eventEmitter.on(Fn.SET_FOCUS,(e=>{this._removeFocus(),this.model.id===e&&this._setFocus("host")})),this.componentFocusedSubscription=this.services.eventEmitter.on(Fn.COMPONENT_FOCUSED,(e=>{let{id:t,targetElementName:n}=e;this._removeFocus(),this.model.id===t&&this._setFocus(n)})),this.manifest.preventDraggable||this.getHostElement().setAttribute("draggable","true"),this._setElementListeners(this.getHostElement()),this._setGlobalListeners(),this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute()}_observeChanges(){let e={addded:!1,removed:!1},t=c((()=>{e.removed&&this._removeListenersForDisconnectedNodes(),e.addded&&(this._setEventListeners(),this._activateEventListeners(),this._setFocusableElementsAttribute(),this._updateFocusedElementClasses()),e={addded:!1,removed:!1}}),500);this.observer=new MutationObserver((function(n){for(let i of n){for(let t of i.addedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.addded&&(e=Object.assign(Object.assign({},e),{addded:!0}));for(let t of i.removedNodes)t instanceof HTMLElement&&"STYLE"!==t.nodeName&&!e.removed&&(e=Object.assign(Object.assign({},e),{removed:!0}));t()}}))}_setEventListeners(){this.getRootElement().querySelectorAll("[cl-inline-edit], [cl-inline-edit] *").forEach((e=>{this._isEventListenerPresent(e)||(e.getAttribute("draggable")||e.setAttribute("draggable","true"),this._setElementListeners(e,!0))})),this.getRootElement().querySelectorAll(":not([cl-inline-edit]):not([cl-type]):not([cl-inline-edit] *)").forEach((e=>{if(!this._isEventListenerPresent(e)){if(e.getAttribute("draggable")||e.setAttribute("draggable","true"),e instanceof HTMLElement){let t=e.tagName.toLowerCase();"input"!==t&&"textarea"!==t||"readonly"===!e.getAttribute("readonly")||e.setAttribute("readonly","readonly"),this.manifest.componentType===kn.VIDEO&&e.classList.contains("video-overlay")&&(e.style.visibility="visible")}this._setElementListeners(e)}}))}_removeListenersForDisconnectedNodes(){this.eventListeners=this.eventListeners.filter((e=>(e.element.isConnected||e.element.removeEventListener(e.eventName,e.callback),e.element.isConnected)))}_setGlobalListeners(){this.eventListeners.push({eventName:"drop",callback:e=>this._documentDropListener(e),element:document})}_isEventListenerPresent(e){return!!this.eventListeners.find((t=>t.element===e))}_setElementListeners(e,t){[{eventName:"click",callback:e=>this._elementClickListener(e,t),element:e},{eventName:"dblclick",callback:this._elementDoubleClickListener.bind(this),element:e},{eventName:"dragstart",callback:this._elementDragStartListener.bind(this),element:e},{eventName:"dragend",callback:this._elementDragEndListener.bind(this),element:e},{eventName:"dragover",callback:this._elementDragOverListener.bind(this),element:e},{eventName:"blur",callback:this._blurEventListener.bind(this),element:e,useCapture:!0}].forEach((e=>this.eventListeners.push(e)))}_elementClickListener(e,t){e.preventDefault(),e.stopImmediatePropagation();let n=e.composedPath()[0],o=this.getHostElement();t&&this.services.eventEmitter.emit(Fn.SHOW_INLINE_EDIT,{id:this.model.id,hostElement:o,targetElement:n}),this.model.focusParentOnClick?(t=A(o),this.services.eventEmitter.emit(Fn.COMPONENT_FOCUSED,{id:t.getAttribute(i("id")),hostElement:t,targetElement:t,targetElementName:"host"})):this.services.eventEmitter.emit(Fn.COMPONENT_FOCUSED,{id:this.model.id,hostElement:o,targetElement:n,targetElementName:this._getElementNameByNode(n)}),this.services.eventEmitter.emit(Fn.COMPONENT_CLICKED,e)}_elementDoubleClickListener(e){e.preventDefault(),e.stopImmediatePropagation(),this.services.eventEmitter.emit(Fn.COMPONENT_DOUBLE_CLICKED,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0]})}_elementDragStartListener(e){e.stopPropagation();let t=e.composedPath().find((e=>{var t;return null===(t=e.hasAttribute)||void 0===t?void 0:t.call(e,i("type"))})),n=t.getAttribute(i("type"));this.services.eventEmitter.emit(Fn.COMPONENT_DRAGSTART,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e,checkIfAllowed:i=>{if(i){if(i=t.getBoundingClientRect(),n!==Tt.FLOATING_IMAGE&&e.dataTransfer.setDragImage(t,e.pageX-i.left,e.pageY-i.top),n===Tt.SLIDER){var o=t.shadowRoot.querySelector(".slides-container");o=new WebKitCSSMatrix(getComputedStyle(o).transform).m41,e.dataTransfer.setDragImage(t,e.pageX-i.left-o,e.pageY-i.top)}}else e.preventDefault(),this.services.eventEmitter.emit(Fn.COMPONENT_DRAGEND)}})}_elementDragEndListener(e){e.stopPropagation(),this.services.eventEmitter.emit(Fn.COMPONENT_DRAGEND,{id:this.model.id,path:this.model.path,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_elementDragOverListener(e){e.preventDefault(),e.stopPropagation();let t=this.lastDragOverEvent;this.lastDragOverEvent=e,e.pageX&&e.pageY&&(t&&t.clientY===e.clientY&&t.clientX===e.clientX||this.services.eventEmitter.emit(Fn.COMPONENT_DRAGOVER,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e}))}_documentDropListener(e){this.services.eventEmitter.emit(Fn.DOCUMENT_DROP,{id:this.model.id,hostElement:this.getHostElement(),targetElement:e.composedPath()[0],event:e})}_mouseMoveEventListener(e){let t=this._findClosestHostElement(e.composedPath());this.preHoveredElement&&this.preHoveredElement!==t&&this.preHoveredElement.classList.remove(Fe.SYSTEM_CLASS_PREFIX+"hovered"),(this.preHoveredElement=t)&&(t.classList.add(Fe.SYSTEM_CLASS_PREFIX+"hovered"),e={id:t.getAttribute(i("id")),hostElement:t,targetElement:e.composedPath()[0],event:e},this.services.eventEmitter.emit(Fn.COMPONENT_MOUSE_MOVE,e))}_mouseOutEventListener(e){e.stopPropagation(),(e=this._findClosestHostElement(e.composedPath()))&&e.classList.remove(Fe.SYSTEM_CLASS_PREFIX+"hovered")}_blurEventListener(e){e.stopImmediatePropagation()}_removeFocus(){this.focusedElements.length&&this.focusedElements.forEach((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.remove(Fe.SYSTEM_CLASS_PREFIX+"focused")})),this.focusedElements=[]}_setFocus(e){var t=this.getHostElement();this.focusedElements=[t],t.classList.add(Fe.SYSTEM_CLASS_PREFIX+"focused"),"host"!==e&&((t=this.getElements().filter((t=>t.getAttribute(i("element"))===e))).forEach((e=>e.classList.add(Fe.SYSTEM_CLASS_PREFIX+"focused"))),this.focusedElements=this.focusedElements.concat(t))}_findClosestHostElement(e){return(e=e.filter((e=>e instanceof HTMLElement)).filter((e=>!!e.getAttribute(i("component"))))).length?e[0]:null}_activateEventListeners(){this.eventListeners.forEach((e=>{e.activated||(e.element.addEventListener(e.eventName,e.callback,e.useCapture),e.activated=!0)}))}_deactivateEventListeners(){this.eventListeners.forEach((e=>{e.element.removeEventListener(e.eventName,e.callback)})),this.eventListeners=[]}_getElementNameByNode(e){var t;return e&&(e=e.closest("[".concat(i("element"),"]")))&&("host"===(e=e.getAttribute(i("element")))||null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e))?e:"host"}_setFocusableElementsAttribute(){this.getElements().forEach((e=>{var t;null!==(t=this.manifest.focusableElements)&&void 0!==t&&t.includes(e.getAttribute(i("element")))&&e.setAttribute(i("focusable-element"),"")}))}_updateFocusedElementClasses(){if(!(2>this.focusedElements.length)){var e=this.focusedElements.find((e=>e.hasAttribute(i("focusable-element"))));e&&this._setFocus(e.getAttribute(i("element")))}}}}function R(e){return e.reduce(((e,t)=>e+t),0)}function L(e){for(;e.firstElementChild;)e=e.firstElementChild;return e}function M(e){return o(Object.entries(e).filter((e=>([,e]=e,null!=e&&""!==e))))}async function w(e){try{let t=(new TextEncoder).encode(e);return function(e){return Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(await crypto.subtle.digest("SHA-256",t))}catch(e){ce.error("CANT_HASH",{errors:[e.toString()]})}}function D(e){return"object"!=typeof e||null===e}function P(e){var t,n;if("cl"!==fe.getPrefix().debugPrefix&&!fe.getContactRemapped()){var i=null===(t=window.__es_sdk)||void 0===t||null===(n=t.pushNotifications)||void 0===n?void 0:n.rebind;if(i&&(t=fe.getWebPushContactId()))try{e.contactId&&e.contactId.toString().trim()!==t.toString().trim()?i("contactId",e.contactId,((e,t)=>x(e,t))):e.externalCustomerId?i("externalCustomerId",e.externalCustomerId,((e,t)=>x(e,t))):e.email?i("email",e.email,((e,t)=>x(e,t))):e.phone&&i("phone",e.phone,((e,t)=>x(e,t)))}catch(e){ce.error(e,"Error while rebinding contact")}}}function x(e,t){if(fe.setContactRemapped(e),e)if(t)V(t);else{var n,i;(e=null===(n=window.__es_sdk)||void 0===n||null===(i=n.pushNotifications)||void 0===i?void 0:i.getUserPushSubscriptionContactId)&&e((e=>V(e)))}}function V(e){Yi.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] rebindContact. After rebinding contact");let t={...o(Object.entries(fe.getCustomerData()).filter((e=>([,e]=e,!!e)))),esContactId:e};fe.setCustomerData(t),e={...o(Object.entries(fe.getUserInfo()).filter((e=>([,e]=e,!!e)))),esContactId:e},fe.setUserInfo(e)}function F(){return Promise.all((0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))}function k(e,t){return e.reduce(((e,n)=>Array.isArray(n)&&1<t?e.concat(k(n,t-1)):e.concat(n)),[])}function U(e){return window.matchMedia("(max-width: ".concat(e.shared.mobileBreakpointWidth,"px)")).matches}function B(e,t,n){return e.filter((e=>{let i=(e=t[e.formId]).filter((e=>!0===n[e]));return e.length===i.length}))}function H(e,t,n){return n===Uo.AND?e===t:n===Uo.OR?0<t:void 0}function G(e,t){return e.includes(t)}function W(e,t){return e.startsWith(t)}function j(e,t){return e.endsWith(t)}function z(e,t){return e===t}function K(e,t){return-1<e.search(t)}function X(e,t){return t.split(",").map((e=>e.trim())).some((t=>e.includes(t)))}function Y(e,t){return e-((2<arguments.length&&void 0!==arguments[2]?arguments[2]:0)||0)>=Ae.convert(t.unit,Se.MILLISECOND,t.amount)}function q(e,t,n){return Y(e.timeSpentOnPageMs,t,e.cacheTimeShiftMs)}function Q(e,t,n){return Y(e.sessionDurationMs,t,e.cacheTimeShiftMs)}function Z(e,t,n){return Y(e.unActiveMs,t,e.cacheTimeShiftMs)}function J(e){return document.querySelector(e)}function $(e,t,n){return t=!1,(e=e.formVariants&&e.formVariants[n.id])&&e.submit&&(t=!0),_o.log("VISITOR USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM ".concat(n.id," = ").concat(t)),t}function ee(e){return!0===e.mouseout}function te(e){return!0===e.firstTimeSeen}function ne(e,t,n){({id:n}=n);let{formVariantVisibleMap:i,formVariantHoverMap:o}=e,{unit:r,amount:s}=t;return!(!i.has(n)||o.has(n))&&(e=Ae.convert(r,Se.MILLISECOND,s),t=i.get(n),(new Date).getTime()-t.getTime()>=e)}function ie(e,t,n){return e=e.readPercent>t,_o.log("pageReadPercent  ".concat(n," ").concat(JSON.stringify(t)," = ").concat(e)),e}function oe(e,t,n){return e=e.sessionPagesCount>t,_o.log("pagesViewed  ".concat(n," ").concat(JSON.stringify(t)," = ").concat(e)),e}function re(e,t,n,i,o){var r=5<arguments.length&&void 0!==arguments[5]?arguments[5]:[];_o.log("================ apply rules for formVariant ".concat(e.id," ================"));let s=new Po(e.rules.CUSTOM_CODE,e),a=new xo(e,n),l=new Bo(e.rules.HIDE,e,r),c=new Go(e.rules.SCHEDULE,e);r=new Vo(e.rules.FREQUENCY,e,r);let d=new ar(e.rules.TARGETING,e,i),h=new lr(e),u=a.isEnabled(),m=a.isFulfilled(t,e),p=c.isEnabled(),g=c.isFulfilled(t),E=r.isEnabled(),v=r.isFulfilled(t);var f=r.isBasedOnTime(),y={fulfilled:v,basedOnTime:f};f=d.isEnabled();let _=d.isFulfilled(t),T=l.isEnabled();_o.log("frequencyStats ".concat(JSON.stringify(y))),y=l.isFulfilled(t,y);let b=h.isEnabled(),C=h.isFulfilled(o);var I=[];return T&&I.push(!y),p&&I.push(g),E&&I.push(v),f&&I.push(_),b&&I.push(C),{formVariant:e,allRulesFulfilled:I=!s.isEnabled()&&0<I.length&&I.length===I.filter((e=>!0===e)).length,stats:t,sessionStat:n,locationData:i,rules:{[Do.ANNOYANCE]:{enabled:u,fulfilled:m,rule:a},[Do.HIDE]:{enabled:T,fulfilled:y,rule:l},[Do.SCHEDULE]:{enabled:p,fulfilled:g,rule:c},[Do.FREQUENCY]:{enabled:E,fulfilled:v,rule:r},[Do.TARGETING]:{enabled:f,fulfilled:_,rule:d},[Do.CUSTOM_CODE]:{enabled:s.isEnabled(),fulfilled:s.isFulfilled(),rule:s},[Do.PLACEMENT]:{enabled:b,fulfilled:C,rule:h}}}}function se(e,t){return":ENV"===e?U(t.document)?"mobile":"desktop":e}function ae(e,t,n){for(let i=0;i<t.length;i++){if(e=e[se(t[i],n)],Array.isArray(e))return e.map((e=>ae(e,t.slice(i+1),n)))}return e}class le{constructor(e){this.commandsQueueProcessor=e}run(){this.commandsQueueProcessor.process()}}class ce{static error(e){ce._log("ERROR","RUNTIME_ERROR "+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:""),e)}static warn(e,t){ce._log("WARN",e,t)}static info(e,t){ce.log(e,t)}static log(e,t){ce._log("INFO",e,t)}static _log(e,t,n){if("localhost"===window.location.hostname)console.log(e,t,n);else if("ERROR"===e&&console.log(e,t,n),"function"==typeof window.scriptLog09u8y9)try{window.scriptLog09u8y9(e,t,n)}catch(e){console.error(e)}}}class de{constructor(){this.currentProductPrefix=de.PREFIX.startsWith("PRODUCT_PREFIX_PLACE")?"es":de.PREFIX}getProductName(){return"claspo"}getPrefix(){return this.currentProductPrefix}get(){var e="_".concat(this.currentProductPrefix,"Config");if(e=window[e],"es"===this.currentProductPrefix){let t=e.crawler,n=e.hasOwnProperty("crawler")&&0<Object.keys(e.crawler).length;t&&n||(e.crawler=de.DEFAULT_CRAWLER)}return e}}t(de,"PREFIX","cl"),t(de,"DEFAULT_CRAWLER",{pages:{main:[],catalog:[],product:[]},catalog:{categoryKey:[]},product:{productKey:[]},status_cart:[],checkout:[],params:{CATEGORY:{recoms:{productsRecommendationsArgs:{categoryField:"tags_categories_ids"}}}}});var he=new de;class ue{_process(e){try{return e()}catch(e){return null}}}class me extends ue{get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){return this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}remove(e){return this._process((()=>localStorage.removeItem(e)))}}class pe extends me{constructor(e){super(),this.stateKey=e.getPrefix()+"State"}getClass(){return pe}get(e){return this._process((()=>JSON.parse(localStorage.getItem(e))))}set(e,t){this._process((()=>localStorage.setItem(e,JSON.stringify(t))))}setState(e){this._process((()=>this.set(this.stateKey,e)))}getState(){return this._process((()=>this.get(this.stateKey)))}}var ge=new pe(he);class Ee{constructor(e){this.configService=e}get(){let e=this.configService.getPrefix();return Ee.defaultStatesByProduct[e]||Ee.defaultStatesByProduct.es}}t(Ee,"defaultStatesByProduct",{cl:{},es:{userInfo:{email:null,esContactId:null},tracking:{product:{productId:null},statusCart:{identifier:null,GUID:null},category:{categoryKey:null}},pageType:{previous:null,current:null,changedDate:null},experiment:{log:{},variants:[]},activatorConfig:{RECOMS:null,TRACKING:null},metrics:{lastDate:null,data:{}}}});var ve=new Ee(he);var fe=new class{constructor(e,n,i){t(this,"state",null),this.configService=e,this.storageService=n,this.initialStateProvider=i,this.state=this._getInitialState()}getConfig(){return this.configService.get()}getState(){return this.state}setActivatorConfig(e){this.setState((t=>({...t,activatorConfig:e})))}getActivatorConfig(){return this.getState().activatorConfig}getUserInfo(){let{userInfo:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:e}getExperimentVariants(){return(this.getState().experiment||{}).variants||[]}getFormAbTestsConfig(){return(this.getConfig().formConfig||{}).abTests||[]}getFormAbTestsFormVariants(){return(this.getState().formVariantsAbTest||{}).formVariants||[]}setFormAbTestFormVariants(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:e}})))}addAbTestFormVariant(e){this.setState((t=>({...t,formVariantsAbTest:{...t.formVariantsAbTest,formVariants:[...t.formVariantsAbTest.formVariants,e]}})))}setState(e){this.state="function"==typeof e?e(this.getState()):{...this.getState(),...e},this.storageService.setState(this.getState())}_getInitialState(){return this.storageService.getState()||this.initialStateProvider.get()}addExperimentVariant(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:[...t.experiment.variants,e]}})))}setExperimentVariants(e){this.setState((t=>({...t,experiment:{...t.experiment,variants:e}})))}setStatusCartIdentifier(e){let{identifier:t,GUID:n}=e;this.setState((e=>({...e,tracking:{...e.tracking,statusCart:{...e.tracking.statusCart,identifier:t,GUID:n}}})))}setProductPageId(e){this.setState((t=>({...t,tracking:{...t.tracking,product:{...t.tracking.product,productId:e}}})))}setPurchasedItems(e){this.setState((t=>({...t,tracking:{...t.tracking,purchasedItems:{products:e}}})))}setStatusCartProducts(e){this.setState((t=>({...t,tracking:{...t.tracking,statusCart:{...t.tracking.statusCart,products:e}}})))}setCategoryKey(e){this.setState((t=>({...t,tracking:{...t.tracking,category:{...t.tracking.category,categoryKey:e}}})))}setUserInfo(e){this.getState().userInfo&&this.setState((t=>({...t,userInfo:e})))}setPageType(e){let{previous:t,current:n}=e;this.setState((e=>({...e,pageType:{previous:t,current:n,changedDate:Date.now()}})))}getCustomerData(){let{customerData:e,webContact:t}=this.getState();return!e&&t?{...t,esContactId:t.utmContactId,clContactId:t.widgetSubscriptionContactId}:null!=e?e:{}}setCustomerData(e){this.getState().customerData&&this.setState((t=>({...t,customerData:e})))}getWebContact(){return this.getState().webContact||{}}setWebContact(e){this.setState((t=>({...t,webContact:{...t.webContact,...e}})))}eraseWebContact(){this.setState((e=>({...e,webContact:void 0})))}getMetrics(){return this.getState().metrics||{data:{}}}setMetrics(e){this.setState((t=>({...t,metrics:{...t.metrics,...e}})))}getLocationData(){return this.getState().locationData||{data:{}}}setLocationData(e){this.setState((t=>({...t,locationData:{...t.locationData,...e}})))}setPrefix(e,t){this.setState((n=>({...n,prefix:{debugPrefix:e,storagePrefix:t}})))}getPrefix(){return this.getState().prefix||{debugPrefix:"",storagePrefix:""}}setInstanceDebugMode(e){this.setState((t=>({...t,instanceDebugMode:e})))}getInstanceDebugMode(){return this.getState().instanceDebugMode||!1}setContactRemapped(e){this.setState((t=>({...t,contactRemappedV2:e})))}getContactRemapped(){return this.getState().contactRemappedV2||!1}setCustomerId(e){this.setState((t=>({...t,customerId:e})))}getCustomerId(){return this.getState().customerId||""}getWebPushContactId(){return this.storageService.get("esWebPushContactId")||""}}(he,ge,ve);let ye=(e,t)=>{try{const n=new RegExp("".concat(t,"/(\\d+)")),i=e.match(n);return i?i[1]:null}catch(e){return ce.error(e,"Failed to determine browser version"),null}},_e=e=>{try{return e.includes("Chrome")?99>=ye(e,"Chrome"):e.includes("Safari")?12>=ye(e,"Version"):!e.includes("Firefox")||72>=ye(e,"Firefox")}catch(e){return ce.error(e,"Unable to check if this browser is up to date"),!0}},Te=!("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype),be=(e,t,n,i)=>{const{addEventListenerBase:o,addEventListener:r}=EventTarget.prototype;(o||r).call(e,t,n,i)};class Ce{constructor(){this.sessionCountKey=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+"f.session.count"}isFirstTimeSeen(){return 1===n(ge.get(this.sessionCountKey))}getStats(){return{firstTimeSeen:this.isFirstTimeSeen()}}destroy(){}}class Ie{constructor(){this.prefix=0<arguments.length&&void 0!==arguments[0]?arguments[0]:""}incrementCount(e){let t=this.getCount(e)+1;ge.set(e,t)}getKey(e){return this.prefix+e}getCount(e){return n(ge.get(e))}map(e){let t=ge.get(e)||{};return{put(n,i){t[n]=i,ge.set(e,t)},incrementCount(i){t[i]=n(t[i])+1,ge.set(e,t)},clear(n){delete t[n],ge.set(e,t)},get:e=>t[e],value:()=>t}}}class Oe{static get(){try{let e=localStorage.getItem("cl.dev.session.ttl");return e?JSON.parse(e):JSON.parse(he.get().formConfig.SESSION_TTL)}catch(e){return Oe.fallbackConfig}}}t(Oe,"fallbackConfig",{unit:"MINUTE",amount:"30"});let Se={MILLISECOND:"MILLISECOND",SECOND:"SECOND",MINUTE:"MINUTE",HOUR:"HOUR",DAY:"DAY",WEEK:"WEEK",getAll:function(){return Object.keys(this).filter((e=>"getAll"!==e))}};class Ae{static convert(e,t,n){return e=Ae.toMsMapper[e](n),Ae.fromMsMapper[t](e)}}Ae.toMsMapper={[Se.MILLISECOND]:e=>e,[Se.SECOND]:e=>1e3*e,[Se.MINUTE]:e=>6e4*e,[Se.HOUR]:e=>36e5*e,[Se.DAY]:e=>864e5*e,[Se.WEEK]:e=>6048e5*e},Ae.fromMsMapper={[Se.MILLISECOND]:e=>e,[Se.SECOND]:e=>e/1e3,[Se.MINUTE]:e=>e/6e4,[Se.HOUR]:e=>e/36e5,[Se.DAY]:e=>e/864e5,[Se.WEEK]:e=>e/6048e5};class Ne{constructor(e){if(this.endISOString=this.startISOString=null,e&&e.length){let[t,n]=e.split("_");this.startISOString=t,this.endISOString=n}}init(){let e=(new Date).toISOString();this.endISOString=this.startISOString=e}getStartISOString(){return this.startISOString}getEndISOString(){return this.endISOString}updateEndISODate(e){this.endISOString=e}isEmpty(){return!this.getStartISOString()||!this.getEndISOString()}toString(){return"".concat(this.getStartISOString(),"_").concat(this.getEndISOString())}}class Re extends me{constructor(e,n){super(),t(this,"_eventListener",(e=>{this._lastActivityDate=new Date,this._startIfNeeded(this._lastActivityDate.getTime()),Re._eventListenersMap[e.type]&&this._updateLastActivity()})),this.prefix="".concat(e.getPrefix(),"."),this.sessionConfig=n,this._sessionsCountKey=fe.getPrefix().storagePrefix+"f.session.count",this.urlSearchKey=this.getKey("f.session.url.search"),this._sessionPagesCountKey=this.getKey("f.session.pages.count"),this._sessionKey=this.getKey("f.session"),this._registeredKeysSet=new Set,this.registerKeys(this._sessionPagesCountKey,this.urlSearchKey,this._sessionKey),this._lastActivityDate=new Date,this._expireIfNeeded(0),this._startIfNeeded(0),this._listeners=Object.keys(Re._eventListenersMap).map((e=>(window.addEventListener(e,this._eventListener),e)))}registerKeys(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{this._registeredKeysSet.add(e)}))}destroy(){this._listeners.forEach((e=>{window.removeEventListener(e,this._eventListener)}))}getLastActivityDate(){return this._lastActivityDate}get(e){return this._expireIfNeeded(this._lastActivityDate.getTime()),super.get(e)}_updateLastActivity(){let e=this.getPersistedValue();e.updateEndISODate(this._lastActivityDate.toISOString()),this.set(this._sessionKey,e.toString())}_expireIfNeeded(e){!this.isInCurrentSession(e)&&super.get(this._sessionKey)&&this.expireSession()}_startIfNeeded(e){this.isInCurrentSession(e)||this.startSession()}getPersistedValue(){return new Ne(super.get(this._sessionKey))}getKey(e){return this.prefix+e}isInCurrentSession(e){var t=this.getPersistedValue();if(t.isEmpty())return!1;var n=this.sessionConfig.get();return n=Ae.convert(n.unit,Se.MILLISECOND,n.amount),t=new Date(t.getEndISOString()).getTime(),e=Math.max(t,e),!(Date.now()-e>n)}expireSession(){Array.from(this._registeredKeysSet).forEach((e=>{super.remove(e)})),super.remove(this._sessionKey)}startSession(){let e=new Ne;e.init(),super.set(this._sessionKey,e.toString()),this.incrementSessionsCount()}incrementSessionsCount(){let e=this.getSessionsCount()+1;super.set(this._sessionsCountKey,e)}getSessionsCount(){return n(super.get(this._sessionsCountKey))}incrementSessionPagesCount(){let e=this.getSessionPagesCount()+1;super.set(this._sessionPagesCountKey,e)}getSessionPagesCount(){return n(super.get(this._sessionPagesCountKey))}getInstance(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Re(...t)}}t(Re,"_eventListenersMap",{click:!1,touchmove:!1,touchstart:!1,scroll:!1,beforeunload:!0,hashchange:!0});var Le=new Re(he,Oe);class Me extends Ie{constructor(e){super(e),this.skipListKey=this.getKey("f.session.skipList"),this.urlSearchKey=this.getKey("f.session.url.search"),this.annoyanceLastClosedTsKey=this.getKey("f.session.annoyance.last_closed_ts"),this.annoyanceLastClosedPagesCount=this.getKey("f.session.annoyance.last_closed_pages_count"),Le.registerKeys(this.skipListKey,this.urlSearchKey,this.annoyanceLastClosedTsKey,this.annoyanceLastClosedPagesCount)}getStats(){let e=Le.getPersistedValue();return{sessionDurationMs:new Date-new Date(e.getStartISOString()),sessionPagesCount:this.getSessionPagesCount(),currentSession:e,sessionUrlSearchParams:this.getUrlSearchParams(),sessionAnnoyanceLastWidgetClosedMs:this.getSessionAnnoyanceDateTimeString()?new Date-new Date(this.getSessionAnnoyanceDateTimeString()):null,sessionAnnoyanceLastWidgetPagesCount:this.getSessionAnnoyancePagesCountString(),skipList:this.getSkipList(),isInCurrentSession:Le.isInCurrentSession(),lastActivityDate:Le.getLastActivityDate()}}getSkipList(){let e=Le.get(this.skipListKey);return e&&JSON.parse(e)||[]}addToSkipList(e){var t=Le.get(this.skipListKey);(t=JSON.parse(t)||[]).push(e),e=[...new Set(t)],Le.set(this.skipListKey,JSON.stringify(e))}getNowDateTime(){return(new Date).toISOString()}incrementSessionPagesCount(){Le.incrementSessionPagesCount()}getSessionPagesCount(){return Le.getSessionPagesCount()}setUrlSearchParams(){let e=window.location.search;if(e){let t=this.getUrlSearchParams();t.includes(e)||(t.push(e),Le.set(this.urlSearchKey,t.join(",")))}}getUrlSearchParams(){let e=Le.get(this.urlSearchKey);return e?e.split(","):[]}getSessionAnnoyanceDateTimeString(){return Le.get(this.annoyanceLastClosedTsKey)}getSessionAnnoyancePagesCountString(){return Le.get(this.annoyanceLastClosedPagesCount)}setAnnoyLastClosed(){Le.set(this.annoyanceLastClosedTsKey,this.getNowDateTime()),Le.set(this.annoyanceLastClosedPagesCount,this.getSessionPagesCount())}destroy(){}}class we extends Ie{constructor(e){super(e),document.addEventListener("mousemove",this.handleInteraction.bind(this)),document.addEventListener("scroll",this.handleInteraction.bind(this)),document.addEventListener("keydown",this.handleInteraction.bind(this)),document.addEventListener("click",this.handleInteraction.bind(this)),document.addEventListener("touchstart",this.handleInteraction.bind(this)),this.startTime=new Date,this.lastInteraction=new Date,this.maxUnActiveMs=this.maxReadPercent=0}handleInteraction(){this.lastInteraction=new Date}incrementPageCount(){this.incrementCount(this.getKey("f.page.count")),this.startTime=new Date,this.lastInteraction=new Date,this.maxReadPercent=this.maxUnActiveMs=0}getStats(){let e=Number.parseInt(100*(window.scrollY+window.innerHeight)/document.documentElement.scrollHeight);return this.maxReadPercent=Math.max(this.maxReadPercent,e),this.maxUnActiveMs=Math.max(this.maxUnActiveMs,new Date-this.lastInteraction),{timeSpentOnPageMs:new Date-this.startTime,readPercent:this.maxReadPercent,unActiveMs:this.maxUnActiveMs,lastViewIndex:this.getCount(this.getKey("f.page.count"))}}destroy(){document.removeEventListener("mousemove",this.handleInteraction.bind(this)),document.removeEventListener("scroll",this.handleInteraction.bind(this)),document.removeEventListener("keydown",this.handleInteraction.bind(this)),document.removeEventListener("click",this.handleInteraction.bind(this)),document.removeEventListener("touchstart",this.handleInteraction.bind(this))}}class De{constructor(){t(this,"listeners",{"*":[]})}emit(e,t){e=this.listeners[e],Array.isArray(e)&&e.forEach((e=>e(t))),this.listeners["*"].forEach((e=>e()))}on(e,t){let n=0;return this.listeners[e]&&this.listeners[e].length?(this.listeners[e].push(t),n=this.listeners[e].length-1):this.listeners[e]=[t],{off:()=>{this.listeners[e].splice(n,1)}}}destroy(){}}class Pe extends Ie{constructor(e){super(e)}view(e){this.map(this.getKey(Pe.storageKeys.VIEW)).put(e,(new Date).toISOString())}submit(e){this.map(this.getKey(Pe.storageKeys.SUBMIT)).put(e,(new Date).toISOString())}setRelativeTimerViewDate(e){this.map(this.getKey(Pe.storageKeys.RELATIVE_TIMER_VIEW_DATE)).put(e,(new Date).toISOString())}clearRelativeTimerViewDate(e){this.map(this.getKey(Pe.storageKeys.RELATIVE_TIMER_VIEW_DATE)).clear(e)}close(e){this.map(this.getKey(Pe.storageKeys.CLOSE)).incrementCount(e)}closeDate(e){this.map(this.getKey(Pe.storageKeys.CLOSE_DATE)).put(e,(new Date).toISOString())}destroy(){}getStats(){var e=this.map(this.getKey(Pe.storageKeys.VIEW)).value();let t=this.map(this.getKey(Pe.storageKeys.SUBMIT)).value(),i=this.map(this.getKey(Pe.storageKeys.CLOSE)).value(),o=this.map(this.getKey(Pe.storageKeys.CLOSE_DATE)).value(),r=this.map(this.getKey(Pe.storageKeys.RELATIVE_TIMER_VIEW_DATE)).value(),s={};for(let t in e)s[t]=s[t]?{...s[t],view:e[t]}:{view:e[t]};for(let e in t)s[e]=s[e]?{...s[e],submit:t[e]}:{submit:t[e]};for(let e in r)s[e]=s[e]?{...s[e],relativeTimerViewDate:r[e]}:{relativeTimerViewDate:r[e]};for(let t in i)e=n(i[t]),s[t]=s[t]?{...s[t],close:e}:{close:e};for(let e in o)s[e]=s[e]?{...s[e],closeDate:o[e]}:{closeDate:o[e]};return{formVariants:s}}}t(Pe,"storageKeys",{VIEW:"f.fv.view",SKIP:"f.fv.skip",SUBMIT:"f.fv.submit",CLOSE:"f.fv.close",CLOSE_DATE:"f.fv.closeDate",RELATIVE_TIMER_VIEW_DATE:"f.fv.relativeTimerViewDate"});let xe=new Set(["FLOATING_BOX","FLOATING_BAR","DETACHED"]);class Ve{constructor(){this.formVariantVisibleMap=new Map,this.formVariantHoverMap=new Map}visible(e){this.formVariantVisibleMap.set(e,new Date)}hover(e){this.formVariantHoverMap.set(e,new Date)}getStats(){return{formVariantVisibleMap:this.formVariantVisibleMap,formVariantHoverMap:this.formVariantHoverMap}}close(e){this.formVariantVisibleMap.delete(e),this.formVariantHoverMap.delete(e)}}let Fe={SYSTEM_CLASS_PREFIX:"cl-",SYSTEM_ATTRIBUTE_PREFIX:"cl-"};class ke extends De{constructor(){super();let e=fe.getPrefix().storagePrefix;this.siteStat=new Ce(e),this.sessionStat=new Me(e),this.pageStat=new we(e),this.formVariantStat=new Pe(e),this.formVariantHoverStat=new Ve,this.performDetection(),this.mouseOutHandler=this.onMouseOut.bind(this),this.mouseOverHandler=this.onMouseOver.bind(this),document.addEventListener("mouseout",this.mouseOutHandler),document.addEventListener("mouseover",this.mouseOverHandler)}getStats(){return{...this.siteStat.getStats(),...this.sessionStat.getStats(),...this.pageStat.getStats(),...this.formVariantStat.getStats(),...this.formVariantHoverStat.getStats()}}performDetection(){this.pageStat.incrementPageCount(),this.sessionStat.incrementSessionPagesCount(),this.sessionStat.setUrlSearchParams()}onUrlChanged(){this.reInitPageStat(),this.performDetection()}reInitPageStat(){this.pageStat.destroy(),this.pageStat=new we(fe.getPrefix().storagePrefix)}onMouseOut(e){null==e.toElement&&null==e.relatedTarget&&this.emit("mouseout")}onMouseOver(e){e.toElement&&"HTML"===e.toElement.tagName||e.toElement===document.body?this.emit("mouseover"):(e=e.composedPath().find((e=>e instanceof HTMLElement&&e.getAttribute(i("widget-id")))))&&(e=e.getAttribute(i("widget-id")),this.formVariantHoverStat.hover(e))}onWidgetClosed(e){this.formVariantStat.close(e.id),this.formVariantHoverStat.close(e.id),"CONTENT_LOCKER"===e.type&&this.formVariantStat.closeDate(e.id),xe.has(e.type)&&this.sessionStat.setAnnoyLastClosed()}destroy(){this.pageStat.destroy(),document.removeEventListener("mouseout",this.mouseOutHandler),document.removeEventListener("mouseover",this.mouseOverHandler)}}class Ue{constructor(e){this.uri=e}get(){return"".concat(this.getOrigin()).concat(this.uri)}_getBaseUrl(){let e=fe.getConfig();return e&&e.formConfig&&e.formConfig.url||e.apiConfig&&e.apiConfig.hostUrl}getOrigin(){return new URL("".concat(this._getBaseUrl())).origin}}class Be{isDebugQueryStringPresentInUrl(e){let t=window.location.href.toLowerCase();return!!Object.values(e).find((e=>t.includes(e)))}_getDebugIds(e,t){return(e.get(t)||"").split(",").map((e=>parseInt(e))).filter((e=>Number.isInteger(e)))}}let He="aa ab ae af ak am an ar as av ay az ba be bg bh bi bm bn bo br bs ca ce -- ch co cr cs cu cv cy da de dv dz ee el en eo es et eu fa ff fi fj fo fr fy ga gd gl gn gu gv ha -- he hi ho hr ht hu hy hz ia id ie ig ii ik io is it iu ja jv ka kg ki kj kk kl km kn ko kr ks ku kv kw ky la lb lg li ln lo lt lu lv mg mh mi mk ml mn mr ms mt my na nb nd ne ng nl nn no nr nv ny oc oj om or os pa pi pl ps pt qu rm rn ro ru rw ry sa sc sd se sg sh si sk sl sm sn so sq sr ss st su sv sw ta te tg th ti tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa wo xh yi yo za zh zu".split(" ");var Ge=new class{getLanguageForForms(){return this._fromHtml()||this._fromUrl()||this._fromNavigator()}getLanguageForRecoms(){var e;if(null!==(e=fe.getConfig().features)&&void 0!==e&&e.mulanRecoms)return(e=this._fromHtml()||this._fromUrl())&&this._normalizeBrowserLanguagesForRecoms(e)||void 0}_fromHtml(){return document.querySelector("html").getAttribute("lang")}_fromUrl(){return location.href.split("/").filter((e=>2===e.length||5===e.length)).find((e=>He.includes(e)))}_fromNavigator(){return navigator.language}_normalizeBrowserLanguagesForRecoms(e){return e.includes("-")?e.split("-")[0].toLowerCase():e.includes("_")?e.split("_")[0].toLowerCase():e}};let We={SUBSCRIPTION_FORM:"SUBSCRIPTION_FORM",REQUEST_FORM:"REQUEST_FORM",INFORMER:"INFORMER",AGE_VERIFY:"AGE_VERIFY"};class je{static parseFormVariantId(e){return{formId:+e.split("f")[1].split("v")[0],variantId:+e.split("v")[1],formVariantId:e}}static createFormParams(e,t,n,i){var o,r;let{formId:a,variantId:l}=je.parseFormVariantId(e);var c=Ge.getLanguageForForms(),d=ge.get("clContactId");let h=fe.getConfig().siteId;var u,m;(n={formId:a,variantId:l,lang:c,browserLanguage:c,appearanceLanguage:n,contactId:d,accountId:h},c=Object.values(fe.getConfig().formVariants).find((t=>t.id===e)),(d=Object.values(fe.getConfig().forms).find((e=>e.id===a)))&&(n.iid=d.__interactionId),c&&c.hasOwnProperty("useCase")&&(n.contactId=s(c)),c&&c.hasOwnProperty("appearanceRevision")&&(n.appearanceRevision=c.appearanceRevision),c&&c.hasOwnProperty("revision")&&(n.revision=c.revision),c&&null!==(o=c.asyncRules)&&void 0!==o&&null!==(r=o.HIDE_FOR_SUBSCRIBERS)&&void 0!==r&&r.enabled)&&(n.checkThisWidgetOnly=!(null===(u=c.asyncRules)||void 0===u||null===(m=u.HIDE_FOR_SUBSCRIBERS)||void 0===m||!m.checkThisWidgetOnly));return n.triggeredBy=t||"Rules",i&&(n.random=Math.floor(1e6*Math.random())+1),n}static createPageParams(){return{type:"view",accountId:fe.getConfig().accountId||fe.getConfig().orgId}}}t(je,"createVariantsUUID",(function(e){return e=e.map((e=>je.createFormParams(e.id))),btoa(unescape(encodeURIComponent(JSON.stringify(e))))})),t(je,"createVariantUUID",a);let ze=(e,t)=>Promise.all([e,t]).then((e=>{let[t,n]=e;const{status:i,statusText:o,headers:r}=n;return e={status:i,body:t,statusText:o,headers:r},n.ok?Promise.resolve(e):Promise.reject(e)}));class Ke{static execute(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var i=3<arguments.length?arguments[3]:void 0;return i={method:t,headers:i?{...i}:null,credentials:"same-origin",body:null},n&&(i.body="string"==typeof n?n:JSON.stringify(n)),fetch(e,i).then((e=>204===e.status?{...e,body:null}:"application/json"===(e.headers.get("Content-Type")||"").split(";")[0]?ze(e.json(),e):ze(e.text(),e))).catch((e=>Promise.reject(e)))}}class Xe{static generate(){let e,t="";for(let n=0;32>n;n++)8!==n&&12!==n&&16!==n&&20!==n||(t+="-"),e=Math.floor(16*Math.random()).toString(16).toUpperCase(),t+=e;return t}}class Ye{activate(){this._get(Ye.userCookieName)||this._set(Ye.userCookieName,fe.getCustomerId()||this._generateUserCookieValue())}disable(){this.disabled=!0;var e=this._get(Ye.userCookieName);e&&!fe.getCustomerId()?fe.setCustomerId(e):fe.getCustomerId()||(e=this._generateUserCookieValue(),fe.setCustomerId(e)),this.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return fe.getCustomerId();if(!this._get(Ye.userCookieName)){let e=this._generateUserCookieValue();return this._set(Ye.userCookieName,e),e}return this._get(Ye.userCookieName)}regenerateUserIdentifier(){let e=this._generateUserCookieValue();this._set(Ye.userCookieName,e)}retrieveUserIdentifier(){return this._get(Ye.userCookieName)}removeUserIdentifier(){this._set(Ye.userCookieName,null,{expires:new Date(0)})}_get(e){try{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}catch(e){}}_set(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n={path:"/",expires:new Date((new Date).getFullYear()+5,0),...n},n.expires instanceof Date&&(n.expires=n.expires.toUTCString());let i=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in n){i+="; "+e;let t=n[e];!0!==t&&(i+="="+t)}try{var o;let n=null!==(o=location.host)&&void 0!==o?o:"localhost";if(1===n.split(".").length)document.cookie=i+"; path=/";else{let o=n.split(".");o.shift();let r="."+o.join(".");document.cookie=i+"; path=/; domain="+r,null!=this._get(e)&&this._get(e)===t||(r="."+n,document.cookie=i+"; path=/; domain="+r)}t&&fe.setCustomerId(t)}catch(e){}}_generateUserCookieValue(){return Xe.generate()}}t(Ye,"userCookieName","sc");var qe=new Ye;class Qe extends(ge.getClass()){activate(){var e=qe.retrieveUserIdentifier();this.get(Qe.userIdentifierName)&&!e||(e=e||fe.getCustomerId()||this._generateUserIdentifier(),this.set(Qe.userIdentifierName,e),fe.setCustomerId(e),qe.removeUserIdentifier())}disable(){this.disabled=!0;let e=this.get(Qe.userIdentifierName);e&&!fe.getCustomerId()?fe.setCustomerId(e):fe.getCustomerId()||fe.setCustomerId(this._generateUserIdentifier()),this._remove(Qe.userIdentifierName),qe.removeUserIdentifier()}getUserIdentifier(){if(this.disabled)return fe.getCustomerId();var e=this.get(Qe.userIdentifierName);return e||(e=this._generateUserIdentifier(),this.set(Qe.userIdentifierName,e),fe.setCustomerId(e),e)}_remove(e){this._process((()=>localStorage.removeItem(e)))}_generateUserIdentifier(){return Xe.generate()}}t(Qe,"userIdentifierName","sc");var Ze=new Qe(he);class Je{getAppearance(e,t){return Ke.execute(new Ue("/forms/v3/page/".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r(je.createFormParams(e,void 0,void 0,t),["iid","contactId"]))))))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()}).then((e=>e.body)).catch((e=>(ce.error(e,"error on FormVariantDataSource#getAppearance"),{html:""})))}getDebugFormVariant(e){return Ke.execute(new Ue("/forms/v1/config/".concat(a("f".concat(e,"v").concat(e)))).get(),"GET",null,{"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()}).then((e=>e.body)).catch((e=>(ce.error(e,"error on FormVariantDataSource#getDebugFormVariant"),null)))}}class $e{async loadIfNeeded(e){let t=fe.getConfig();if((e=e.filter((e=>!t.forms[e]))).length){var n=new Je;return(e=await Promise.all(e.map((e=>n.getDebugFormVariant(e))))).filter((e=>!!e)).forEach((e=>{let{form:n,formVariant:i}=e;t.forms[n.id]=n,t.formVariants[i.id]=i})),e}}}var et=new class extends Be{constructor(){super(),t(this,"_queryParamNamesNeedUpdate",!0),t(this,"_queryParamNames",{})}getQueryParamNames(){return this._queryParamNames}publishedFormIdToDebug(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return e=new URLSearchParams(e.searchParams),parseInt(e.get(this._queryParamNames.DEBUG_PUBLISHED_FORM))||0}isDebugVariantShouldBeShown(e,t){return this._updateQueryParamNamesIfNeeded(),!!this._getConfigsToDebug(e).find((e=>e.id===t))}isDebugShouldIgnoreRules(){this._updateQueryParamNamesIfNeeded();var e=new URL(window.location.href.toLowerCase());return function(e,t){if(null==e){if(t)throw Error("Parameter 'str' is null or undefined.");return!1}if("boolean"==typeof e)return!0===e;if("string"==typeof e){if(""==e)return!1;if("true"==(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase()||"yes"==e.toLowerCase())return!0;e=(e=e.replace(/,/g,".")).replace(/^\s*\-\s*/g,"-")}return!isNaN(e)&&0!=parseFloat(e)}((e=new URLSearchParams(e.searchParams)).get(this._queryParamNames.DEBUG_IGNORE_RULES))}_updateQueryParamNamesIfNeeded(){if(this._queryParamNamesNeedUpdate){var e=fe.getPrefix().debugPrefix;e&&(this._queryParamNamesNeedUpdate=!1,this._queryParamNames={DEBUG_FORM:"".concat(e,"DebugForm").toLowerCase(),DEBUG_PUBLISHED_FORM:"".concat(e,"PublishedForm").toLowerCase(),DEBUG_FORM_VARIANT:"".concat(e,"DebugFormVariant").toLowerCase(),DEBUG_IGNORE_RULES:"".concat(e,"IgnoreRules").toLowerCase()}),e=new $e;var t=new URL(window.location.href.toLowerCase()),n=new URLSearchParams(t.searchParams);t=this._getDebugIds(n,this._queryParamNames.DEBUG_FORM),n=this._getDebugIds(n,this._queryParamNames.DEBUG_PUBLISHED_FORM),(t=[...new Set(t.concat(n)).values()].filter((e=>!fe.getConfig().forms[e]))).length&&e.loadIfNeeded(t)}}_getConfigsToDebug(e){if(null===window.location.href||!this.isDebugQueryStringPresentInUrl(this._queryParamNames))return[];var t=new URL(window.location.href.toLowerCase());t=new URLSearchParams(t.searchParams);let n=this._getDebugIds(t,this._queryParamNames.DEBUG_FORM);return e=e.filter((e=>n.includes(e.formId))),this._getFormConfigsToDebug(e,t)}_getFormConfigsToDebug(e,t){if(t.has(this._queryParamNames.DEBUG_FORM_VARIANT)){let n=t.get(this._queryParamNames.DEBUG_FORM_VARIANT).split(",");e=e.filter((e=>n.includes(e.id)))}return e}};var tt=new class{formVariantHasEnabledAsyncRules(e){return!!(e&&e.asyncRules&&Object.keys(e.asyncRules).length)&&Object.keys(e.asyncRules).map((t=>e.asyncRules[t])).some((e=>e.enabled))}areFormsPresent(){var e=fe.getConfig();let t=0<Object.values(e.forms||{}).length;return e=0<Object.values(e.formVariants||{}).length,t&&e}getForm(e){return Object.values(fe.getConfig().forms||{}).find((t=>t.id===e))}getFormVariant(e){return Object.values(fe.getConfig().formVariants||{}).find((t=>t.id===e))}getFormVariantByVariantId(e){return Object.values(fe.getConfig().formVariants||{}).find((t=>t.id.endsWith("v".concat(e))))}getFormVariants(){return Object.values(fe.getConfig().formVariants||{})}getStaticActiveFormVariants(e){let t=this._getActiveFormIDs(e);return Object.values(e.formVariants||{}).filter((e=>"BUILT_IN"===e.type)).filter((e=>t.includes(e.formId)))}getDebugFormVariants(){let e=fe.getConfig(),t=Object.values(e.forms||{}).filter((e=>"DEBUG"===e.publishStatus)).map((e=>e.id));return Object.values(e.formVariants||{}).filter((e=>t.includes(e.formId)))}getFormVariantsToRender(e){return Object.values(e.formVariants||{}).filter((e=>this.filterByStatus(e)))}filterByStatus(e){return"DEBUG"!==this.getForm(e.formId).publishStatus||et.isDebugVariantShouldBeShown(this.getDebugFormVariants(),e.id)}_getActiveFormIDs(e){return Object.values(e.forms||{}).filter((e=>"FOR_ALL"===e.publishStatus)).map((e=>e.id))}};let nt={RECOMS:{ROOT_ELEMENT_ID_PREFIX:"es-recom-",ROOT_ELEMENT_CLASSNAME:"es-recom-container"},FORMS:{ROOT_ELEMENT_ID_PREFIX:"es-form-",ROOT_ELEMENT_CLASSNAME:"es-form-container"}};class it{constructor(){t(this,"obs",null),t(this,"_attemptsCount",0),t(this,"_maxAttemptsCount",5),t(this,"_attemptsInterval",200)}observe(e){this.obs=new MutationObserver((t=>{try{this._mutationRecordsHasProductVariants(t)||e()}catch(e){ce.error(e)}}));try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0})}catch(e){let t=this,n=setInterval((()=>{if(this._attemptsCount++,t._attemptsCount>=t._maxAttemptsCount)throw clearInterval(n),e;try{this.obs.observe(document.body,{subtree:!0,childList:!0,attributes:!0}),clearInterval(n)}catch(e){}}),this._attemptsInterval)}}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}_mutationRecordsHasProductVariants(e){return 0<e.filter((e=>{let t=Array.from(e.addedNodes);return e=Array.from(e.removedNodes),t.length||e.length?this._hasProductVariants(t)||this._hasProductVariants(e):null})).length}_hasProductVariants(e){return 0<e.filter((e=>e instanceof Element&&e.getAttribute("id")&&[nt.RECOMS].some((t=>e.getAttribute("id").startsWith(t.ROOT_ELEMENT_ID_PREFIX))))).length}}class ot{static isInstanceInDebugMode(){return fe.getInstanceDebugMode()}static isFormStatusIsDebug(e){return"DEBUG"===tt.getForm(e).publishStatus}static isInDebugMode(e){return ot.isInstanceInDebugMode()||ot.isFormStatusIsDebug(e)}}class rt{constructor(e,n){t(this,"injectedConnectorIds",[]),t(this,"injectedPreviewMap",{}),t(this,"cacheDocuments",{}),t(this,"appearanceLoading",!1),t(this,"userActionsDetector",null),t(this,"componentResolver",null),this.dataSource=e,this.browserLanguageService=n}activate(e,t){this.userActionsDetector=e,this.componentResolver=t}destroy(){}destroyForm(e){this.removeInjectedDocumentConnector(e.id),this.removeInjectedConnectorId(e.id)}async getAppearanceFromCacheOrLoad(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.ignoreLoading||(this.appearanceLoading=!0);let n=e.id;var i=ot.isInDebugMode(e.formId);return i=this.cacheDocuments[n]||await this.dataSource.getAppearance(n,i),this.cacheDocuments[n]=i,t.ignoreLoading||(this.appearanceLoading=!1),i}prepareForm(e,t){return this.getAppearanceFromCacheOrLoad(e,t).then((async e=>{if(!e||!e.document)return{appearance:e,manifests:[]};let{manifests:t}=await this.componentResolver.loadComponentsIfNecessary(null==e?void 0:e.document,fe.getConfig().apiConfig.staticResourcesUrl);return{appearance:e,manifests:t}}))}isAppearanceLoading(){return!!this.appearanceLoading}addInjectedConnectorId(e){this.injectedConnectorIds.push(e)}addInjectedDocumentConnector(e,t){this.injectedPreviewMap[e]=t}getInjectedDocumentConnectors(){return Object.values(this.injectedPreviewMap)}removeInjectedDocumentConnector(e){let t=this.injectedPreviewMap[e];t&&(t.disconnect(),delete this.injectedPreviewMap[e])}removeInjectedConnectorId(e){this.injectedConnectorIds=this.injectedConnectorIds.filter((t=>t!==e))}getInjectedConnectorIds(){return this.injectedConnectorIds}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}addWidgetClickHandler(e,t,n){n.useCase===We.INFORMER&&e.on("WIDGET_CLICKED",(()=>{t.send("FormClick_[Name]")}))}}class st{constructor(e,t,n){this.formVariantId=e,this.formType=t,this.form=n,this.eventsStatusMap={}}gaLoaded(){return window.ga&&ga.create}getPayload(e){var t;return{hitType:"event",eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}send(e){this.gaLoaded()&&!this.getEventSendStatus(e)&&(ga("send",this.getPayload(e)),this.setEventSendStatus(e))}destroy(){}}class at{constructor(e,t,n){this.formVariantId=e,this.formType=t,this.form=n,this.eventsStatusMap={},this.tagIds=[]}gaLoaded(){return window.dataLayer&&window.dataLayer.length}updateTagIds(){this.tagIds=(window.dataLayer||[]).filter((e=>e&&e.length&&1<e.length)).filter((e=>e[0]&&"config"===e[0])).filter((e=>e[1]&&String(e[1]).startsWith("G-"))).map((e=>e[1]))}getPayload(e){var t;return{eventCategory:this.formType,eventAction:e,eventLabel:(null===(t=this.form)||void 0===t?void 0:t.name)||this.formVariantId}}getEventSendStatus(e){return this.eventsStatusMap[e]&&this.eventsStatusMap[e].sent}setEventSendStatus(e){this.eventsStatusMap[e]={sent:!(1<arguments.length&&void 0!==arguments[1])||arguments[1]}}isGtag(){return this.tagIds.length&&window.gtag&&"function"==typeof gtag}send(e){if(this.updateTagIds(),this.gaLoaded()&&!this.getEventSendStatus(e)){let t=this.getPayload(e);if(this.isGtag())this.tagIds.forEach((e=>{t.send_to=e;try{window.gtag("event",he.getProductName(),t)}catch(e){ce.error("Gtag send tagIds",e)}}));else try{t.event=he.getProductName(),window.dataLayer.push(t)}catch(e){ce.error("Gtag pushing to GTMs dataLayer",e)}this.setEventSendStatus(e)}}destroy(){}}class lt{static create(e,t,n,i){if("GOOGLE_ANALYTICS"===e.name)return[new st(t,n,i),new at(t,n,i)];throw Error("Unknown TrackerName: "+e.name)}}class ct{constructor(e){let{formId:t,variantId:n,addReferrer:i,triggeredBy:o}=e;this._payload={formId:t,variantId:n,type:"click",triggeredBy:o},i&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class dt{constructor(e){this.params=e}handle(){this.onFormClicked()}onFormClicked(){let e=new ct({...this.params,addReferrer:"DEBUG"!==tt.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();Ke.execute(new Ue("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()}).catch((e=>ce.error(e,"onFormsReceived error on FormClickedEventHandler: ")))}}class ht{constructor(e){this.trackers=[],this.formVariant=tt.getFormVariant(e),this.form=tt.getForm(this.formVariant.formId),this.isInDebugMode=ot.isInDebugMode(this.formVariant.formId)}activate(){this.formVariant.tracking&&this.formVariant.tracking.trackers&&this.formVariant.tracking.trackers.forEach((e=>{e=lt.create(e,this.formVariant.id,this.formVariant.type,this.form),this.trackers.push(...e)}))}transformEventName(e){return e.replace("[Name]",this.formVariant.id)}send(e){if(!this.isInDebugMode){var t=this.transformEventName(e);this.trackers.forEach((e=>{e.send(t)}))}}trackClick(){new dt(je.createFormParams(this.formVariant.id)).handle()}destroy(){this.trackers.forEach((e=>e.destroy()))}}class ut{static get(e,t){return t.style.getPropertyValue("--".concat(e))}static apply(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;l(e,(n=>{let i="--".concat(n);n=e[n],t.style.getPropertyValue(i)||t.style.setProperty(i,n)}))}static override(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;l(e,(n=>{let i="--".concat(n);t.style.setProperty(i,e[n])}))}}class mt{constructor(e){this.state=e||{}}getState(){return this.state}setState(e){this.state=Object.assign(Object.assign({},this.state),e)}destroy(){}}var pt=function(e){return{isValid:"boolean"==typeof e?e:e&&e.length,errorKey:"REQUIRED"}};class gt{constructor(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0;this.control=e,this.customValidatorsMap=n,this.asyncCustomValidators=i,this.required=t.required,this.validator=t.validator}async isValid(e){return!(await this.getErrorKeys(e)).length}getErrorKeys(e){if(!this.required&&!e)return Promise.resolve([]);let t=this.getSyncErrorKeys(e),n=[];return this.validator&&this.asyncCustomValidators&&this.validator in this.asyncCustomValidators&&n.push(this.asyncCustomValidators[this.validator]),n.length?Promise.all(n.map((n=>n(e,t)))).then((e=>(e.forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),e=e.filter((e=>!e.isValid)).map((e=>e.errorKey)),[...t,...e]))):Promise.resolve(t)}getSyncErrorKeys(e){if(!this.required&&!e)return[];var t=[];return this.required&&(this.customValidatorsMap&&this.customValidatorsMap.REQUIRED?t.push(this.customValidatorsMap.REQUIRED):t.push(pt)),this.validator&&this.customValidatorsMap&&"REQUIRED"!==this.validator&&this.validator in this.customValidatorsMap&&t.push(this.customValidatorsMap[this.validator]),t.length?((t=t.map((t=>t(e)))).forEach((e=>{null!==e.value&&void 0!==e.value&&this.control.setValue(e.value,{silent:!0,skipValidation:!0,skipElementUpdate:!0})})),t.filter((e=>!e.isValid)).map((e=>e.errorKey))):[]}}class Et{constructor(){this.listeners=Et.createDefaultListenersState()}emit(e,t){let n=this.listeners[e];n&&Object.values(n).forEach((n=>n(t,e))),Object.values(this.listeners["*"]).forEach((n=>n(t,e)))}on(e,t){let n=Xe.generate(),i=this.listeners[e];return i?i[n]=t:this.listeners[e]={[n]:t},{off:()=>{delete this.listeners[e][n]}}}destroy(){this.listeners=Et.createDefaultListenersState()}}Et.createDefaultListenersState=()=>({"*":{}});let vt={valueChanged:"valueChanged",validationStatusChanged:"validationStatusChanged",touchedStatusChanged:"touchedStatusChanged"};class ft extends Et{constructor(e,t,n,i,o){if(super(),this.componentId=e.componentId,this.name=e.name,this.value=(this.defaultValue=e.defaultValue)?e.defaultValue:void 0,this.validator=new gt(this,e.validation,n,i),this.errorKeys=this.validator.getSyncErrorKeys(this.getValue()),this.valid=!this.errorKeys.length,this.pending=this.disabled=!1,this.debounceValue=e.hasOwnProperty("debounceValue")?e.debounceValue:300,this.tracking=o,this.valueChanged=this.touched=!1,t=(this.elementRef=t)?this.elementRef.getAttribute("type"):null,this.elementRef&&e.defaultValue&&("checkbox"===t?this.elementRef.checked=e.defaultValue:this.elementRef.value=e.defaultValue),this.debouncedValidate=this.debounceValue?c((e=>this.validate(e)),this.debounceValue):this.validate.bind(this),this.elementRef){let n="checkbox"===t;this.elementRef.addEventListener(e.triggerEvent?e.triggerEvent:"input",(e=>{this.inputElementValueChanged(n?e.target.checked:e.target.value)})),this.elementRef.addEventListener("blur",(()=>{this.markAsTouched()}))}}inputElementValueChanged(e){this.tracking.send("FormStartFilling_[Name]"),this.setValue(e)}setDisabled(){this.disabled=!0,this.elementRef&&this.elementRef.setAttribute("disabled","disabled")}setEnabled(){this.disabled=!1,this.elementRef&&this.elementRef.removeAttribute("disabled")}setPending(e){this.pending=e}getName(){return this.name}getValue(){return this.value}getComponentId(){return this.componentId}setValue(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{silent:!1,skipValidation:!1,skipElementUpdate:!1};t.skipElementUpdate||(this.valueChanged=this.value!==e),this.value=e,this.elementRef&&!t.skipElementUpdate&&(this.elementRef.value=e),t.skipValidation?!t.silent&&this.valueChanged&&this.emit(vt.valueChanged,e):(this.pending=!0,this.emit(vt.validationStatusChanged,"pending"),this.debouncedValidate(t)),t.silent||t.skipValidation||this.elementRef||this.markAsTouched()}isValid(){return this.valid}isPending(){return this.pending}async validate(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{silent:!1};this.pending=!0;let t=await this.validator.getErrorKeys(this.getValue());return this.valid=!t.length,this.errorKeys=t,this.pending=!1,e.silent||(this.emit(vt.validationStatusChanged,this.valid?"valid":"invalid"),this.valueChanged&&(this.emit(vt.valueChanged,this.getValue()),this.valueChanged=!1)),this.valid}markAsTouched(){this.touched=!0,this.emit(vt.touchedStatusChanged)}isTouched(){return this.touched}getErrorKeys(){return this.errorKeys}destroy(){super.destroy()}}let yt=Object.assign(Object.assign({},vt),{validationChecked:"validationChecked",controlRegistered:"controlRegistered"});class _t extends Et{constructor(e){super(),this.controls={},this.tracking=e,this.preventSubmit=this.submitQueuedAfterPending=!1}registerControl(e,t,n,i){let o=new ft(e,t,n,i,this.tracking);return this.controls[e.name]=o,o.on("*",((e,t)=>{if(t===vt.valueChanged)this.emit(yt.valueChanged,o);else this.emit(t,e),t===vt.validationStatusChanged&&this.emit(yt.validationChecked,this.isValid())})),this.emit(yt.controlRegistered,o),this.controls[e.name]}getControl(e){return this.controls[e]}hasControl(e){return!!this.getControl(e)}setControlValue(e,t){this.controls[e].setValue(t)}setPreventSubmit(e){this.preventSubmit=e}destroy(){super.destroy()}isValid(){return Object.values(this.controls).every((e=>e.isValid()))}isPending(){return!!Object.values(this.controls).filter((e=>e.isPending())).length}getControlsMap(){return Object.values(this.controls).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.getName()]:t.getValue()})),{})}getControlsAsArray(){return Object.values(this.controls)}setDisabledAll(){this.getControlsAsArray().forEach((e=>e.setDisabled()))}setEnabledAll(){this.getControlsAsArray().forEach((e=>e.setEnabled()))}markAsTouched(){Object.values(this.controls).forEach((e=>e.markAsTouched()))}isTouched(){return Object.values(this.controls).every((e=>e.touched()))}}let Tt={VIEW:"VIEW",MODULE:"MODULE",CONTAINER:"CONTAINER",SLIDER:"SLIDER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",CONSENT:"CONSENT",FLOATING_IMAGE:"FLOATING_IMAGE",COLUMN:"COLUMN"};class bt{static extract(e){let t=e.views.map((e=>{const t=e.children.map((e=>e.type===Tt.MODULE?Object.assign(Object.assign({},e),bt.moduleToContainerParams):e));return Object.assign(Object.assign({},e),{children:t})}));return Object.assign(Object.assign({},e),{views:t})}static sort(e,t){return e.index>t.index?1:-1}static reIndex(e,t){return Object.assign(Object.assign({},e),{index:t+e.index})}}bt.moduleToContainerParams={name:"SysContainerComponent",version:"1.0.0"};let Ct={BEFORE:"BEFORE",AFTER:"AFTER",INSIDE:"INSIDE"};class It{static removeNode(e,t){var n=this.getParentPath(t);return t=t[t.length-1],(n=this.getNodeByPath(e,n))?((e=n.children.splice(t,1)[0]).path=null,It.reIndex(n,n.path),e):((n=e.splice(t,1)[0]).path=null,e.forEach(((e,t)=>{e.path=[t],It.reIndex(e,e.path)})),n)}static insertNode(e,t,n,i){var o=It.getPathToInsert(t,i,n);return t=i===Ct.INSIDE?t:this.getParentPath(o),t=this.getNodeByPath(n,t),o=o[o.length-1],t?(t.children.splice(o,0,e),It.reIndex(t,t.path)):(n.splice(o,0,e),n.forEach(((e,t)=>{e.path=[t],It.reIndex(e,e.path)}))),e}static moveNode(e,t,n,i){(n=It.getNodeByPath(e,n))&&(t=It.removeNode(e,t),n=It.getNodeById(e,n.id).path,It.insertNode(t,n,e,i))}static iterateDepthFirst(){return d(...arguments)}static reIndex(e,t){e.path=t,e.children&&e.children.forEach(((e,n)=>{It.reIndex(e,t.concat(n))}))}static getRelativePath(e){return e.slice(1,e.length)}static getParentPath(e){return e.slice(0,-1)}static getNodeByPath(e,t){for(let n=0;n<t.length;n++){if(n===t.length-1)return e[t[n]]||null;if(!e[t[n]])return null;e=e[t[n]].children}}static getNodeById(e,t){let n=null;for(let i=0;i<e.length;i++){let o=e[i];if(n)break;if(o.id===t){n=o;break}o.children&&o.children.length&&(n=this.getNodeById(o.children,t))}return n}static getPathToInsert(e,t,n){let i,o=e[e.length-1];return t===Ct.BEFORE?i=e:t===Ct.AFTER?(i=e.slice(),i[e.length-1]=o+1):t===Ct.INSIDE&&(i=e.concat([It.getNodeByPath(n,e).children.length])),i}}class Ot extends Et{constructor(e){super(),this.json=e,this.flatJson=bt.extract(this.json)}setComponentRef(e,t){It.getNodeById(this.getViews(),e).componentRef=t}getModel(){return this.flatJson}getView(e){return this.flatJson.views[e]}getViews(){return this.flatJson.views}getShared(){return this.flatJson.shared}iterateViewModelAndExecute(e,t){e=this.getView(e),It.iterateDepthFirst(e,t)}destroy(){}destroyView(e){this.iterateViewModelAndExecute(e,(e=>{e.componentRef&&(e.componentRef.remove(),e.componentRef=null)}))}}class St{constructor(e){this.config=Object.assign(Object.assign({},{subscribeContactUrl:""}),e||{})}getConfig(e){return e?this.config[e]:this.config}}class At extends Et{constructor(e,t){super(),this.documentModel=e,this.containerElement=t,this.mobileBreakpointWidth=this.documentModel.getShared().mobileBreakpointWidth,this._isMobile=this._calculateMobileFlag(),this.documentModel.on("ENVIRONMENT_UPDATE",(e=>{this._isMobile=e.isMobileEnv,this.emit(At.changeEventName,this._isMobile)}))}isMobile(){return this._isMobile}destroy(){super.destroy()}_calculateMobileFlag(){return this._getElementsWidthPx(this.containerElement)<=this.mobileBreakpointWidth}_getElementsWidthPx(e){return parseInt(getComputedStyle(e).width)}}At.changeEventName="CHANGE";class Nt extends Et{constructor(e){super(),this.handleMobileBreakpoint(e.getShared().mobileBreakpointWidth),e.on("ENVIRONMENT_UPDATE",(e=>{({isMobileEnv:e}=e),this._isMobile=e,this.emit(Nt.changeEventName,this._isMobile)}))}handleMobileBreakpoint(e){this.mobileBreakpointWidth=e,e=Number.isInteger(this.mobileBreakpointWidth)?"".concat(this.mobileBreakpointWidth,"px"):this.mobileBreakpointWidth,this.mediaQueryList=window.matchMedia("(max-width: ".concat(e,")")),this.mediaQueryList.addListener(this.listener.bind(this)),this._isMobile=this.mediaQueryList.matches,this.emit(Nt.changeEventName,this._isMobile)}isMobile(){return this._isMobile}listener(e){this._isMobile=e.matches,this.emit(Nt.changeEventName,this._isMobile)}destroy(){super.destroy(),this.mediaQueryList.removeListener(this.listener.bind(this))}}Nt.changeEventName="CHANGE";class Rt{constructor(e,t,n){this.documentModel=e,this.viewRenderer=t,this.entryModuleType=n}handleModelUpdate(e,t){switch(e){case"COMPONENT_PROPS_UPDATE":let{id:i,data:o}=t;if(!(e=It.getNodeById(this.documentModel.getViews(),i)))break;if(!(e=e.path.reduce(((e,t,n)=>0===n?this.documentModel.getViews()[t]:e.children[t]),this.documentModel.getViews())))break;e.props=Object.assign({},o),this.documentModel.emit("".concat("COMPONENT_PROPS_UPDATE","_").concat(i),o);break;case"MOBILE_BREAKPOINT_UPDATE":this.documentModel.getShared().mobileBreakpointWidth=t.mobileBreakpointWidth;break;case"ENVIRONMENT_UPDATE":this.documentModel.emit("ENVIRONMENT_UPDATE",t);break;case"TEXT_CLASS_ADDED":this.documentModel.getShared().textClasses[t.id]=t;break;case"TEXT_CLASS_UPDATED":this.documentModel.getShared().textClasses[t.id]=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_CLASS_REMOVED":delete this.documentModel.getShared().textClasses[t];break;case"HEADER_FONT_FAMILY_UPDATE":this.documentModel.getShared().headerFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"TEXT_FONT_FAMILY_UPDATE":this.documentModel.getShared().textFontFamily=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COLOR_SCHEMA_UPDATE":this.documentModel.getShared().cssVars=t,this.documentModel.emit("COLOR_SCHEMA_UPDATE",t);break;case"LINK_PARAMS_UPDATE":this.documentModel.getShared().linkParams=t,this.documentModel.emit("SHARED_UPDATE_ALL");break;case"COMPONENT_REMOVE":this.removeComponent(t.path);break;case"COMPONENT_INSERT":let{insertPosition:r,targetPath:s,model:a}=t;e=It.getNodeByPath(this.documentModel.getViews(),s),It.insertNode(a,s,this.documentModel.getViews(),r),this.viewRenderer.renderComponent(e,a,this.entryModuleType,r);break;case"COMPONENT_MOVE":let{fromPath:l,insertPosition:c,targetPath:d}=t;e=d[0];var n=this.documentModel.getViews()[e];(t=It.getNodeByPath(this.documentModel.getViews(),d))&&(e=this.removeComponent(l),n=It.getNodeById([n],t.id).path,It.insertNode(e,n,this.documentModel.getViews(),c),this.viewRenderer.renderComponent(t,e,this.entryModuleType,c))}}removeComponent(e){let t=It.getNodeByPath(this.documentModel.getViews(),e);if(t)return t.componentRef.remove(),It.removeNode(this.documentModel.getViews(),e)}}class Lt{static applyHostStyles(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;let i=3<arguments.length?arguments[3]:void 0;var o,r,s;(n=null===(r=null===(o=null==n?void 0:n.props)||void 0===o?void 0:o.handlers)||void 0===r?void 0:r.find((e=>"CLICK"===e.type)))&&null!==(s=n.actions)&&void 0!==s&&s.length&&(t.style.cursor="pointer"),e!==Tt.VIEW&&e!==Tt.CONTAINER&&e!==Tt.COLUMN||(t.style.display="CONTENT_LOCKER"===i&&e===Tt.VIEW?"flex":"inline-flex",t.style.position="relative"),t.style.boxSizing="border-box"}constructor(){this.styles="/* common styles */ *, *:before, *:after { box-sizing: border-box; font-family: inherit; }"}setStyles(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";this.styles="".concat(this.styles," ").concat(e)}getStyles(){return this.styles}}class Mt{static camelCaseToDashCase(e){return e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))}static camelCaseToUpperSnakeCase(e){return e.replace(/[A-Z]/g,(e=>"_"+e)).toUpperCase()}}class wt{static getDefaultParamValueByAnimationType(e,t){return this["CL_DEFAULT_LOOP_ANIMATION_".concat(e,"_").concat(Mt.camelCaseToUpperSnakeCase(t))]}static getAllAnimationStyles(e){let t=Object.values(this._animations).map((e=>e.styles)).join("\n");return e&&(t=t.replace(new RegExp(".".concat(this.animationClassPrefix),"g"),"".concat(e," .").concat(this.animationClassPrefix))),t}static constructAnimationStylesByTypes(e){return Object.keys(this._animations).filter((t=>e.includes(t))).map((e=>this._animations[e].styles)).join("")}}var Dt=wt;wt.animationClassPrefix="cl-loop-animation-",wt.CL_DEFAULT_LOOP_ANIMATION_PULSE_BORDER_RADIUS="50px",wt.CL_DEFAULT_LOOP_ANIMATION_PULSE_COLOR="rgba(0,0,0,0.7)",wt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT=3,wt._animations={PULSE:{styles:"\n        .".concat(Dt.animationClassPrefix,"PULSE {\n          animation: pulse-animation 2s;\n          animation-iteration-count: var(--cl-PULSE-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n          border-radius: var(--cl-PULSE-borderRadius);\n        }\n\n        @keyframes pulse-animation {\n          0% {\n            box-shadow: 0 0 0 0 var(--cl-PULSE-color);\n          }\n\n          70% {\n            box-shadow: 0 0 0 20px rgba(0, 0, 0, 0);\n          }\n\n          100% {\n            box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);\n          }\n        }")},VIBRATE:{styles:"\n        .".concat(Dt.animationClassPrefix,"VIBRATE {\n          animation: vibrate-animation 10.3s linear both;\n          animation-iteration-count: var(--cl-VIBRATE-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes vibrate-animation {\n          0% {\n            transform: translate(0);\n          }\n          2% {\n            transform: translate(-2px, 2px);\n          }\n          4% {\n            transform: translate(-2px, -2px);\n          }\n          6% {\n            transform: translate(2px, 2px);\n          }\n          8% {\n            transform: translate(2px, -2px);\n          }\n          10% {\n            transform: translate(0);\n          }\n          12% {\n            transform: translate(-2px, 2px);\n          }\n          14% {\n            transform: translate(-2px, -2px);\n          }\n          16% {\n            transform: translate(2px, 2px);\n          }\n          18% {\n            transform: translate(2px, -2px);\n          }\n          20% {\n            transform: translate(0);\n          }\n          100% {\n            transform: translate(0);\n          }\n        }")},WOBBLE:{styles:"\n        .".concat(Dt.animationClassPrefix,"WOBBLE {\n          animation: wobble-animation 10.8s both;\n          animation-iteration-count: var(--cl-WOBBLE-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes wobble-animation {\n          0%,\n          100% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n          1.5% {\n            transform: translateX(-30px) rotate(-6deg);\n          }\n          3% {\n            transform: translateX(15px) rotate(6deg);\n          }\n          4.5% {\n            transform: translateX(-15px) rotate(-3.6deg);\n          }\n          6% {\n            transform: translateX(9px) rotate(2.4deg);\n          }\n          7.5% {\n            transform: translateX(-6px) rotate(-1.2deg);\n          }\n          10% {\n            transform: translateX(0%);\n            transform-origin: 50% 50%;\n          }\n        }")},SHAKE:{styles:"\n        .".concat(Dt.animationClassPrefix,"SHAKE {\n          animation: shake-animation 10.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;\n          animation-iteration-count: var(--cl-SHAKE-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes shake-animation {\n          0%,\n          100% {\n            transform: translateX(0);\n          }\n          1%,\n          3%,\n          5%,\n          7% {\n            transform: translateX(-10px);\n          }\n          2%,\n          4%,\n          6% {\n            transform: translateX(10px);\n          }\n          8% {\n            transform: translateX(8px);\n          }\n          9% {\n            transform: translateX(-8px);\n          }\n          10% {\n            transform: translateX(0);\n          }\n        }")},JELLO:{styles:"\n        .".concat(Dt.animationClassPrefix,"JELLO {\n          animation: jello-animation 10.9s both;\n          animation-iteration-count: var(--cl-JELLO-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes jello-animation {\n          0% {\n            transform: scale3d(1, 1, 1);\n          }\n          3% {\n            transform: scale3d(1.25, 0.75, 1);\n          }\n          4% {\n            transform: scale3d(0.75, 1.25, 1);\n          }\n          5% {\n            transform: scale3d(1.15, 0.85, 1);\n          }\n          6.5% {\n            transform: scale3d(0.95, 1.05, 1);\n          }\n          7.5% {\n            transform: scale3d(1.05, 0.95, 1);\n          }\n          10% {\n            transform: scale3d(1, 1, 1);\n          }\n          100% {\n            transform: scale3d(1, 1, 1);\n          }\n        }")},BOUNCE:{styles:"\n        .".concat(Dt.animationClassPrefix,"BOUNCE {\n          animation: bounce-animation 10.9s both;\n          animation-iteration-count: var(--cl-BOUNCE-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes bounce-animation {\n          0% {\n            transform: translateY(-45px);\n            animation-timing-function: ease-in;\n            opacity: 1;\n          }\n          2.4% {\n            opacity: 1;\n          }\n          4% {\n            transform: translateY(-24px);\n            animation-timing-function: ease-in;\n          }\n          6.5% {\n            transform: translateY(-12px);\n            animation-timing-function: ease-in;\n          }\n          8.2% {\n            transform: translateY(-6px);\n            animation-timing-function: ease-in;\n          }\n          9.3% {\n            transform: translateY(-4px);\n            animation-timing-function: ease-in;\n          }\n          2.5%,\n          5.5%,\n          7.5%,\n          8.7% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n          }\n          10% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n          100% {\n            transform: translateY(0px);\n            animation-timing-function: ease-out;\n            opacity: 1;\n          }\n        }")},BLINK:{styles:"\n        .".concat(Dt.animationClassPrefix,"BLINK {\n          animation: blink-animation 10.6s both;\n          animation-iteration-count: var(--cl-BLINK-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes blink-animation {\n          0%,\n          5%,\n          10%,\n          100% {\n            opacity: 1;\n          }\n          2.5%,\n          7.5% {\n            opacity: 0;\n          }\n        }")},FLICKER:{styles:"\n        .".concat(Dt.animationClassPrefix,"FLICKER {\n          animation: flicker-animation 12.5s linear both;\n          animation-iteration-count: var(--cl-FLICKER-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes flicker-animation {\n          0%,\n          100% {\n            opacity: 1;\n          }\n          3.298% {\n            opacity: 1;\n          }\n          3.3% {\n            opacity: 0;\n          }\n          3.4% {\n            opacity: 0;\n          }\n          3.402% {\n            opacity: 1;\n          }\n          3.498% {\n            opacity: 1;\n          }\n          3.5% {\n            opacity: 0;\n          }\n          3.59% {\n            opacity: 0;\n          }\n          3.592% {\n            opacity: 1;\n          }\n          3.898% {\n            opacity: 1;\n          }\n          3.9% {\n            opacity: 0;\n          }\n          3.98% {\n            opacity: 0;\n          }\n          3.982% {\n            opacity: 1;\n          }\n          8.398% {\n            opacity: 1;\n          }\n          8.4% {\n            opacity: 0;\n          }\n          8.49% {\n            opacity: 0;\n          }\n          8.492% {\n            opacity: 1;\n          }\n          84.92% {\n            opacity: 1;\n          }\n        }")},PING:{styles:"\n        .".concat(Dt.animationClassPrefix,"PING {\n          animation: ping-animation 10.8s ease-in-out both;\n          animation-iteration-count: var(--cl-PING-animationIterationCount, ").concat(Dt.CL_DEFAULT_LOOP_ANIMATION_ITERATION_COUNT,");\n        }\n\n        @keyframes ping-animation {\n          0%,\n          16% {\n            transform: scale(1);\n            opacity: 1;\n          }\n          8% {\n            transform: scale(2.2);\n            opacity: 0;\n          }\n        }")}};class Pt{static extractAdaptiveStylesClasses(e){let t="";return e.props.adaptiveStyles?(e.props.adaptiveStyles.desktop.forEach((e=>t+=" ".concat(e.classes))),e.props.adaptiveStyles.mobile.forEach((e=>t+=" ".concat(e.classes))),t.split(" ")):[]}static extractLoopAnimationsFromAdaptiveStylesClasses(e){return this.extractAdaptiveStylesClasses(e).filter((e=>e.startsWith(wt.animationClassPrefix))).map((e=>e.replace(wt.animationClassPrefix,"")))}}var xt={transparent:"#0000"},Vt=function(e,t,n,i){return null!=i&&""!==i||(i=1),e=parseFloat(e),t=parseFloat(t),n=parseFloat(n),i=parseFloat(i),255>=e&&0<=e&&255>=t&&0<=t&&255>=n&&0<=n&&1>=i&&0<=i?[Math.round(e),Math.round(t),Math.round(n),i]:null},Ft=/(?:rgb)a?\(\s*([.\d%]+)\s*,\s*([.\d%]+)\s*,\s*([.\d%]+)\s*(?:,\s*([.\d]+)\s*)?\)/i,kt=function(e,t){if(null==e)return null;e=(e+"").replace(/\s+/,"");var n=xt[e];return n?kt(n,t):(n=e.match(Ft))&&(e=n.slice(1))&&(e=Vt.apply(null,e))?t?e:(1===e[3]&&e.splice(3,1),"rgb"+(4===e.length?"a":"")+"("+e+")"):null};class Ut{ratio(e,t,n){return e=this.getRgbTriplet(e,n),t=this.getRgbTriplet(t,n),this.wcagRgb(e,t)}isNotTransparent(e,t){t=t||{};let n=(e=kt(e)).match(/\((.*)\)/)[1].split(",");if(4!=n.length||"0"!=n[3]||t.ignoreAlpha)return e;throw new TypeError("get-contrast cannot contrast transparent colors")}getRgbTriplet(e,t){if("string"!=typeof e)throw new TypeError("get-contrast expects colors as strings");return e=e.toLowerCase(),(e=this.isNotTransparent(e,t)).match(/\((.*)\)/)[1].split(",").slice(0,3)}wcagRgb(e,t){return this.luminance(this.relativeLuminance(e),this.relativeLuminance(t))}luminance(e,t){return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)}relativeLuminance(e){let t=e[0]/255,n=e[1]/255;e=e[2]/255;let i=1/12.92;return.2126*(.03928>=t?t*i:Math.pow((t+.055)/1.055,2.4))+.7152*(.03928>=n?n*i:Math.pow((n+.055)/1.055,2.4))+.0722*(.03928>=e?e*i:Math.pow((e+.055)/1.055,2.4))}}var Bt=Array.prototype.concat,Ht=Array.prototype.slice,Gt=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n],r=!(!(r=o)||"string"==typeof r)&&(r instanceof Array||Array.isArray(r)||0<=r.length&&(r.splice instanceof Function||Object.getOwnPropertyDescriptor(r,r.length-1)&&"String"!==r.constructor.name));r?t=Bt.call(t,Ht.call(o)):t.push(o)}return t};Gt.wrap=function(e){return function(){return e(Gt(arguments))}};var Wt,jt={},zt=Object.hasOwnProperty,Kt=Object.create(null);for(Wt in jt)zt.call(jt,Wt)&&(Kt[jt[Wt]]=Wt);var Xt={to:{},get:function(e){if("hsl"===e.substring(0,3).toLowerCase()){e=Xt.get.hsl(e);var t="hsl"}else e=Xt.get.rgb(e),t="rgb";return e?{model:t,value:e}:null}};Xt.get.rgb=function(e){if(!e)return null;var t,n=/^#([a-f0-9]{3,4})$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(n=t[2],t=t[1],e=0;3>e;e++)i=2*e,o[e]=parseInt(t.slice(i,i+2),16);n&&(o[3]=parseInt(n,16)/255)}else if(t=e.match(n)){for(n=(t=t[1])[3],e=0;3>e;e++)o[e]=parseInt(t[e]+t[e],16);n&&(o[3]=parseInt(n+n,16)/255)}else if(t=e.match(i)){for(e=0;3>e;e++)o[e]=parseInt(t[e+1],0);t[4]&&(o[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:zt.call(jt,t[1])?((o=jt[t[1]])[3]=1,o):null:null;for(e=0;3>e;e++)o[e]=Math.round(2.55*parseFloat(t[e+1]));t[4]&&(o[3]=t[5]?.01*parseFloat(t[4]):parseFloat(t[4]))}for(e=0;3>e;e++)o[e]=h(o[e],0,255);return o[3]=h(o[3],0,1),o},Xt.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[e=(parseFloat(t[1])%360+360)%360,h(parseFloat(t[2]),0,100),t=h(parseFloat(t[3]),0,100),n=h(isNaN(n)?1:n,0,1)]}return null},Xt.to.rgb=function(){var e=Gt(arguments);return 4>e.length||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},Xt.to.hsl=function(){var e=Gt(arguments);return 4>e.length||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};let Yt={};for(let e of Object.keys(Yt));let qt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"}};for(let e of Object.keys(qt)){if(!("channels"in qt[e]))throw Error("missing channels property: "+e);if(!("labels"in qt[e]))throw Error("missing channel labels property: "+e);if(qt[e].labels.length!==qt[e].channels)throw Error("channel and label counts mismatch: "+e);let{channels:t,labels:n}=qt[e];delete qt[e].channels,delete qt[e].labels,Object.defineProperty(qt[e],"channels",{value:t}),Object.defineProperty(qt[e],"labels",{value:n})}qt.rgb.hsl=function(e){var t=e[0]/255;let n=e[1]/255,i=e[2]/255;e=Math.min(t,n,i);let o,r=Math.max(t,n,i),s=r-e;return r===e?o=0:t===r?o=(n-i)/s:n===r?o=2+(i-t)/s:i===r&&(o=4+(t-n)/s),o=Math.min(60*o,360),0>o&&(o+=360),t=(e+r)/2,[o,100*(r===e?0:.5>=t?s/(r+e):s/(2-r-e)),100*t]},qt.hsl.rgb=function(e){let t=e[0]/360;var n=e[1]/100;if(e=e[2]/100,0===n){var i=255*e;return[i,i,i]}e=2*e-(n=.5>e?e*(1+n):e+n-e*n);let o=[0,0,0];for(let r=0;3>r;r++)0>(i=t+1/3*-(r-1))&&i++,1<i&&i--,i=1>6*i?e+6*(n-e)*i:1>2*i?n:2>3*i?e+(n-e)*(2/3-i)*6:e,o[r]=255*i;return o};let Qt={};Object.keys(qt).forEach((e=>{Qt[e]={},Object.defineProperty(Qt[e],"channels",{value:qt[e].channels}),Object.defineProperty(Qt[e],"labels",{value:qt[e].labels});let t=function(e){let t={};var n=Object.keys(qt);for(let e=n.length,i=0;i<e;i++)t[n[i]]={distance:-1,parent:null};for(n=[e],t[e].distance=0;n.length;){e=n.pop();var i=Object.keys(qt[e]);for(let s=i.length,a=0;a<s;a++){var o=i[a],r=t[o];-1===r.distance&&(r.distance=t[e].distance+1,r.parent=e,n.unshift(o))}}n={};for(let a=(e=Object.keys(t)).length,l=0;l<a;l++){var s=e[l];if(null===t[s].parent)continue;i=s,r=[(o=t)[s].parent,s];let a=qt[o[s].parent][s];for(s=o[s].parent;o[s].parent;)r.unshift(o[s].parent),a=u(qt[o[s].parent][s],a),s=o[s].parent;a.conversion=r,n[i]=a}return n}(e);Object.keys(t).forEach((n=>{let i=t[n];Qt[e][n]=function(e){let t=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];if(null==(t=n[0]))return t;if(1<t.length&&(n=t),"object"==typeof(n=e(n)))for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(i),Qt[e][n].raw=function(e){let t=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return null==(t=n[0])?t:(1<t.length&&(n=t),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}(i)}))}));let Zt=["keyword","gray","hex"],Jt={};for(let e of Object.keys(Qt))Jt[[...Qt[e].labels].sort().join("")]=e;let $t={};m.prototype={toString(){return this.string()},string(e){let t=this.model in Xt.to?this:this.rgb();return t=t.round("number"==typeof e?e:1),e=1===t.valpha?t.color:[...t.color,this.valpha],Xt.to[t.model](e)},round(e){return e=Math.max(e||0,0),new m([...this.color.map(p(e)),this.valpha],this.model)},alpha(e){return void 0!==e?new m([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},lighten(e){let t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){let t=this.hsl();return t.color[2]-=t.color[2]*e,t}};for(let e of Object.keys(Qt)){if(Zt.includes(e))continue;let{channels:t}=Qt[e];m.prototype[e]=function(){if(this.model===e)return new m(this);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 0<n.length?new m(n,e):(t=Qt[this.model][e].raw(this.color),t=Array.isArray(t)?t:[t],new m([...t,this.valpha],e))},m[e]=function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return"number"==typeof(n=i[0])&&(n=g(i,t)),new m(n,e)}}class en{constructor(){this.whiteColor="rgb(255, 255, 255)",this.blackColor="rgb(0, 0, 0)"}changeAlpha(e,t){return m(e).alpha(t).string()}getAlpha(e){return m(e).alpha()}lighten(e,t){try{return m(e).lighten(t).rgb().string()}catch(t){return e}}darken(e,t){try{return m(e).darken(t).rgb().string()}catch(t){return e}}getContrastRatio(e,t){try{return(new Ut).ratio(e,t)}catch(e){return 0}}}class tn{static get size(){return{width:this.width,height:this.height}}static get width(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}static get height(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}static get scrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}}class nn{constructor(e,t){this.setStylesToElement=this.colorUtils=null,this.colorUtils=e,this.setStylesToElement=t}getMenuOverlayContentClassName(){return Fe.SYSTEM_CLASS_PREFIX+"overlay-menu-content"}createBackdrop(e){let t=document.createElement("div");return t.style.position="fixed",t.style.zIndex=String(Number.MAX_SAFE_INTEGER-1),t.style.top="0",t.style.left="0",t.style.width=e?"0px":"100%",t.style.height=e?"0px":"100%",t}createMenuOverlay(e){var t=this;let{triggerElement:n,overlayStyles:i,createOverlayContent:o,overlayWidth:r,overlayHeight:s,offset:a,onDestroy:l,positionByDefault:c,isHorizontallyCentered:d,isBackdropDisabledOnUI:h}=e,u=this.createBackdrop(h),m=document.createElement("div");m.style.position="fixed",m.style.display="block",m.style.zIndex=String(Number.MAX_SAFE_INTEGER),r&&(m.style.width="".concat(r,"px")),s&&(m.style.height="".concat(s,"px")),e=m.attachShadow({mode:"open"});let p=document.createElement("style");p.innerHTML=i,e.append(p);let g=document.createElement("div");g.classList.add(this.getMenuOverlayContentClassName()),document.body.append(u),document.body.append(m),e.append(g),o(u,g),function(){const e=t.getOverlayMenuPlacementData(n,g,null!=a?a:5,c,d);t._setPositionAttr(g,e.position),t.setStylesToElement(m,e.coordinates)}(),m.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault()}));let E=e=>{u.remove(),m.remove(),l&&l(),window.removeEventListener("keyup",e,!0)},v=e=>{"Escape"===e.key&&(e.preventDefault(),e.stopImmediatePropagation(),E(v))};return u.addEventListener("click",(()=>E(v))),window.addEventListener("keyup",v,!0),{backdrop:u,overlay:m}}getOverlayMenuPlacementData(e,t,n,i,o){return n=this._calcOverlayMenuPosition(e,t,n,i),this._updateOverlayContentMargins(n,t),{coordinates:this._getOverlayMenuPosition(n,e.getBoundingClientRect(),t.getBoundingClientRect(),o),position:n.position}}_calcOverlayMenuPosition(e,t,n,i){let o=this._getOverlayMenuHorizontalOffset(e,t,n);return e=this._getOverlayMenuVerticalOffset(e,t,n),t="undefined",(n={bottom:e.availableSpaceBelowTriggerElem>=e.contentHeight,top:e.availableSpaceAboveTriggerElem>=e.contentHeight,right:o.availableSpaceToTheRightSideOfTheTrigger>=o.contentWidth,left:o.availableSpaceToTheLeftSideOfTheTrigger>=o.contentWidth}).top?t="top":n.bottom?t="bottom":n.right?t="right":n.left&&(t="left"),n[i]&&(t=i),"undefined"===t&&((i=Math.max(e.availableSpaceBelowTriggerElem,e.availableSpaceAboveTriggerElem,o.availableSpaceToTheRightSideOfTheTrigger,o.availableSpaceToTheLeftSideOfTheTrigger))===e.availableSpaceBelowTriggerElem?t="bottom":i===e.availableSpaceAboveTriggerElem?t="top":i===o.availableSpaceToTheRightSideOfTheTrigger?t="right":i===o.availableSpaceToTheLeftSideOfTheTrigger&&(t="left")),Object.assign(Object.assign(Object.assign({},e),o),{position:t})}_getOverlayMenuHorizontalOffset(e,t,n){var i=tn.width;return({right:e}=e.getBoundingClientRect()),i=i-n-e-tn.scrollbarWidth,{horizontalOffset:n,contentWidth:t=this._getOverlayMenuDimensions(t).width,availableSpaceToTheLeftSideOfTheTrigger:e-n,availableSpaceToTheRightSideOfTheTrigger:i}}_getOverlayMenuDimensions(e){let{width:t,height:n}=e.getBoundingClientRect(),{marginBottom:i,marginTop:o,marginLeft:r,marginRight:s}=window.getComputedStyle(e);return{width:t+parseInt(r,10)+parseInt(s,10),height:n+parseInt(o,10)+parseInt(i,10)}}_getOverlayMenuVerticalOffset(e,t,n){let i=tn.height,{top:o,bottom:r}=e.getBoundingClientRect();return{verticalOffset:n,contentHeight:e=this._getOverlayMenuDimensions(t).height,availableSpaceAboveTriggerElem:o-n,availableSpaceBelowTriggerElem:i-r-n}}_getOverlayMenuPosition(e,t,n,i){switch(e.position){case"top":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,n,i),"px"),top:"".concat(e.availableSpaceAboveTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"bottom":return{left:"".concat(this._getLeftPositionTBForOverlayMenu(t,n,i),"px"),bottom:"".concat(e.availableSpaceBelowTriggerElem-e.contentHeight-e.verticalOffset,"px")};case"left":return{left:"".concat(e.availableSpaceToTheLeftSideOfTheTrigger-t.width-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")};case"right":return{right:"".concat(e.availableSpaceToTheRightSideOfTheTrigger-e.contentWidth-e.horizontalOffset,"px"),top:"".concat(this._getTopPositionLRForOverlayMenu(t,e),"px")}}}_getLeftPositionTBForOverlayMenu(e,t,n){return 0>(e=n?e.x+e.width/2-t.width/2:e.x)&&(e=0),e+t.width>tn.width&&(e-=e+t.width-tn.width),e}_getTopPositionLRForOverlayMenu(e,t){return e=t.availableSpaceAboveTriggerElem,t.contentHeight>t.availableSpaceBelowTriggerElem&&(e-=t.contentHeight-t.availableSpaceBelowTriggerElem),e}_setPositionAttr(e,t){e.setAttribute("cl-overlay-position",t)}getOverlayBackgroundColor(e,t){return e.startsWith("transparent")||e.startsWith("none")||!e.startsWith("rgb")||1!==this.colorUtils.getAlpha(e.slice(0,e.match(/\)/).index+1))?(e=this.colorUtils.getContrastRatio(t,this.colorUtils.whiteColor))>(t=this.colorUtils.getContrastRatio(t,this.colorUtils.blackColor))?this.colorUtils.whiteColor:this.colorUtils.blackColor:e}getOverlayBorderRadius(e,t){return Math.min(Math.floor(parseInt(e)/2),parseInt(t["border-top-left-radius"]),parseInt(t["border-top-right-radius"]),parseInt(t["border-bottom-left-radius"]),parseInt(t["border-bottom-right-radius"]))}getMenuItemHoverColor(e){var t=this.colorUtils.getContrastRatio(e,this.colorUtils.whiteColor);let n,i=this.colorUtils.getContrastRatio(e,this.colorUtils.blackColor);if(t>i)for(n=this.colorUtils.whiteColor;5<t;)n=this.colorUtils.darken(n,.1),t=this.colorUtils.getContrastRatio(e,n);else for(n="rgb(10, 10, 10)",t=i;5<t;)n=this.colorUtils.lighten(n,.1),t=this.colorUtils.getContrastRatio(e,n);return this.colorUtils.changeAlpha(n,.2)}_updateOverlayContentMargins(e,t){let{marginBottom:n,marginTop:i}=window.getComputedStyle(t);"top"===e.position?(this.setStylesToElement(t,{"margin-top":"".concat(parseInt(i,10)+parseInt(n,10),"px")}),this.setStylesToElement(t,{"margin-bottom":"0px"})):"bottom"===e.position?(this.setStylesToElement(t,{"margin-bottom":"".concat(parseInt(n,10)+parseInt(i,10),"px")}),this.setStylesToElement(t,{"margin-top":"0px"})):(e="".concat((parseInt(n,10)+parseInt(i,10))/2,"px"),this.setStylesToElement(t,{"margin-top":e,"margin-bottom":e}))}}let on="\n  .cl-tooltip-text {\n    z-index: ".concat(Number.MAX_SAFE_INTEGER,";\n    width: max-content;\n    height: fit-content;\n    visibility: hidden;\n    background-color: white;\n    color: #000;\n    border: 1px solid rgb(194, 194, 194);\n    border-radius: 5px;\n    padding: 5px 10px;\n    position: fixed;\n    max-width: 300px;\n    max-height: 100vh;\n    box-shadow: 0 1px 5px rgba(0,0,0,.28);\n    font-size: 14px;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='top']:before {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 13px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: rgb(194, 194, 194) transparent transparent transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='top']:after {\n    content: \"\";\n    position: absolute;\n    top: 100%;\n    left: calc(50% - 5px);\n    margin-left: -8px;\n    margin-top: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: white transparent transparent transparent;\n  }\n\n  .cl-tooltip-text[cl-tooltip-position='bottom']:before {\n    content: \"\";\n    position: absolute;\n    top: -24px;\n    left: calc(50% - 9px);\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent rgb(194, 194, 194) transparent;\n  }\n  \n  .cl-tooltip-text[cl-tooltip-position='bottom']:after {\n    content: \"\";\n    position: absolute;\n    top: -22px;\n    left: calc(50% - 4px);\n    margin-left: -5px;\n    margin-bottom: -2px;\n    border-width: ").concat("12px",";\n    border-style: solid;\n    border-color: transparent transparent white transparent;\n  }\n");class rn{constructor(){this.tooltipTextElement=null,this.tooltipStylesId="cl-tooltip-text-styles"}createTooltipText(e){return this.tooltipTextElement=document.getElementById("cl-overlay-tooltip-text")||document.createElement("div"),this.tooltipTextElement.classList.add("cl-tooltip-text"),this.tooltipTextElement.innerHTML!==e&&(this.tooltipTextElement.innerHTML=e,this.tooltipTextElement.style=null),this.tooltipTextElement.id||(this.tooltipTextElement.id="cl-overlay-tooltip-text",document.body.append(this.tooltipTextElement)),this.tooltipTextElement}destroyTooltipText(){this.tooltipTextElement&&(this.tooltipTextElement.remove(),this.tooltipTextElement=null)}addTooltipStyles(){if(!document.head.querySelector("#".concat(this.tooltipStylesId))){var e=document.createElement("style");e.setAttribute("id",this.tooltipStylesId),e.innerHTML=on,document.head.appendChild(e)}}removeTooltipStyles(){let e=document.head.querySelector("#".concat(this.tooltipStylesId));e&&e.remove()}}class sn{constructor(){this.color=new en,this.overlay=new nn(this.color,this.setStylesToElement.bind(this)),this.tooltipTextUtils=new rn,this.tooltipElLastMouseLeaveHandler=this.tooltipElLastMouseEnterHandler=null}setStylesToElement(e,t){Object.keys(t).forEach((n=>{e.style[n]=t[n]}))}getStylesFromElement(e,t){let n=window.getComputedStyle(e);return t.reduce(((e,t)=>(e[t]=n.getPropertyValue(t),e)),{})}setTooltipPosition(e){let{triggerElement:t,tooltipElement:n,offset:i=10}=e;e=this.overlay.getOverlayMenuPlacementData(t,n,i,"top",!0),n.setAttribute("cl-tooltip-position",e.position),this.setStylesToElement(n,e.coordinates)}applyLabelParams(e,t,n,i){i=n.querySelector(i),t=e.adaptiveStyles[t].find((e=>"label"===e.element)).params,(n=n.querySelector(".label")).innerHTML=e.content.label,"TOP"===t.position?(i.style.flexDirection="column",i.style.alignItems="unset",this.setStylesToElement(n,{marginRight:0,marginBottom:"".concat(t.margin,"px")})):(i.style.flexDirection="row",i.style.alignItems="center",this.setStylesToElement(n,{marginRight:"".concat(t.margin,"px"),marginBottom:0})),n.style.display=t.enabled?"":"none"}getPlaceholderColor(e,t,n){return(e=e.adaptiveStyles[t].find((e=>"input"===e.element))).placeholderStyleAttributes&&e.placeholderStyleAttributes.color?e.placeholderStyleAttributes.color:(e=(e.classes||"").split(" ").filter((e=>e.startsWith(Fe.SYSTEM_CLASS_PREFIX)))).length&&(n=n.textClasses[e[0]])&&n.placeholderStyleAttributes&&n.placeholderStyleAttributes.color?n.placeholderStyleAttributes.color:"rgb(0, 0, 0)"}getClosestParentOutsideShadowRoot(e,t,n){var i;if(t){var o=t.closest(e);return t!==o||n||(o=null),o||this.getClosestParentOutsideShadowRoot(e,null===(i=null==t?void 0:t.getRootNode())||void 0===i?void 0:i.host,!0)}}setInputHostSize(e,t,n,i,o){let r=e.adaptiveStyles[t].find((e=>"input"===e.element)).styleAttributes;e=e.adaptiveStyles[t].find((e=>"label"===e.element)).params,o=o&&e.enabled&&"TOP"===e.position?o.getBoundingClientRect().height+e.margin:0,r.width&&(r.width.includes("100%")?(i.style.width="100%",n.style.width=r.width):n.style.width="auto"),r.height&&(r.height.includes("100%")?(i.style.height="100%",n.style.height=r.height):n.style.height="".concat(parseFloat(r.height)+o,"px"))}setFocusOutline(e,t){let n;t=t||e;let i=["transparent","initial"];if(e)return e.style.borderColor&&!i.includes(e.style.borderColor)&&(parseFloat(e.style.borderWidth)||parseFloat(e.style.borderBottomWidth))&&(n=this._setElementOutlineData(t,e,"borderColor")),!n&&e.style.getPropertyValue("--borderBottomColor")&&!i.includes(e.style.getPropertyValue("--borderBottomColor"))&&parseFloat(e.style.getPropertyValue("--borderBottomWidth"))&&(n=this._setElementOutlineData(t,e,"--borderBottomColor")),n||!e.style.backgroundColor||i.includes(e.style.backgroundColor)||(n=this._setElementOutlineData(t,e,"backgroundColor")),n||!e.style.color||i.includes(e.style.color)||(n=this._setElementOutlineData(t,e,"color")),n||(t.classList.remove("focus-outline-defined"),null)}handleControlStatusChange(e){e.control.on(vt.validationStatusChanged,(t=>{this._handleValidationStatus(e,t)})),e.control.on(vt.touchedStatusChanged,(()=>{this._handleValidationStatus(e,e.control.pending?"pending":e.control.valid?"valid":"invalid")}))}_handleValidationStatus(e,t){let{control:n,inputElement:i,tooltipElement:o,configService:r,i18n:s,validCallback:a,invalidCallback:l,errorMessageMapper:c,pendingCallback:d}=e;switch(t){case"valid":this.setValidStyles(i,o),a&&a();break;case"invalid":n.touched&&(e=n.getErrorKeys())&&(e=e[0],t=this.getTranslation(r,s,e),c&&(t=c(e,t)),this.setInvalidStyle(i,o,t),l&&l());break;case"pending":n.touched&&(this.setPendingStyle(i,o),d&&d())}}getTranslation(e,t,n){var i=e.getConfig("browserLanguage");return t=t[e=e.getConfig("appearanceLanguage")]||t[i]||t.en,(i=Object.keys(t).find((e=>e.includes(n))))?t[i]:n}setValidStyles(e,t){e.classList.contains("invalid")&&e.classList.remove("invalid"),t.style.visibility="hidden"}setInvalidStyle(e,t,n){let i;e.classList.contains("invalid")||e.classList.add("invalid"),t.style.visibility="visible",e=()=>{this.tooltipTextUtils.addTooltipStyles(),i=this.tooltipTextUtils.createTooltipText(n),i.style.visibility="visible",this.setTooltipPosition({tooltipElement:t,tooltipTextElement:i})};let o=()=>{i&&(i.style.visibility="hidden",this.tooltipTextUtils.destroyTooltipText(),this.tooltipTextUtils.removeTooltipStyles())};this.tooltipElLastMouseEnterHandler&&t.removeEventListener("mouseenter",this.tooltipElLastMouseEnterHandler),this.tooltipElLastMouseLeaveHandler&&t.removeEventListener("mouseleave",this.tooltipElLastMouseLeaveHandler),t.addEventListener("mouseenter",e),t.addEventListener("mouseleave",o),this.tooltipElLastMouseEnterHandler=e,this.tooltipElLastMouseLeaveHandler=o}setPendingStyle(e,t){t.style.visibility="hidden",e.classList.contains("invalid")&&e.classList.remove("invalid")}_setElementOutlineData(e,t,n){return(t=this._parseColorValue(t,n))?(t=this.color.changeAlpha(t,.5),e.classList.add("focus-outline-defined"),e.style.setProperty("--clFocusOutline","3px solid ".concat(t)),t):null}_parseColorValue(e,t){if((e=getComputedStyle(e)[t]||e.style.getPropertyValue(t))&&e.includes("rgb")&&(!(2<e.split("rgb").length)||e.includes("#")))return e}}var an={name:"SysContainerComponent",componentType:"CONTAINER",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType === 'BUILT_IN' : true"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"min-content",height:"auto",minHeight:null,flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",background:"rgba(0, 0, 0, 0.06)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none"},classes:""}]}},metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Container",ru:"",uk:"",es:"Envase",fr:"Rcipient",de:"Container",it:"Contenitore",pt:"Embalagem",ro:"Container",bg:"",cs:"Kontejner",el:"",nl:"Container",pl:"Kontener",sv:"Behllare",tr:"Konteyner",ar:"",zh:"",da:"Beholder"}},waitForResourcesLoad:!0,resourcesPropPaths:[["adaptiveStyles",":ENV","styleAttributes","background"]]},ln=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise((function(i,o){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,o,(n=e[t](n)).done,n.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)};class cn{static sortActions(e){let t={CLOSE_WIDGET:-1,OPEN_LINK:-2,SHOW_WIDGET:1,SUBSCRIBE_CONTACT:2,REQUEST:3};return[...e].sort(((e,n)=>(void 0!==t[e.type]?t[e.type]:0)>(void 0!==t[n.type]?t[n.type]:0)?-1:(void 0!==t[e.type]?t[e.type]:0)<(void 0!==t[n.type]?t[n.type]:0)?1:0))}constructor(e,t){this.config=e,this.actions=cn.sortActions(t),this.targetElement=this.listener=null,this.eventsQueue=[],this.state=null,this.postponed=!1}activate(e,t,n){this.state=e;let o=(e=n()).getAttribute(i("id"));this.listener=e=>{let t=e.composedPath().filter((e=>e instanceof HTMLElement&&e.getAttribute(i("type")))),n=0;for(;t[n]&&t[n].getAttribute(i("id"))!==o;){let e=t[n].getAttribute(i("type"));if(cn.IGNORING_VIEW_ENTRY_TYPES.includes(e))return;n++}this.eventsQueue.push({event:e}),this.postponed||this.execute()},this.targetElement=this.config.relativeSelector?(e.shadowRoot||e).querySelector(this.config.relativeSelector):e,this.targetElement.addEventListener("click",this.listener)}async execute(){var e,t;try{for(var n,i=!0,o=ln(this.eventsQueue);!(e=(n=await o.next()).done);){var r=n.value;i=!1;try{let{event:e}=r;for(let t of this.actions)if(!await t.execute(this.state.getState(),e))break}finally{i=!0}}}catch(e){var s={error:e}}finally{try{i||e||!(t=o.return)||await t.call(o)}finally{if(s)throw s.error}}this.eventsQueue=[]}postpone(){this.postponed=!0}release(){this.postponed=!1,this.execute()}destroy(){this.listener&&this.targetElement&&(this.targetElement.removeEventListener("click",this.listener),this.targetElement=void 0)}}cn.IGNORING_VIEW_ENTRY_TYPES=[Tt.BUTTON,Tt.CONSENT,Tt.INPUT];class dn{constructor(e,t){this.config=e,this.actions=t,this.componentEmitterListener=null}activate(e,t,n){this.componentEmitterListener=t.on(this.config.eventName,(()=>{this.actions.forEach((t=>t.execute(e.getState(),this.config.params)))}))}destroy(){this.componentEmitterListener&&this.componentEmitterListener.off()}}class hn{constructor(e,t){this.actionFactory=e,this.actionRegister=t}get(e){let t=e.actions.map((e=>this.actionFactory.get(e)));switch(t.forEach((e=>this.actionRegister.register(e))),e.type){case"CLICK":return new cn(e,t);case"COMPONENT_EVENT":return new dn(e,t);default:throw Error("Not supported handler type ".concat(e.type))}}}class un{static set(e,t){e[un.accumulatorPropertyName]=Object.assign(Object.assign({},e[un.accumulatorPropertyName]||{}),t.styleAttributes),Object.keys(e[un.accumulatorPropertyName]).forEach((n=>{n.includes("--")?e.style.setProperty(n,t.styleAttributes[n]||""):e.style[n]=t.styleAttributes[n]?t.styleAttributes[n]:""}))}}un.accumulatorPropertyName="clStyleAttributes";class mn{static log(e){window.scriptLog09u8y9&&scriptLog09u8y9("ERROR","RUNTIME_ERROR",Error(e))}}class pn{constructor(e,t,n,i,o,r){this.hostElement=t,this.documentModel=e,this.getSharedCb=n,this.getPropsCb=i,this.getEnvCb=o,this.httpClient=r,this.subscription=null,this.envUrlMaps={desktop:new Map,mobile:new Map}}apply(e){return this.getPropsCb().backgroundDynamicInlineSVGElements[e].forEach((t=>{let n=this.getPropsCb().adaptiveStyles[e].find((e=>e.element===t)),[i,o]=String(n.styleAttributes.background).split("(")[1].split(")");i=i.split('"').join(""),this.envUrlMaps[e].set(t,{originalSVGResourceURL:i,inlineSvgString:null,positionOptions:o.replace(";","")})})),Promise.all([...this.envUrlMaps[e].entries()].map((t=>{let[n,i]=t;return this.httpClient.execute(i.originalSVGResourceURL).then((e=>e.text())).then((t=>{this.envUrlMaps[e].set(n,Object.assign(Object.assign({},i),{inlineSvgString:t}))}))}))).then((()=>{this._applyHostElementBackground(this.envUrlMaps[e].get("host"),this.getSharedCb().cssVars)})).catch((e=>{mn.log("Failed to load/apply backgroundDynamicInlineSVGElements[".concat(this.getPropsCb().backgroundDynamicInlineSVGElements,"] ").concat(e))}))}on(){return this.subscription=this.documentModel.on("COLOR_SCHEMA_UPDATE",(e=>{this._applyHostElementBackground(this.envUrlMaps[this.getEnvCb()].get("host"),e)})),this}_applyHostElementBackground(e,t){e&&(this.hostElement.style.background=this._buildBackgroundUrl(e,t))}_buildBackgroundUrl(e,t){return t=e.inlineSvgString.trim().replace("var(--cl-schema-accent)",t["cl-schema-accent"]),t=encodeURIComponent(t),"url('data:image/svg+xml,".concat(t,"')").concat(e.positionOptions)}off(){var e;null===(e=this.subscription)||void 0===e||e.off()}}var gn=new class{execute(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;var i=4<arguments.length?arguments[4]:void 0;return i={method:t,headers:Object.assign({"Content-Type":"text/plain"},(3<arguments.length?arguments[3]:void 0)||{}),credentials:"same-origin",body:null,signal:i},n&&(i.body="string"==typeof n?n:JSON.stringify(n)),fetch(e,i)}};class En{constructor(e){this._count=0,this.onUpdateCb=e}increment(){this._count++,this.onUpdateCb(this.count())}decrement(){0<this._count&&this._count--,this.onUpdateCb(this.count())}count(){return this._count}}class vn{constructor(e,t){this.getPending=()=>this.counters.pending,this.onCounterStateUpdate=e=>{0===e&&this.systemEventEmitter.emit("COMPONENT_RESOURCES_LOADED",this.componentId)},this.onResourceLoadFailure=e=>{this.systemEventEmitter.emit("FAILED_TO_LOAD_COMPONENT_RESOURCE","Failed to load: ".concat(e))},this.componentId=e,this.systemEventEmitter=t,this.counters={pending:new En(this.onCounterStateUpdate)}}}let fn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:[]})),{});return{get:e=>i[e],clear:()=>fn(...t)}},yn={DESKTOP:"desktop",MOBILE:"mobile"};yn.MOBILE;class _n extends HTMLElement{constructor(){super(),this.construct=()=>{var e=this.getAttribute(i("id")),t=this.getWidgetContainerNode();if(!t)throw Error("Widget container not found in construct");let n;(t=t.closest("[".concat(i("widget-id"),"]")))&&(n=t.getAttribute(i("widget-id"))),e=new CustomEvent("cl-props-request",{detail:{nodeName:this.nodeName,path:this.getAttribute(i("path")),id:e,widgetId:n},bubbles:!0,composed:!0}),window.dispatchEvent(e),Object.assign(this,e.detail.props),this.observers=fn("props","shared","environment"),this.subscriptions=new class{constructor(){this.subscriptions=[]}push(e){this.subscriptions.push(e)}off(){this.subscriptions.forEach((e=>null==e?void 0:e.off()))}},this.state=new mt,this.componentEventEmitter=new Et,this.componentResourceManager=new vn(this.model.id,this.services.eventEmitter),this.mergeTagsProcessor=this.services.mergeTagsProcessorFactory.create(),this._actionFactory=this.services.actionFactory,this._handlerFactory=new hn(this._actionFactory,this.services.actionRegister),this.prevProps=this.model.props,this.prevEnvironment=this.getEnvironment(),this.documentModel.on("".concat("COMPONENT_PROPS_UPDATE","_").concat(this.model.id),(e=>{this.model.props=e,this.observers.get("props").forEach((t=>t(this.prevProps,e))),this.prevProps=e})),this.documentModel.on("SHARED_UPDATE_ALL",(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles),this.observers.get("shared").forEach((e=>e(this.getShared())))})),this.model.props.backgroundDynamicInlineSVGElements&&(this.colorSchemaListener=new pn(this.documentModel,this.getHostElement(),(()=>this.getShared()),(()=>this.model.props),(()=>this.getEnvironment()),gn),this.colorSchemaListener.apply(this.getEnvironment()).then((()=>{this.subscriptions.push(this.colorSchemaListener.on())}))),this.prevProps.adaptiveStyles&&this.subscriptions.push(this.resizeListener.on(Nt.changeEventName,(()=>{this.applyAutoAdaptiveStyles(this.prevProps.adaptiveStyles);let e=this.getEnvironment();this.observers.get("environment").forEach((t=>t(this.prevEnvironment,e))),this.prevEnvironment=e})))},this.attachHandlers=()=>{this.model.props.handlers&&this.model.props.handlers.length&&(this.handlers=this.model.props.handlers.map((e=>this._handlerFactory.get(e))),this.handlers.map((e=>()=>e.activate(this.state,this.componentEventEmitter,this.getHostElement.bind(this)))).forEach((e=>e())))},this.postponeHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.postpone()))},this.releaseHandlers=()=>{var e;null===(e=this.handlers)||void 0===e||e.forEach((e=>e.release()))},this.getProps=()=>this.model.props,this.getShared=()=>this.documentModel.getShared(),this.getEnvironment=()=>this.resizeListener.isMobile()?"mobile":"desktop",this.getRootElement=()=>this.shadowRoot?this.shadowRoot:this,this.getHostElement=()=>this,this.observeProps=e=>{this.observers.get("props").push(e),e(null,this.prevProps)},this.observeShared=e=>{this.observers.get("shared").push(e),e(this.getShared())},this.observeEnvironment=e=>{this.observers.get("environment").push(e),e(null,this.getEnvironment())},this.getElements=()=>[this.getHostElement(),...Array.from(this.getRootElement().querySelectorAll("[".concat(i("element"),"]"))).filter((e=>!e.hasAttribute(i("component"))))],this.getElement=(e,t)=>this.getElements().find((n=>t?n.getAttribute(i("element"))===e&&n.id===t:n.getAttribute(i("element"))===e)),this.applyAutoAdaptiveStyles=e=>{if(e){var t=this.getElements();if(t.length){var n=i("type"),o=this.getRootElement().querySelector("style[".concat(n,'="').concat("element-styles",'"]'));o||((o=document.createElement("style")).setAttribute(n,"element-styles"),this.getRootElement().appendChild(o)),o.innerHTML="",t.forEach((t=>{var n=t.getAttribute(i("element")),r=this.getEnvironment();(r=v(e,r,n))&&(this.resizeListener.isMobile()&&(n=v(e,"desktop",n))&&(r=Object.assign(Object.assign({},r),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),r.styleAttributes)})),this.applyStylesToElement(t,this.applySharedClassesToElementModel(r),o),"1"===localStorage.getItem("cl_margins")&&this._fixMarginOverflow(t))})),this._addLinkColor(o,this.getShared())}}},this.registerComponentResourceManagement=()=>{this.viewResourceManager.registerComponent(this.model.id,this.componentResourceManager)},this.applyStylesToElement=(e,t,n)=>{var o,r,s=[];if("host"===t.element&&(Lt.applyHostStyles(this.model.type,e,null,this.layoutType),"desktop"===this.getEnvironment()&&null!==(o=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==o&&o.desktop||"mobile"===this.getEnvironment()&&null!==(r=this.model.props.backgroundDynamicInlineSVGElements)&&void 0!==r&&r.mobile)&&(this.colorSchemaListener.apply(this.getEnvironment()),s.push("background")),r=(o=t.styleAttributes.background)&&o.match(/url\("([^"]*)"\)/),this.manifest.waitForResourcesLoad&&r){this.componentResourceManager.getPending().increment();let e=new Image;e.src=r[1],be(e,"load",(()=>{this.componentResourceManager.getPending().decrement()})),be(e,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(e.src),"UPDATING"===this.services.config.getConfig("entryModuleType")&&this.componentResourceManager.getPending().decrement()}))}s=Object.assign(Object.assign({},t),{styleAttributes:E(t.styleAttributes,s)}),un.set(e,s),this._setClassAttributes(e,t),n&&(t.hoverStyleAttributes&&(s=t.hoverStyleAttributes,"FILL_UP"===t.hoverAnimationType&&(e.style.boxShadow="inset 0px 0px 0px 0px rgb(0, 0, 0, 0)",s=Object.assign(Object.assign({},t.hoverStyleAttributes),{background:o,boxShadow:"inset 0px -".concat(e.getBoundingClientRect().height,"px 0px 0px ").concat(s.background),transition:"0.3s"})),this._addStylesToStyleElement(n,t.element,s,":not(.".concat(i("no-hover"),"):hover"),!0)),t.placeholderStyleAttributes&&this._addStylesToStyleElement(n,t.element,t.placeholderStyleAttributes,"::placeholder"),this._addFontStylesToStyleElement(n,this.getShared()),this.stylesAppliedToElement(e,t,n))},this._fixMarginOverflow=e=>{var t=this.getParentComponent();t=t&&("flex"===t.style.display||"inline-flex"===t.style.display);var n="host"===e.getAttribute(i("element"));if(t&&n&&(t=this.getProps(),n=this.getEnvironment(),({styleAttributes:t}=v(t.adaptiveStyles,n,"host")||{}),t&&(n="100%"===t.width,(t.marginLeft||t.marginRight)&&n))){let i=(n=parseFloat(t.marginLeft)||0)+(t=parseFloat(t.marginRight)||0);i&&setTimeout((()=>{e.style.width="calc(100% - ".concat(i,"px)")}))}},this.applySharedClassesToElementModel=e=>function(e,t){let n=e;return(n.classes||"").split(" ").filter((e=>e.startsWith(Fe.SYSTEM_CLASS_PREFIX))).forEach((e=>{var i;(e=null===(i=t.textClasses)||void 0===i?void 0:i[e])&&(e.styleAttributes.fontFamily||(e.isHeader&&t.headerFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.headerFontFamily})})),!e.isHeader&&t.textFontFamily&&(e=Object.assign(Object.assign({},e),{styleAttributes:Object.assign(Object.assign({},e.styleAttributes),{fontFamily:t.textFontFamily})}))),n=Object.assign(Object.assign({},n),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),e.styleAttributes),placeholderStyleAttributes:Object.assign(Object.assign({},n.placeholderStyleAttributes),e.placeholderStyleAttributes)}))})),n.styleAttributes.fontFamily||(n=Object.assign(Object.assign({},n),{styleAttributes:Object.assign(Object.assign({},n.styleAttributes),{fontFamily:t.textFontFamily})})),n}(e,this.documentModel.getShared()),this.getModel=()=>this.model,this._addStylesToStyleElement=function(e,t,n){let o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r=4<arguments.length?arguments[4]:void 0,s=Object.keys(n).reduce(((e,t)=>e+" ".concat(Mt.camelCaseToDashCase(t),": ").concat(n[t]).concat(r?" !important;":";")),"");e.innerHTML+="[".concat(i("element"),'="').concat(t,'"]').concat(o," { ").concat(s," }")},this._addFontStylesToStyleElement=(e,t)=>{e.innerHTML+="[cl-type] {font-family:".concat(t.textFontFamily||"inherit","}")},this._addLinkColor=(e,t)=>{var n,i,o,r;t.linkColor&&(e.innerHTML+="a {color: ".concat(t.linkColor,"}, a:visited {color: ").concat(t.linkColor,"}")),null!==(n=t.linkParams)&&void 0!==n&&n.color&&(e.innerHTML+="a {color: ".concat(null===(i=t.linkParams)||void 0===i?void 0:i.color,"}, a:visited {color: ").concat(null===(o=t.linkParams)||void 0===o?void 0:o.color,"}")),null!==(r=t.linkParams)&&void 0!==r&&r.removeUnderline&&(e.innerHTML+="a {text-decoration: none}, a:visited {text-decoration: none}")},this._setClassAttributes=(e,t)=>{Array.from(e.classList).filter((e=>e!==Fe.SYSTEM_CLASS_PREFIX+"hovered"&&e!==Fe.SYSTEM_CLASS_PREFIX+"focused")).forEach((t=>{t.startsWith(Fe.SYSTEM_CLASS_PREFIX)&&e.classList.remove(t)})),t=(e.getAttribute("class")||"")+" "+t.classes,e.setAttribute("class",t)},this.getParentComponent=()=>_(this.parentNode,i("element"),"host"),this.getWidgetContainerNode=()=>{let e=null==this?void 0:this.getAttribute(i("path"));return e&&1===e.split(",").length?this.parentNode:_(this.parentNode,i("path"),void 0,(e=>e&&1===e.split(",").length))},this.getWidgetLanguages=()=>T(this.services.config),this.getTranslationsMap=e=>b(e,this.getWidgetLanguages()),this.stylesAppliedToElement=(e,t,n)=>{},this.attachShadow({mode:"open"})}connectedCallback(){this.construct(),this.registerComponentResourceManagement(),Promise.resolve().then((()=>{this.attachHandlers()}))}disconnectedCallback(){var e;this.observers.clear(),this.subscriptions.off(),this.state.destroy(),this.componentEventEmitter.destroy(),null===(e=this.mergeTagsProcessor)||void 0===e||e.destroy()}}class Tn extends _n{constructor(){super(...arguments),this.manifest={name:"SysContainerComponent"},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}get componentName(){return this.manifest.name}connectedCallback(){super.connectedCallback(),this.processStyles(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles)}))}disconnectedCallback(){super.disconnectedCallback()}}class bn extends Tn{constructor(){super(...arguments),this.manifest=an,this.updateResponsiveRules=e=>{if(this.getProps().isResponsive){var t=this.getWidgetContainerNode(),{width:n,height:i}=t.getBoundingClientRect();e.innerHTML='[cl-component="'.concat(this.componentName,1.6<i/n?'"] {flex-direction: column !important;}':'"] {flex-direction: row !important;}')}else e.innerHTML=""},this.getResponsiveStyleElement=()=>[...this.children].find((e=>"responsive-styles"===e.getAttribute("name"))),this.appendResponsiveStyles=()=>{this.innerHTML+='<style name="responsive-styles">\n      [cl-component="'.concat(this.componentName,'"] {}\n    </style>')}}connectedCallback(){super.connectedCallback(),this.appendResponsiveStyles(),this.observeProps(((e,t)=>{t.isResponsive&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.getProps().isResponsive&&this.connectResizeObserver()}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.resizeObserver)||void 0===e||e.disconnect()}connectResizeObserver(){this.resizeObserver=new ResizeObserver((e=>{for(let t of e)t.contentRect&&this.updateResponsiveRules(this.getResponsiveStyleElement())})),this.resizeObserver.observe(this.getWidgetContainerNode())}}bn.define={name:"sys-container",model:an.name,manifest:an};var Cn={name:"SysImageComponent",componentType:"IMAGE",version:"1.0.0",contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_DESKTOP"}},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"RADIO_BUTTONS",elementProp:"styleAttributes",elementSubProp:"objectFit",element:"image",params:{label:"DOCUMENT_IMAGE",options:[{label:"DOCUMENT_IMAGE_RESIZE_COVER",value:"cover"},{label:"DOCUMENT_IMAGE_RESIZE_CONTAIN",value:"contain"},{label:"DOCUMENT_IMAGE_RESIZE_NONE",value:"none"}]}},{type:"CONTROL",name:"IMAGE_SOURCES",element:"image",propPath:["control","imageSource"]},{type:"CONTROL",name:"FLOATING_COMPONENT_POSITION",element:"host",elementProp:"styleAttributes",displayCondition:"return sdk.component.floating;",params:{label:"DOCUMENT_POSITION"}},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE"},displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE'"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"image"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",displayCondition:"return !sdk.component.floating;",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],events:{dispatch:[],listen:[]},defaultProps:{control:{imageSource:{url:""}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"150px",minWidth:"150px",height:"auto",minHeight:null,paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",display:"block"},classes:""},{element:"image",styleAttributes:{background:"transparent",objectFit:"cover",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"},classes:""}]}},metaDescription:{sortWeight:66,icon:"/claspo-editor/image-component-icon.svg",label:{en:"Image",ru:"",uk:"",es:"Imagen",fr:"Menu droulant",de:"Bild",it:"Immagine",pt:"Imagem",ro:"Imagine",bg:"",cs:"Obrzek",el:"",nl:"Afbeelding",pl:"Obraz",sv:"Bild",tr:"Resim",ar:"",zh:"",da:"Billede"}},waitForResourcesLoad:!0,resourcesPropPaths:[["control","imageSource","url"]]};class In extends _n{constructor(){super(),this.manifest=Cn,this.deleteElementIfPresent=(e,t)=>{(e=e.querySelector(t))&&e.remove()},this.upsertSvg=(e,t)=>{let n=e.querySelector("svg");return n&&n.getAttribute("inline-svg-url")===t?Promise.resolve():(n&&this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),fetch(t).then((e=>e.text())).then((n=>{var i=document.createElement("template");let o=document.createElement("div");return o.style.overflow="hidden",o.style.width="100%",o.style.height="inherit",o.classList.add("svgOverflowContainer"),i.append(o),i.firstChild.innerHTML=n.trim(),(i=(n=i.firstChild).querySelector("svg")).setAttribute("cl-element","image"),i.setAttribute("inline-svg-url",t),this.componentResourceManager.getPending().decrement(),e.append(n),e})).catch((t=>{this.upsertImage(e,null)})))},this.upsertImage=(e,t)=>{let n=e.querySelector("img");if(n)return n.src=t,be(n,"load",(()=>{this.componentResourceManager.getPending().decrement()})),be(n,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(n.src)})),Promise.resolve();let i=new Image;return i.setAttribute("cl-element","image"),i.src=t,be(i,"load",(()=>{this.componentResourceManager.getPending().decrement()})),be(i,"error",(()=>{this.componentResourceManager.onResourceLoadFailure(i.src)})),e.append(i),Promise.resolve()},this.applyAdaptiveStyles=e=>{var t;this.applyAutoAdaptiveStyles(e.adaptiveStyles);var n=this.getEnvironment();e=(n=e.adaptiveStyles[n]).find((e=>"host"===e.element));let i=n.find((e=>"image"===e.element)),o={cover:"xMidYMid slice",contain:"xMidYMid meet",none:""},r=(n=this.getElement("image"))&&"svg"===n.nodeName,s=(null===(t=null==i?void 0:i.styleAttributes)||void 0===t?void 0:t.objectFit)&&o.hasOwnProperty(i.styleAttributes.objectFit);r&&s&&(n.setAttribute("preserveAspectRatio",o[i.styleAttributes.objectFit]),"none"===i.styleAttributes.objectFit?(n.setAttribute("width",n.viewBox.baseVal.width+"px"),n.setAttribute("height",n.viewBox.baseVal.height+"px")):(t=n.viewBox.baseVal.width/n.viewBox.baseVal.height,"auto"!==e.styleAttributes.width&&"auto"!==e.styleAttributes.height?(n.setAttribute("height","100%"),n.setAttribute("width","100%")):"auto"===e.styleAttributes.width&&"auto"===e.styleAttributes.height?(n.setAttribute("width",n.viewBox.baseVal.width+"px"),n.setAttribute("height",n.viewBox.baseVal.height+"px")):("auto"===e.styleAttributes.width&&(n.setAttribute("height","100%"),n.setAttribute("width","".concat(Math.round(parseInt(e.styleAttributes.height,10)*t),"px"))),"auto"===e.styleAttributes.height&&(n.setAttribute("width","100%"),n.setAttribute("height","".concat(Math.round(parseInt(e.styleAttributes.width,10)/t),"px"))))))},this.getRootElement().innerHTML="\n        ".concat("\n        <style>\n            img {\n              display: block;\n              width: 100%;\n              max-height: inherit;\n              height: inherit;\n              min-height: inherit;\n            }\n        </style>\n    ",'\n        <img cl-element="image" draggable="false" alt="">\n    ')}connectedCallback(){super.connectedCallback(),this.componentResourceManager.getPending().increment(),this.observeProps(((e,t)=>{var n;this.applyAutoAdaptiveStyles(t.adaptiveStyles);var i=this.getElement("image");null!==(n=t.control)&&void 0!==n&&n.imageSource.url&&i&&"src"in i&&(i.src=t.control.imageSource.url),n=t.control.imageSource.url,i=e&&e.control.imageSource.url;let o=String(t.control.imageSource.url).endsWith(".svg")?t.control.imageSource.url:null;e=e&&String(e.control.imageSource.url).endsWith(".svg")?e.control.imageSource.url:null,o?o===e?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),"img"),this.upsertSvg(this.getRootElement(),o).then((()=>{this.applyAdaptiveStyles(t)}))):n?n===i?this.applyAdaptiveStyles(t):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),n).then((()=>{this.applyAdaptiveStyles(t)}))):(this.deleteElementIfPresent(this.getRootElement(),".svgOverflowContainer"),this.upsertImage(this.getRootElement(),"".concat(this.services.config.getConfig("staticResourcesUrl"),"img/image-placeholder.svg")).then((()=>{this.applyAdaptiveStyles(t)})))}))}}In.define={name:"sys-image",model:Cn.name,manifest:Cn};var On={name:"SysTextComponent",componentType:"TEXT",version:"1.0.0",events:{dispatch:[],listen:[]},contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host",params:{hideHeight:!0}},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"text",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"host",elementProp:"styleAttributes",params:{onlyColorSelection:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"text",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}]},autoContrast:[{slave:{element:"text",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"host",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],i18nPropPaths:["content,text","content,textrollers","content,mergeTags"],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"INSERT_BLOCK",params:[{element:"text",label:"DOCUMENT_TEXT",isLinkAvailable:!0,origin:!1}]}]},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}],mobile:[{element:"host",styleAttributes:{width:"100%",minWidth:null,height:"auto",minHeight:null,marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"text",styleAttributes:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",color:"rgb(50, 66, 67)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},classes:""}]},content:{text:"Text",textContrastEnabled:!0}},metaDescription:{sortWeight:75,icon:"/claspo-editor/text-component-icon.svg",label:{en:"Text",ru:"",uk:"",es:"Texto",de:"Text",fr:"Texte",it:"Testo",pt:"Texto",ro:"Text",bg:"",cs:"Text",el:"",nl:"Tekst",pl:"Tekst",sv:"Text",tr:"Metin",ar:"",zh:"",da:"Tekst"}}};let Sn={maxWidth:"100%",width:"fit-content",display:"inline-flex",fontFamily:"inherit"},An={padding:"0 5px",display:"inline-block",maxWidth:"calc(100% - 0px)",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},Nn={display:"inline-flex",justifyContent:"center",minHeight:"fit-content"};class Rn extends _n{constructor(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:On;super();var t=this;this.processTextRoller=function(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.getElement("text");if(n){var i="STATIC"===t.services.config.getConfig("entryModuleType");n.childNodes.forEach((t=>{if(t.nodeType!==Node.TEXT_NODE&&"TEXT_ROLLER"===t.getAttribute("cl-type")){var n=t.getAttribute("cl-id");(n=e[n])&&(i?C(t,n):function(e,t){let n=t.id,i=document.createElement("span");i.classList.add("outer");let o=document.createElement("span");o.classList.add("inner"),o.innerHTML=t.options.at(0)||"Option 1",o.setAttribute("contenteditable","false"),i.appendChild(o);let r=[...t.options].sort(((e,t)=>t.length-e.length)).at(0);t=Object.assign(Object.assign({},An),t.styleAttributes);let s=window.getComputedStyle(e.parentElement);I(o,t),I(i,Object.assign(Object.assign({},Nn),{borderRadius:o.style["border-radius"]||Nn.borderRadius,justifyContent:s["text-align"]||Nn.justifyContent}),r,t,parseFloat(s.width)),e.innerHTML="",I(e,Object.assign({},Sn)),e.appendChild(i)}(t,n))}}))}},this.stylesAppliedToElement=(e,t)=>{"text"===t.element&&t.styleAttributes.textAlign&&"flex"===getComputedStyle(e).display&&(e.style.justifyContent="center"===t.styleAttributes.textAlign?"center":"flex-".concat(t.styleAttributes.textAlign))},this.manifest=e,this.getRootElement().innerHTML='\n      <style>\n        .text {\n          outline: none;\n          min-height: 20px;\n          width: 100%;\n          overflow-wrap: break-word;\n        }\n      </style>\n      \n      <style>\n        [cl-type="TEXT_ROLLER"] {\n          position: relative;\n        }\n\n        .text {\n          align-items: center;\n        }\n        \n        .container--staticTextRoller {\n          display: inline-flex;\n          max-width: 100%;\n          width: fit-content;\n        }\n      \n        .container {\n          display: inline-flex;\n          align-items: center;\n          overflow: hidden;\n          position: relative;\n          height: 100%;\n        }\n\n        .opts {\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          top: 0;\n          left: 0;\n          z-index: 1;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          gap: 1px;\n          flex-direction: column-reverse;\n          transform: translateY(-100%);\n        }\n      \n        .opt {\n          width: 100%;\n          height: 100%;\n          text-align: center;\n          display: inline-flex;\n          justify-content: center;\n        }\n  \n        .opt span {\n         white-space: nowrap;\n         align-items: center;\n         text-overflow: ellipsis;\n         overflow: hidden;\n         width: fit-content;\n         max-width: 100%;\n         padding: 0 2px;\n        }\n      </style>\n\n      <div class="text" cl-element="text" cl-inline-edit="content, text"></div>\n    '}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{var n,i,o;this.applyAutoAdaptiveStyles(t.adaptiveStyles),null!==(n=t.content)&&void 0!==n&&n.text&&this.getElement("text")&&(this.getElement("text").innerHTML=null===(i=t.content)||void 0===i?void 0:i.text,this.mergeTagsProcessor.process(this.getElement("text"),t.content.mergeTags,this.getModel().id)),this.processTextRoller(null===(o=t.content)||void 0===o?void 0:o.textrollers)})),this.observeShared((()=>{var e;let t=this.getProps();this.processTextRoller(null===(e=t.content)||void 0===e?void 0:e.textrollers)}))}}Rn.define={name:"sys-text",model:On.name,manifest:On};var Ln={name:"SysInputComponent",componentType:"INPUT",version:"1.0.0",mappingTypes:["TEXT","INTEGER","FLOAT"],contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled"}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.mobile.find(element => element.element === 'label').params.enabled"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"input",elementProp:"styleAttributes",params:{width:{options:["fixed","fill"]},height:{options:["fixed","fill"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"input",showPlaceholderControl:!0,isLineSpaceAvailable:!0,isTextTransformAvailable:!0},{element:"label",displayCondition:"return !!sdk.component.getProps().adaptiveStyles.desktop.find(element => element.element === 'label').params.enabled",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",element:"input",elementProp:"styleAttributes"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"input"},{type:"CONTROL",name:"INPUT_LABEL",elementProp:"params",element:"label"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"input",params:{indentationType:"PADDING",horizontalOnly:!0}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}},{type:"CONTROL",name:"INTEGRATION_FIELD_MAPPING",displayCondition:"const controlName = sdk.component.getProps().control.name; return !['email', 'phone', 'first_name', 'last_name'].includes(controlName);",params:{integrationNamePropPath:["control","integrationName"],groupNamePropPath:["control","groupName"],fieldNamePropPath:["control","fieldName"],fieldTypePropPath:["control","fieldType"],validationPropPath:["control","validation"],placeholderPropPath:["content","placeholder"],labelPropPath:["content","label"],optionsPropPath:["control","options"]}},{type:"CONTROL",name:"INPUT_VALIDATION",params:{validationPropPath:["control","validation"],fieldTypePropPath:["control","fieldType"],required:!0,options:[{label:"not selected",value:null},{label:"email",value:"EMAIL"},{label:"name",value:"SYS_NAME"}],validationErrors:{EMAIL:[{key:"EMAIL_IS_INVALID",value:"Email is invalid"},{key:"MAX_LENGTH_50",value:"Maximum length is 50"}],SYS_NAME:[{key:"NAME_CONTAINS_NUMBERS",value:"Name contains numbers"},{key:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",value:"Name contains forbidden characters"},{key:"MAX_LENGTH_40",value:"Maximum length is 40"}]}}}]},autoContrast:[{slave:{element:"input",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]},{slave:{element:"input",elementProp:"placeholderStyleAttributes",elementSubProp:"color",dimmed:!0},master:{element:"input",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","placeholderTextContrastEnabled"]}],i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"TEXT_INPUT",propPath:["content","placeholder"],params:{label:"DOCUMENT_INPUT_PLACEHOLDER"}}]},focusableElements:["input","label"],events:{dispatch:[],listen:[]},i18nPropPaths:["content,label","content,suggestionLabel","content,placeholder"],i18n:{en:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Up to 3 words comprising up to 3 characters","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Up to 3 words comprising more than 3 characters","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Invalid characters used: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 digits maximum","control,validation,validationErrors,MAX_LENGTH_40":"Maximum length is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximum length is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Add alphabetical characters","control,validation,validationErrors,EMAIL_IS_INVALID":"Email is invalid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Emails with this domain are not acceptable. Please use a business email address","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"Required field","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximum length is 1000","content,label":"Title","content,suggestionLabel":"Did you mean"},ru:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":" 3   3  ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":" 3   3  ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":' : "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":" 3 ","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Name consisting only of numbers and special characters is not allowed","control,validation,validationErrors,MAX_LENGTH_40":"  40 ","control,validation,validationErrors,MAX_LENGTH_50":"  50 ","control,validation,validationErrors,EMAIL_IS_INVALID":"  Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email       . ,   email","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p> 40  .</p><p> :</p><ul><li> '</li><li> -</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"   4 ","control,validation,validationErrors,REQUIRED":" ","control,validation,validationErrors,INTEGER_FORMAT":"    ","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"  -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"  2147483648","control,validation,validationErrors,FLOAT_FORMAT":"      ","control,validation,validationErrors,MAX_LENGTH_1000":"  1000 ","content,label":"","content,suggestionLabel":"   "},uk:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":" 3-   3-  ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":" 3-    3  ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":' : "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":" 3 ","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"  ","control,validation,validationErrors,EMAIL_IS_INVALID":"  Email","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Email-       .  ,   email-","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p> 40  .</p><p> :</p><ul><li> '</li><li> -</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"  40","control,validation,validationErrors,MAX_LENGTH_50":"  50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"   4 ","control,validation,validationErrors,REQUIRED":"' ","control,validation,validationErrors,INTEGER_FORMAT":"    ","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"  -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"  2147483648","control,validation,validationErrors,FLOAT_FORMAT":"       ","control,validation,validationErrors,MAX_LENGTH_1000":"  1000","content,label":"","content,suggestionLabel":"   i"},es:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Hasta 3 palabras que comprenden hasta 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Hasta 3 palabras de ms de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres no vlidos utilizados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 dgitos mximo","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Aadir caracteres alfabticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Este email no es vlido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"No se aceptan correos electrnicos con este dominio. Utilice una direccin de correo electrnico comercial","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Mximo 40 caracteres alfabticos.</p><p>Estn premitidos:</p><ul><li>apstrofes (')</li><li>guiones (-)</li></ul>","control,validation,validationErrors,MAX_LENGTH_40":"Longitud mxima es de 40","control,validation,validationErrors,MAX_LENGTH_50":"Logitud mxima es de 50","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No estn permitidos ms de 4 nmeros","control,validation,validationErrors,REQUIRED":"Campo obligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Longitud mxima es de 1000","content,label":"Ttulo","content,suggestionLabel":"Quiso decir"},de:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Bis zu 3 Wrter mit bis zu 3 Zeichen","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Bis zu 3 Wrter mit mehr als 3 Zeichen","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ungltige Zeichen verwendet: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximal 3 Ziffern","control,validation,validationErrors,MAX_LENGTH_40":"Maximale Lnge betrgt 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale Lnge betrgt 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alphabetische Zeichen hinzufgen","control,validation,validationErrors,EMAIL_IS_INVALID":"E-Mail-Adresse ist ungltig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-Mails mit dieser Domain werden nicht akzeptiert. Bitte verwenden Sie eine geschftliche E-Mail-Adresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maximal 40 alphabetische Zeichen ohne Leerzeichen, auch Apostrophe und Bindestriche sind erlaubt.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Es sind nicht mehr als 4 Nummern erlaubt","control,validation,validationErrors,REQUIRED":"Pflichtfeld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale Lnge betrgt 1000","content,label":"Titel","content,suggestionLabel":"Meinten Sie"},fr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Jusqu' 3 mots comprenant jusqu' 3 caractres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Jusqu' 3 mots comprenant plus de 3 caractres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractres non valides utiliss: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 chiffres maximum","control,validation,validationErrors,MAX_LENGTH_40":"La longueur maximale est de 40","control,validation,validationErrors,MAX_LENGTH_50":"La longueur maximale est de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Ajouter des caractres alphabtiques","control,validation,validationErrors,EMAIL_IS_INVALID":"Le courriel est invalide","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Les e-mails avec ce nom de domaine ne sont pas acceptables. Veuillez utiliser une adresse e-mail professionnelle","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 caractres alphabtiques sans espaces. galement autoriss : apostrophes, tirets.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Pas plus de 4 numros sont autoriss","control,validation,validationErrors,REQUIRED":"Champs requis","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La longueur maximale est de 1000","content,label":"Titre","content,suggestionLabel":"Vouliez-vous dire"},it:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Fino a 3 parole composte da un massimo di 3 caratteri","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Fino a 3 parole composte da pi di 3 caratteri","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caratteri non validi utilizzati: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3 cifre massimo","control,validation,validationErrors,MAX_LENGTH_40":"La lunghezza massima  40","control,validation,validationErrors,MAX_LENGTH_50":"La lunghezza massima  50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Aggiunga caratteri alfabetici","control,validation,validationErrors,EMAIL_IS_INVALID":"L'email non  valida","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Le email con questo dominio non sono accettate. Utilizzare un indirizzo email aziendale","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Massimo 40 caratteri alfabetici senza spazi. Consentiti anche apostrofi e trattini","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Non sono ammessi pi di 4 numeri","control,validation,validationErrors,REQUIRED":"Campo obbligatorio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"La lunghezza massima  1000","content,label":"Titolo","content,suggestionLabel":"Intendevi"},pt:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"At 3 palavras com at 3 caracteres","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"At 3 palavras com mais de 3 caracteres","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caracteres invlidos usados: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Mximo de 3 dgitos","control,validation,validationErrors,MAX_LENGTH_40":"Comprimento mximo de 40","control,validation,validationErrors,MAX_LENGTH_50":"Comprimento mximo de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adicionar caracteres alfabticos","control,validation,validationErrors,EMAIL_IS_INVALID":"Email invlido","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Os emails com este domnio no so aceites. Utilize um endereo de email profissional","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Mximo de 40 caracteres alfabticos sem espaos. Tambm permitido: apstrofes, hfens","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No so permitidos mais de 4 espaos","control,validation,validationErrors,REQUIRED":"Campo obrigatrio","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Comprimento mximo de 1000","content,label":"Ttulo","content,suggestionLabel":"Quiz dizer"},ro:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Pn la 3 cuvinte care s conin cel mult 3 caractere","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Pn la 3 cuvinte care s conin mai mult de 3 caractere","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Caractere nevalide folosite: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Cel mult 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Lungimea maxim este de 40","control,validation,validationErrors,MAX_LENGTH_50":"Lungimea maxim este de 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Adugai caractere alfabetice","control,validation,validationErrors,EMAIL_IS_INVALID":"Emailul nu este valid","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mailurile cu acest domeniu nu sunt acceptabile. V rugm s folosii o adres de e-mail de afaceri","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Cel mult 40 de caractere alfabetice fr spaii. Sunt permise i apostrofuri, cratime.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nu sunt permise mai mult de 4 cifre","control,validation,validationErrors,REQUIRED":"Cmp obligatoriu","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Lungimea maxim este de 1000","content,label":"Titlu","content,suggestionLabel":"Ai vrut s spui"},bg:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":" 3 ,   3 ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":" 3 ,      3 ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'  : "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3  ","control,validation,validationErrors,MAX_LENGTH_40":"   40","control,validation,validationErrors,MAX_LENGTH_50":"   50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"  ","control,validation,validationErrors,EMAIL_IS_INVALID":"  ","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"     . ,    .","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":" 40    .   : , .","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"     4 ","control,validation,validationErrors,REQUIRED":" ","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"   1000","content,label":"","content,suggestionLabel":" "},cs:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"A 3 slova obsahujc a 3 znaky","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"A 3 slova obsahujc vce ne 3 znaky","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Pouit neplatn znaky: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximum 3 slice","control,validation,validationErrors,MAX_LENGTH_40":"Maximln dlka je 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximln dlka je 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Pidejte znaky abecedy","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail je neplatn","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-maily s touto domnou nejsou ppustn. Pouijte prosm firemn e-mailovou adresu","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Nanejv 40 znak abecedy bez mezer. Tak jsou povoleny: apostrofy, pomlky.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Nejsou povolena vce ne 4 sla","control,validation,validationErrors,REQUIRED":"Vyadovan pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximln dlka je 1000","content,label":"Titul","content,suggestionLabel":"Mysleli jste"},el:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":" 3     3 ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":" 3      3 ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'  : "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3  ","control,validation,validationErrors,MAX_LENGTH_40":"    40","control,validation,validationErrors,MAX_LENGTH_50":"    50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"  ","control,validation,validationErrors,EMAIL_IS_INVALID":"    ","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":" email       .       ","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":" 40    .  : , ","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"    4 ","control,validation,validationErrors,REQUIRED":" ","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"    1000","content,label":"","content,suggestionLabel":""},nl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Maximaal 3 woorden bestaande uit maximaal 3 tekens","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Maximaal 3 woorden bestaande uit meer dan 3 tekens","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ongeldige tekens gebruikt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maximaal 3 cijfers","control,validation,validationErrors,MAX_LENGTH_40":"Maximale lengte is 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximale lengte is 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Voeg alfabetische tekens toe","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail is ongeldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails met dit domein worden niet geaccepteerd. Gebruik een zakelijk e-mailadres","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max. 40 alfabetische tekens zonder spaties. Ook toegestaan: apostrofs, koppeltekens.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Niet meer dan 4 cijfers toegestaan","control,validation,validationErrors,REQUIRED":"Verplicht veld","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximale lengte is 1000","content,label":"Titel","content,suggestionLabel":"Bedoelde u"},pl:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Do 3 sw zoonych z nie wicej ni 3 znakw","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Do 3 sw zoonych z ponad 3 znakw","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Uyto nieprawidowych znakw: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksymalnie 3 cyfry","control,validation,validationErrors,MAX_LENGTH_40":"Maksymalna dugo to 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksymalna dugo to 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Wszystkie znaki alfabetu","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail jest nieprawidowy","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Adresy e-mail z tej domeny nie s akceptowane. Uyj firmowego adresu e-mail","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Maks. 40 znakw alfabetu be spacji. Dozwolone take: apostrofy, czniki.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Dozwolone s maksymalnie 4 cyfry","control,validation,validationErrors,REQUIRED":"Wymagane pole","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksymalna dugo to 1000","content,label":"Tytu","content,suggestionLabel":"Czy miae(-a) na myli"},sv:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Upp till 3 ord med upp till 3 tecken","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Upp till 3 ord med mer n 3 tecken","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ogiltiga tecken anvnds: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Max 3 siffror","control,validation,validationErrors,MAX_LENGTH_40":"Maximal lngd r 40","control,validation,validationErrors,MAX_LENGTH_50":"Maximal lngd r 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Lgg till alfabetiska tecken","control,validation,validationErrors,EMAIL_IS_INVALID":"Ogiltig e-post","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-postadresser frn denna domn r inte godknda. Var vnlig anvnd en fretagsadress","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Max 40 alfabetiska tecken utan mellanslag.Ocks tilltet: apostrofer, bindestreck.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Max 4 siffror r tilltna","control,validation,validationErrors,REQUIRED":"Obligatoriskt flt","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maximal lngd r 1000","content,label":"Tytu","content,suggestionLabel":"Menade du"},tr:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"3 karaktere kadar en fazla 3 kelime","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"3'ten fazla karakter ieren en fazla 3 kelime","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Geersiz karakterler kullanld: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Maksimum 3 hane","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum uzunluk 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum uzunluk 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Alfabetik karakterler ekle","control,validation,validationErrors,EMAIL_IS_INVALID":"E-posta geersiz","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"Bu alan adna sahip e-postalar kabul edilmez. Ltfen bir i e-posta adresi kullann","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"Boluksuz en fazla 40 alfabetik karakter. Ayrca unlara izin verilir: kesme iaretleri, tireler.","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"4'ten fazla sayya izin verilmez","control,validation,validationErrors,REQUIRED":"Gerekli alan","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum uzunluk 1000","content,label":"Balk","content,suggestionLabel":"Mi demek istediniz"},ar:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"   3    3 ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"   3      3 ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":"    {{characters}}","control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"3   ","control,validation,validationErrors,MAX_LENGTH_40":"    40","control,validation,validationErrors,MAX_LENGTH_50":"    50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"  ","control,validation,validationErrors,EMAIL_IS_INVALID":"   ","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"       .       ","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"40      :     .","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"    4 ","control,validation,validationErrors,REQUIRED":" ","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":"    1000","content,label":"","content,suggestionLabel":" "},zh:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":" 3  3 ","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":" 3  3 ","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":': "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":" 3 ","control,validation,validationErrors,MAX_LENGTH_40":" 40","control,validation,validationErrors,MAX_LENGTH_50":" 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"","control,validation,validationErrors,EMAIL_IS_INVALID":"","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Max 40 alphabetic characters.</p><p>Also allowed:</p><ul><li>apostrophes (')</li><li>hyphens (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"No more than 4 numbers are allowed","control,validation,validationErrors,REQUIRED":"","control,validation,validationErrors,INTEGER_FORMAT":"Value must be integer","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimum value is -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maximum value is 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Value must be number with dot delimiter","control,validation,validationErrors,MAX_LENGTH_1000":" 1000","content,label":"Title","content,suggestionLabel":" "},da:{"control,validation,validationErrors,MORE_THAN_THREE_SHORT_WORDS":"Op til 3 ord med op til 3 tegn","control,validation,validationErrors,MORE_THAN_THREE_LONG_WORDS":"Op til 3 ord med mere end 3 tegn","control,validation,validationErrors,CONTAINS_FORBIDDEN_CHARACTERS":'Ugyldige tegn brugt: "{{characters}}"',"control,validation,validationErrors,NAME_CONTAINS_MORE_THAN_3_DIGITS":"Hjest 3 cifre","control,validation,validationErrors,MAX_LENGTH_40":"Maksimum lngde er 40","control,validation,validationErrors,MAX_LENGTH_50":"Maksimum lngde er 50","control,validation,validationErrors,NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED":"Tilfj alfabetiske tegn","control,validation,validationErrors,EMAIL_IS_INVALID":"E-mail er ugyldig","control,validation,validationErrors,EMAIL_DOMAIN_INVALID":"E-mails med dette domne er ikke acceptable. Brug venligst en virksomheds-e-mailadresse","control,validation,validationErrors,NAME_CONTAINS_FORBIDDEN_CHARACTERS":"<p>Maks. 40 alfabetiske tegn.</p><p>Ogs tilladt:</p><ul><li>apostrof (')</li><li>bindestreger (-)</li></ul>","control,validation,validationErrors,NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED":"Der er ikke tilladt mere end 4 pladser","control,validation,validationErrors,REQUIRED":"Pkrvet felt","control,validation,validationErrors,INTEGER_FORMAT":"Vrdien skal vre heltal","control,validation,validationErrors,MIN_VALUE_MINUS_2147483648":"Minimumsvrdien er -2147483648","control,validation,validationErrors,MAX_VALUE_2147483648":"Maksimal vrdi er 2147483648","control,validation,validationErrors,FLOAT_FORMAT":"Vrdien skal vre tal med punktafgrnser","control,validation,validationErrors,MAX_LENGTH_1000":"Maksimum lngde er 1000","content,label":"Titel","content,suggestionLabel":"Mente du"}},defaultProps:{content:{placeholder:"Placeholder",label:"Title",suggestionLabel:"Did you mean",textContrastEnabled:!0,placeholderTextContrastEnabled:!0},control:{name:"email",integrationName:"email",defaultValue:"",validation:{required:!0,validator:"EMAIL",validationErrors:{EMAIL_IS_INVALID:"Email is invalid",REQUIRED:"This field can't be empty"}}},adaptiveStyles:{desktop:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px"},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}],mobile:[{element:"host",styleAttributes:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"},classes:""},{element:"input",styleAttributes:{width:"100%",minWidth:null,height:"35px",minHeight:"35px",background:"rgb(255, 255, 255)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"1px",borderTopColor:"rgba(0, 0, 0, 0.1)",borderBottomWidth:"1px",borderBottomColor:"rgba(0, 0, 0, 0.1)",borderLeftWidth:"1px",borderLeftColor:"rgba(0, 0, 0, 0.1)",borderRightWidth:"1px",borderRightColor:"rgba(0, 0, 0, 0.1)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px"},placeholderStyleAttributes:{color:"rgb(81, 81, 81)"},classes:""},{element:"label",styleAttributes:{color:"rgb(0, 0, 0)",textAlign:"start",lineHeight:"120%",fontWeight:"400",fontSize:"16px",textShadow:"none"},params:{enabled:!1,position:"TOP",margin:5},classes:""}]}},metaDescription:{sortWeight:40,icon:"/claspo-editor/email-input-component-icon.svg",label:{en:"Text input",ru:" ",uk:" ",es:"Entrada de texto",fr:"Saisie de texte",de:"Text-Input",it:"Input testo",pt:"Introduo de texto",ro:"Text input",bg:"Text input",cs:"Text input",el:"Text input",nl:"Text input",pl:"Text input",sv:"Text input",tr:"Text input",ar:"Text input",zh:"",da:"Tekst input"}}};class Mn{constructor(){this.emailSuggestionOverlayBackdrop=this.lastEmailSuggestionCheckedValue=null}suggestEmail(e,t,n,i,o,r,s,a){!t.value||this.lastEmailSuggestionCheckedValue===t.value&&!n||e.control.validation&&e.control.validation.restrictFreeDomains||(this.lastEmailSuggestionCheckedValue=t.value,r.elementRef.classList.contains("invalid")||Mn.mostPopularProviders.includes(t.value.toLowerCase().split("@")[1])||(n=e=>{this.createSuggestionOverlay(i,e,t,r,a),Mn.preventSubmit(o)},(e=Mn.suggestEmailSync(t.value))?n(e):(r.setPending(!0),this.checkSuggestionOnBackend(n,t,r,s))))}emailValueChanged(){this.lastEmailSuggestionCheckedValue=null}hideEmailSuggestion(){this.emailSuggestionOverlayBackdrop&&this.emailSuggestionOverlayBackdrop.click()}createSuggestionOverlay(e,t,n,i,o){this.hideEmailSuggestion(),setTimeout((()=>{this.emailSuggestionOverlayBackdrop=e.overlay.createMenuOverlay({triggerElement:n,overlayStyles:O(e.overlay.getMenuOverlayContentClassName()),createOverlayContent:(e,n)=>{Mn.createOverlayContent(t,e,n,i,o)},overlayWidth:220,overlayHeight:90,positionByDefault:"top",isHorizontallyCentered:!0,isBackdropDisabledOnUI:!0,onDestroy:()=>{this.emailSuggestionOverlayBackdrop=null},offset:10}).backdrop}),50)}checkSuggestionOnBackend(e,t,n,i){return fetch("".concat(i,"forms/v1/suggestion/email?value=").concat(t.value),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>{if(!e.ok)throw Error();return e.text()})).then((t=>{t&&e(t),n.setPending(!1)})).catch((e=>{n.setPending(!1)}))}static createOverlayContent(e,t,n,i,o){var r=o();(o=document.createElement("div")).classList.add("suggestion-text-container");let s=document.createElement("div");s.classList.add("did-you-mean-text"),s.innerHTML=r["content,suggestionLabel"],(r=document.createElement("div")).classList.add("suggestion-text"),r.innerHTML="".concat(e,"?");let a=document.createElement("div");a.classList.add("accept-button");let l=document.createElement("div");l.classList.add("deny-button"),o.appendChild(s),o.appendChild(r),a.addEventListener("click",(()=>{let n=i.value.split("@")[0];i.setValue("".concat(n,"@").concat(e)),t.click()})),l.addEventListener("click",(()=>{t.click()})),n.appendChild(o),n.appendChild(a),n.appendChild(l)}static preventSubmit(e){e.setPreventSubmit(!0),setTimeout((()=>e.setPreventSubmit(!1)),200)}static suggestEmailSync(e){if(e=e.toLowerCase().split("@")[1]||"",-1<Mn.mostPopularProviders.indexOf(e))return null;var t=Mn.getSuggestionAfterDotChecks(e);if(t)return t;if(2!==(e=e.split(".")).length)return null;var n=e[1];let i=e[0];var o=Mn.mostPopularProviders.map((e=>e.replace(".".concat(Mn.providersListTopLevelDomain),"")));e=Mn.getLevenshteinDistance(Mn.providersListTopLevelDomain,n);var r=o.map((e=>Mn.getLevenshteinDistance(e,i)));return t=Math.min(...r),2<e||2<t?null:(o=Mn.getAllMinimalDistanceDomains(t,r,o),n=Mn.isTwoCharsWrongOrder([Mn.providersListTopLevelDomain],n),r=Mn.isTwoCharsWrongOrder(o,i),1>=e&&1>=t?"".concat(o[0],".").concat(Mn.providersListTopLevelDomain):1<e&&1>=t?n?"".concat(o[0],".").concat(Mn.providersListTopLevelDomain):null:1>=e&&1<t?r?"".concat(r,".").concat(Mn.providersListTopLevelDomain):null:2===e&&2===t&&n&&r?"".concat(r,".").concat(Mn.providersListTopLevelDomain):null)}static getSuggestionAfterDotChecks(e){return Mn.mostPopularProviders.find((t=>Mn.isDotLocatedInWrongPlace(t,e)))}static isDotLocatedInWrongPlace(e,t){if(t)return t.replace(".","")===e.replace(".","")}static getLevenshteinDistance(e,t){if(!e.length)return t.length;if(!t.length)return e.length;let n=[];for(let i=0;i<=t.length;i++){n[i]=[i];for(let o=1;o<=e.length;o++)n[i][o]=0===i?o:Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(e[o-1]===t[i-1]?0:1))}return n[t.length][e.length]}static getAllMinimalDistanceDomains(e,t,n){let i=t.reduce(((t,n,i)=>(n===e&&t.push(i),t)),[]);return n.filter(((e,t)=>i.includes(t)))}static isTwoCharsWrongOrder(e,t){return e.find((e=>{let n=Mn.findIndexOfFirstDiffInTwoStrings(t,e);return t.charAt(n)===e.charAt(n+1)&&e.charAt(n)===t.charAt(n+1)}))}static findIndexOfFirstDiffInTwoStrings(e,t){return[...e].findIndex(((e,n)=>e!==t[n]))}}Mn.providersListTopLevelDomain="com",Mn.mostPopularProviders="gmail.com yahoo.com outlook.com hotmail.com aol.com protonmail.com icloud.com mail.com tutanota.com gmx.com live.com yandex.com zoho.com".split(" ");class wn{static emailValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{if(!/^[_A-Za-z0-9-\p{L}]+(\.[_A-Za-z0-9-\p{L}]+)*(\+.*)?@([A-Za-z0-9-\p{L}]+(\.[A-Za-z0-9\p{L}]+)+)+$/u.test(e))return{isValid:!1,errorKey:wn.validationErrorKeys.EMAIL_IS_INVALID}}catch(t){if(!/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*(\+.*)?@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/.test(e))return{isValid:!1,errorKey:wn.validationErrorKeys.EMAIL_IS_INVALID}}return{isValid:50>=e.length,errorKey:wn.validationErrorKeys.MAX_LENGTH_50}}static nameValidationCb(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim(),t=(e||"").split(" ");return 3<t.filter((e=>3<e.length)).length?{isValid:!1,errorKey:wn.validationErrorKeys.MORE_THAN_THREE_LONG_WORDS}:3<t.filter((e=>3>=e.length)).length?{isValid:!1,errorKey:wn.validationErrorKeys.MORE_THAN_THREE_SHORT_WORDS}:wn.lastNameValidator(e)||{value:e,isValid:!0}}static lastNameValidator(e){if(40<(e=e.trim()).length)return{isValid:!1,errorKey:wn.validationErrorKeys.MAX_LENGTH_40};var t=wn.sanitizeExceptDoubleQuotes(e);return t&&t.length?{isValid:!1,errorKey:wn.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:t[0][0]}:(t=wn.forbiddenCharactersValidator(e,"[\\d\\.\\s\\p{Alphabetic}".concat(" .'`-","]"))).length?{isValid:!1,errorKey:wn.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:[...new Set(t)].join("")}:wn.nameContainsDotValidator(e)?{isValid:!1,errorKey:wn.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:""}:wn.nameContainsMoreThanThreeDigitsValidator(e)?{isValid:!1,errorKey:wn.validationErrorKeys.NAME_CONTAINS_MORE_THAN_3_DIGITS}:wn.nameConsistingOfAlphabeticCharactersValidator(e)?{isValid:!1,errorKey:wn.validationErrorKeys.NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED}:(e=wn.symbolPositionValidator(e))&&e.length?{isValid:!1,errorKey:wn.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS,forbiddenChar:e[0][0]}:null}static lastNameValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return wn.lastNameValidator(e)||{value:e.trim().replace(/\s+/g," "),isValid:!0}}static esTextValidationCb(){return{isValid:1e3>=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().length,errorKey:wn.validationErrorKeys.MAX_LENGTH_1000}}static esIntegerValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return e?/^(\-)?(\d)+$/.test(e)?-2147483647>e?{isValid:!1,errorKey:wn.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:2147483647>=e,errorKey:wn.validationErrorKeys.MAX_VALUE_2147483648}:{isValid:!1,errorKey:wn.validationErrorKeys.INTEGER_FORMAT}:{isValid:!0}}static esFloatValidationCb(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(!e)return{isValid:!0};let t=/,/.test(e),n=/^(\-)?(\d)+(\.(\d)+)?$/.test(e);return t||!n?{isValid:!1,errorKey:wn.validationErrorKeys.FLOAT_FORMAT}:-9007199254740991>e?{isValid:!1,errorKey:wn.validationErrorKeys.MIN_VALUE_MINUS_2147483648}:{isValid:9007199254740991>=e,errorKey:wn.validationErrorKeys.MAX_VALUE_2147483648}}static asyncEmailValidationCb(e,t,n,i){return t&&Array.isArray(t)&&t.filter((e=>"EMAIL_DOMAIN_INVALID"!==e)).length||!(e&&n.control&&"email"===n.control.name&&n.control.validation&&n.control.validation.restrictFreeDomains)?{isValid:!0,value:e}:(t=e.toLowerCase().split("@")[1],Mn.mostPopularProviders.includes(t)?{isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}:fetch("".concat(i,"forms/v1/validation/email/business?value=").concat(e),{method:"GET",credentials:"same-origin",headers:{"Content-Type":"text/plain",Accept:"application/json, text/plain, */*"}}).then((e=>e.json())).then((e=>({isValid:e.valid,value:e.value,errorKey:"EMAIL_DOMAIN_INVALID"}))).catch((()=>({isValid:!1,errorKey:"EMAIL_DOMAIN_INVALID"}))))}static sanitizeExceptDoubleQuotes(e){let t=new RegExp(/[%^*|~{};<>]/,"g");return t.test(e)?e.match(t):null}static forbiddenCharactersValidator(e,t){try{return!new RegExp(t,"gu").test(e)}catch(n){return!new RegExp(t.replace("\\p{Alphabetic}",""),"gu").test(e)}}static nameContainsDotValidator(e){return/(\p{Alphabetic}{4,}\.)/gmu.test(e)}static nameContainsMoreThanThreeDigitsValidator(e){return 3<e.replace(/\D+/g,"").length}static nameConsistingOfAlphabeticCharactersValidator(e){try{return!/[\p{Alphabetic}]/gu.test(e)}catch(t){return/^[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~\d]*$/g.test(e)}}static symbolPositionValidator(e){let t=new RegExp("[".concat(" .'`-","][").concat(" .'`-","]|(^[").concat(" .'`-","])|([").concat(" '`-","]$)"),"g");return t.test(e)?e.match(t).filter((e=>". "!==e)).map((e=>e.trim())):null}}wn.validationErrorKeys={NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED:"NAME_CONSISTING_ONLY_OF_NUMBERS_AND_SPECIAL_CHARACTERS_IS_NOT_ALLOWED",NAME_CONTAINS_MORE_THAN_3_DIGITS:"NAME_CONTAINS_MORE_THAN_3_DIGITS",MORE_THAN_THREE_LONG_WORDS:"MORE_THAN_THREE_LONG_WORDS",MORE_THAN_THREE_SHORT_WORDS:"MORE_THAN_THREE_SHORT_WORDS",CONTAINS_FORBIDDEN_CHARACTERS:"CONTAINS_FORBIDDEN_CHARACTERS",EMAIL_IS_INVALID:"EMAIL_IS_INVALID",NAME_CONTAINS_FORBIDDEN_CHARACTERS:"NAME_CONTAINS_FORBIDDEN_CHARACTERS",MAX_LENGTH_50:"MAX_LENGTH_50",MAX_LENGTH_40:"MAX_LENGTH_40",NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED:"NO_MORE_THAN_4_NUMBERS_ARE_ALLOWED",INTEGER_FORMAT:"INTEGER_FORMAT",MIN_VALUE_MINUS_2147483648:"MIN_VALUE_MINUS_2147483648",MAX_VALUE_2147483648:"MAX_VALUE_2147483648",FLOAT_FORMAT:"FLOAT_FORMAT",MAX_LENGTH_1000:"MAX_LENGTH_1000"},wn.validationMap={EMAIL:wn.emailValidationCb,SYS_NAME:wn.nameValidationCb,SYS_LAST_NAME:wn.lastNameValidationCb,ES_TEXT:wn.esTextValidationCb,ES_INTEGER:wn.esIntegerValidationCb,ES_FLOAT:wn.esFloatValidationCb},wn.asyncValidationMap={EMAIL:wn.asyncEmailValidationCb};class Dn{constructor(e,t,n,i,o,r,s){this.utils=this.configService=this.formService=this.getRootElement=this.getProps=null,this.emailSuggesting=new Mn,this.forbiddenChar="",this.componentId=e,this.getProps=t,this.getRootElement=n,this.formService=i,this.configService=o,this.utils=r,this.i18n=s}init(){var e=this;let t=this.getProps(),n=this.getRootElement(),i=n.querySelector(".input-tooltip"),o=n.querySelector("input");"first_name"===t.control.name&&(o.setAttribute("name","name"),o.setAttribute("autocomplete","off")),"email"===t.control.name&&(o.setAttribute("name","email"),o.setAttribute("autocomplete","on")),this.formService.hasControl(t.control.name)?o.value=this.formService.getControl(t.control.name).value||"":this.formService.registerControl(Object.assign(Object.assign({},t.control),{componentId:this.componentId}),o,Object.keys(wn.validationMap).reduce(((t,n)=>(t[n]=function(){let t=wn.validationMap[n](...arguments);return void 0!==t.forbiddenChar&&(e.forbiddenChar=t.forbiddenChar),t},t)),{}),Object.assign(Object.assign({},wn.asyncValidationMap),{EMAIL:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return wn.asyncValidationMap.EMAIL(...n,e.getProps(),e.configService.getConfig("hostUrl"))}}));let r=this.formService.getControl(t.control.name);"email"===t.control.name&&(this.listenForEmailValueChanges(r),this.suggestEmailFixOnFocusOut(o,r)),this.utils.handleControlStatusChange({control:r,inputElement:o,tooltipElement:i,configService:this.configService,i18n:this.i18n,validCallback:()=>{"email"===t.control.name&&n.activeElement!==o&&this.suggestEmailFix(o,r,!0)},errorMessageMapper:(e,t)=>e===wn.validationErrorKeys.CONTAINS_FORBIDDEN_CHARACTERS?t.replace("{{characters}}",this.forbiddenChar):t})}destroy(){this.emailSuggesting.hideEmailSuggestion()}listenForEmailValueChanges(e){e.on("valueChanged",(t=>{this.emailSuggesting.emailValueChanged(),this.emailSuggesting.hideEmailSuggestion(),this.formatEmailValue(t,e)}))}formatEmailValue(e,t){e.trim().toLowerCase()!==e&&t.setValue(e.trim().toLowerCase())}suggestEmailFixOnFocusOut(e,t){e.addEventListener("focusout",(()=>this.suggestEmailFix(e,t)))}suggestEmailFix(e,t,n){this.emailSuggesting.suggestEmail(this.getProps(),e,n,this.utils,this.formService,t,this.configService.getConfig("hostUrl"),this.getCurrentLanguageMap.bind(this))}getCurrentLanguageMap(){return b(this.i18n,T(this.configService)).translations}}class Pn extends _n{constructor(){super(...arguments),this.manifest=Ln,this.inputFormControl=null,this.addContextRecord=()=>{var e;let t=this.getModel();this.services.context.addRecord(t.id,{recordKey:t.id,id:t.props.control.name,label:this.getContextRecordLabel(t.props),value:t.props.control.defaultValue||"",viewIndex:null===(e=t.path)||void 0===e?void 0:e[0],sourceId:"FORM",initialData:{fallbackValue:"",exampleValue:this.getContextRecordExampleValue(t.props)}})},this.updateContext=()=>{var e;let t=this.getModel();this.services.context.updateRecord(t.id,{label:this.getContextRecordLabel(t.props),viewIndex:null===(e=t.path)||void 0===e?void 0:e[0]})},this.getContextRecordLabel=e=>{var t,n;let i=e.control.name;return["email","first_name","last_name"].includes(i)?i.toUpperCase():e.content.label&&null!==(n=null===(t=e.adaptiveStyles.desktop.find((e=>"label"===e.element)))||void 0===t?void 0:t.params)&&void 0!==n&&n.enabled?(e=(new DOMParser).parseFromString(e.content.label,"text/html"),this.capitalizeFirstLetter(e.body.textContent||"")):e.content.placeholder?this.capitalizeFirstLetter(e.content.placeholder):e.control.integrationName?this.capitalizeFirstLetter(e.control.integrationName).replace(/_/g," "):void 0},this.getContextRecordExampleValue=e=>{switch(e.control.name){case"email":return"myemail@example.com";case"first_name":return"Maria";case"last_name":return"Taylor";default:return this.getContextRecordLabel(e)}},this.capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1)}connectedCallback(){super.connectedCallback(),this.getRootElement().innerHTML+="\n".concat("\n<style>\n.main-container {\n  height: 100%;\n}\n\n.label-with-input-container {\n  height: 100%;\n  display: flex;\n}\n\n.label {\n  min-height: 10px;\n}\n\n.label.cl-focused {\n  min-height: auto;\n}\n\n.input-with-tooltip {\n  position: relative;\n  display: flex;\n  height: 100%;\n  width: 100%;\n}\n\n.invalid {\n  border: 1px solid #ff0000 !important;\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\ninput {\n  width: 100%;\n  padding-top: 0 !important;\n  padding-bottom: 0 !important;\n  margin: 0;\n  -moz-appearance:none;\n  -webkit-appearance:none;\n  -o-appearance:none;\n}\n\ninput.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n</style>\n    ",'\n<div class="main-container">\n  <div class="label-with-input-container">\n    <div cl-element="label"\n         cl-inline-edit="content, label"\n         class="label">\n    </div>\n    <div class="input-with-tooltip">\n      <input cl-element="input"\n             type="text"\n             name="fname">\n      <div class="input-tooltip">\n        <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n</div>\n\n'),this.inputFormControl=new Dn(this.getModel().id,this.getProps.bind(this),this.getRootElement.bind(this),this.services.form,this.services.config,this.utils,this.manifest.i18n),this.inputFormControl.init(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),e=this.getEnvironment();let n=this.getElement("input");this.utils.applyLabelParams(t,e,this.getRootElement(),".label-with-input-container"),n.setAttribute("placeholder",t.content.placeholder),this.utils.setInputHostSize(t,e,this.getHostElement(),n,this.getElement("label")),this.utils.setFocusOutline(n),this.updateContext()})),this.observeEnvironment(((e,t)=>{e=this.getProps(),this.utils.applyLabelParams(e,t,this.getRootElement(),".label-with-input-container"),this.utils.setInputHostSize(e,t,this.getHostElement(),this.getElement("input"),this.getElement("label"))})),this.addContextRecord()}disconnectedCallback(){super.disconnectedCallback(),this.inputFormControl.destroy(),this.services.context.deleteRecord(this.getModel().id)}}Pn.define={name:"sys-input",model:Ln.name,manifest:Ln};var xn={name:"SysButtonComponent",componentType:"BUTTON",version:"1.0.0",contextMenuModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"BRING_BACK_FORWARD",element:"host",elementProp:"styleAttributes",elementSubProp:"zIndex"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT"}]}],floatingPanelModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button"}]}]}],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}}},{type:"CONTROL",name:"TEXT_PARAMS",params:[{element:"button",isLineSpaceAvailable:!0,isTextTransformAvailable:!0}]},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"ICON",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"block"}},{type:"CONTROL",name:"TEXT_VISIBILITY",elementSubProp:"--textDisplay",elementProp:"styleAttributes",element:"button",params:{visibleDisplayValue:"inline"}},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"button"},{type:"CONTROL",name:"HOVER_ANIMATION",elementProp:"hoverStyleAttributes",element:"button",params:{animationTypeProp:"hoverAnimationType"}},{type:"CONTROL",name:"LOOP_ANIMATION",elementProp:"styleAttributes",element:"button",params:{label:"LOOP_ANIMATION_LABEL",loopAnimation:{type:null}}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"button",params:{indentationType:"PADDING"}},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"MARGIN"}}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},autoContrast:[{slave:{element:"button",elementProp:"styleAttributes",elementSubProp:"color"},master:{element:"button",elementProp:"styleAttributes",elementSubProp:"background"},enabledPropPath:["content","textContrastEnabled"]}],events:{dispatch:[],listen:[]},i18nPropertyPaneModel:{content:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!1}}]},i18nPropPaths:["content,text","handlers,[id],actions,[id],params,link","handlers,[id],actions,[id],params,customData"],i18n:{en:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"At least one field is required: email or phone number"},ru:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"       : Email   "},uk:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"       : Email   "},es:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Necesita, como mnimo, un campo obligatorio: email o nmero de telfono"},de:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindestens ein Feld ist erforderlich: E-Mail-Adresse oder Telefonnummer"},fr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Au moins un champ est obligatoire : courriel ou numro de tlphone"},it:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Almeno un campo  obbligatorio: email o numero di telefono"},pt:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":" necessrio pelo menos um campo: email ou nmero de telefone"},ro:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Cel puin un cmp este obligatoriu: e-mail sau numr de telefon"},bg:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"    :    "},cs:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Je vyadovno alespo jedno pole: e-mail nebo telefonn slo"},el:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"   :    "},nl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Er is minimaal n veld vereist: e-mail of telefoonnummer"},pl:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Wymagane jest co najmniej jedno pole: adres e-mail lub numer telefonu"},sv:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Minst ett flt krvs: e-post eller telefonnummer"},tr:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"En az bir alan gereklidir: e-posta veya telefon numaras"},ar:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"    :     "},zh:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":""},da:{"control,validation,validationErrors,EMAIL_OR_PHONE_IS_REQUIRED":"Mindst t felt er pkrvet: e-mail eller telefonnummer"}},defaultProps:{adaptiveStyles:{desktop:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}],mobile:[{element:"host",styleAttributes:{width:"auto",minWidth:null,height:"35px",minHeight:"35px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"}},{element:"button",styleAttributes:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",flexDirection:"row",background:"rgb(0, 0, 0)",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"200px",borderTopRightRadius:"200px",borderBottomLeftRadius:"200px",borderBottomRightRadius:"200px",boxShadow:"none",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"20px",paddingRight:"20px",color:"rgba(255, 255, 255, 1)",textAlign:"center",lineHeight:"120%",fontWeight:"700",fontSize:"16px",textShadow:"none","--iconDisplay":"none","--iconSize":"20px","--iconOrder":"-1","--iconDistanceToText":"15px","--iconURL":"","--textDisplay":"inline"},hoverStyleAttributes:{background:"rgba(0, 0, 0, 0.2)"},classes:"cl-text-class-button cl-loop-animation-PULSE"}]},content:{text:"Subscribe",textContrastEnabled:!0}},metaDescription:{sortWeight:60,icon:"/claspo-editor/button-component-icon.svg",label:{en:"Button",ru:"",uk:"",es:"Botn",fr:"Bouton",de:"Schaltflche",it:"Pulsante",pt:"Boto",ro:"Buton",bg:"",cs:"Tlatko",el:"",nl:"Knop",pl:"Przycisk",sv:"Knapp",tr:"Buton",ar:"",zh:"",da:"Knap"}}};class Vn extends _n{constructor(){super(),this.manifest=xn,this.hideErrorTooltip=()=>{this.getRootElement().querySelector(".input-tooltip").style.visibility="hidden"},this.updateButtonTextNode=e=>{this.getRootElement().querySelector(".editable-text").innerHTML=e.content.text},this.mapStyleControlValuesToInnerButtonContent=()=>{let e=this.getRootElement().querySelector("button"),t=this.getRootElement().querySelector(".editable-text");e&&t&&(this.mapAlignValueToButtonContent(e),t.style.minWidth="20px",t.style.width="max-content",t.style.minHeight=e.style.fontSize,t.style.textAlign=e.style.textAlign,t.style.lineHeight=e.style.lineHeight,t.style.fontWeight=e.style.fontWeight,t.style.fontSize=e.style.fontSize,t.style.textShadow=e.style.textShadow,t.style.textTransform=e.style.textTransform,t.style.letterSpacing=e.style.letterSpacing,t.style.fontFamily=e.style.fontFamily)},this.mapAlignValueToButtonContent=e=>{"center"===e.style.textAlign&&(e.style.alignItems="center",e.style.justifyContent="center"),"start"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-start":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-start"),"end"===e.style.textAlign&&(e.style.alignItems="column"===e.style.flexDirection?"flex-end":"center",e.style.justifyContent="column"===e.style.flexDirection?"center":"flex-end")},this.createIconNode=e=>{if(!e.querySelector(".icon")){let t=document.createElement("p");t.classList.add("icon"),e.appendChild(t)}},this.showErrorTooltip=e=>{let t=this.getRootElement().querySelector(".main-container"),n=t.querySelector(".input-tooltip"),i=this.getTranslationsMap(this.manifest.i18n).translations,o=Object.keys(i).find((t=>t.includes(e)));this.utils.setInvalidStyle(t,n,o?i[o]:e)},this.getRootElement().innerHTML="\n<style>".concat("\n.main-container {\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: inherit;\n}\n\nbutton {\n  cursor: pointer;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  outline: none;\n  min-height: 20px;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  gap: var(--iconDistanceToText, 15px);\n}\n\n.editable-text {\n  display: var(--textDisplay, 'inline');\n}\n\n.input-tooltip {\n  visibility: hidden;\n  position: absolute;\n  right: -10px;\n  top: -10px;\n  z-index: 1;\n  border-radius: 100%;\n  width: 20px;\n  height: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none;   /* Chrome/Safari/Opera */\n  -khtml-user-select: none;    /* Konqueror */\n  -moz-user-select: none;      /* Firefox */\n  -ms-user-select: none;       /* Internet Explorer/Edge */\n  user-select: none;\n}\n\n.icon {\n  display: var(--iconDisplay, none);\n  width: var(--iconSize, 20px);\n  height: var(--iconSize, 20px);\n  order: var(--iconOrder, -1);\n  background: var(--iconURL);\n  margin-top: 0px;\n  margin-bottom: 0px;\n  background-size: cover;\n}\n\nbutton.focus-outline-defined:focus {\n  outline: var(--clFocusOutline);\n}\n",'</style>\n<div class="main-container">\n  <button cl-element="button">\n    <div class="editable-text" cl-inline-edit="content, text"></div>\n  </button>\n\n  <div class="input-tooltip">\n    <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M1.5 13.0604C1.5 19.4116 6.6481 24.5605 13.0075 24.5605C19.353 24.5605 24.5 19.4107 24.5 13.0604C24.5 6.70865 19.3531 1.55909 13.0075 1.55908C6.64806 1.55908 1.5 6.7077 1.5 13.0604ZM12.9775 17.9668C12.7032 17.9668 12.4807 17.7443 12.4807 17.47C12.4807 17.1956 12.7032 16.9732 12.9775 16.9732C13.2519 16.9732 13.4743 17.1956 13.4743 17.47C13.4743 17.7443 13.2519 17.9668 12.9775 17.9668ZM12.9775 13.4764C12.7032 13.4764 12.4807 13.254 12.4807 12.9796L12.4807 8.48924C12.4807 8.21487 12.7032 7.99245 12.9775 7.99245C13.2519 7.99245 13.4743 8.21487 13.4743 8.48924L13.4743 12.9796C13.4743 13.254 13.2519 13.4764 12.9775 13.4764Z" fill="#FF0000" stroke="white" stroke-width="2"></path>\n    </svg>\n  </div>\n</div>')}connectedCallback(){super.connectedCallback(),this.stylesUpdateObserver=new MutationObserver(this.mapStyleControlValuesToInnerButtonContent.bind(this)),this.stylesUpdateObserver.observe(this.getRootElement().querySelector("button"),{attributes:!0,childList:!1,subtree:!1});let e=this.getElement("button");if(e.addEventListener("click",(e=>{this.services.trackingService.send("FormButtonClick_[Name]")})),this.getProps().handlers){var t=this.getProps().handlers.find((e=>"CLICK"===e.type));if(t&&t.actions){let n=t.actions.find((e=>"SUBSCRIBE_CONTACT"===e.type));t=t.actions.find((e=>"REQUEST"===e.type)),n&&(this.invalidListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID",(()=>{this.showErrorTooltip("EMAIL_OR_PHONE_IS_REQUIRED")})),this.validListener=this.services.eventEmitter.on("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID",(()=>{this.hideErrorTooltip()}))),(n||t)&&this.services.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{e.disabled=!0}))}}this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.utils.setFocusOutline(this.getElement("button")),this.mapStyleControlValuesToInnerButtonContent(),e=this.getRootElement().querySelector("button"),this.updateButtonTextNode(t),this.createIconNode(e)}))}disconnectedCallback(){super.disconnectedCallback(),this.invalidListener&&this.invalidListener.off(),this.validListener&&this.validListener.off(),this.stylesUpdateObserver.disconnect()}}Vn.define={name:"sys-button",model:xn.name,manifest:xn};let Fn={COMPONENT_FOCUSED:"COMPONENT_FOCUSED",REMOVE_FOCUS:"REMOVE_FOCUS",SET_FOCUS:"SET_FOCUS",COMPONENT_MOUSE_MOVE:"COMPONENT_MOUSE_MOVE",COMPONENT_CLICKED:"COMPONENT_CLICKED",COMPONENT_DOUBLE_CLICKED:"COMPONENT_DOUBLE_CLICKED",COMPONENT_DRAGSTART:"COMPONENT_DRAGSTART",COMPONENT_DRAGEND:"COMPONENT_DRAGEND",COMPONENT_DRAGOVER:"COMPONENT_DRAGOVER",DOCUMENT_DROP:"DOCUMENT_DROP",SHOW_INLINE_EDIT:"SHOW_INLINE_EDIT",VIEW_COMPONENT_RESOURCES_LOADED:"VIEW_COMPONENT_RESOURCES_LOADED",FAILED_TO_LOAD_COMPONENT_RESOURCE:"FAILED_TO_LOAD_COMPONENT_RESOURCE"},kn={CONTAINER:"CONTAINER",TEXT:"TEXT",INPUT:"INPUT",BUTTON:"BUTTON",IMAGE:"IMAGE",FLOATING_IMAGE:"FLOATING_IMAGE",VIDEO:"VIDEO",COLUMN:"COLUMN"};var Un=Object.assign(Object.assign({},an),{name:"SysColumnComponent",componentType:"COLUMN",preventDraggable:!0,focusParentOnClick:!1,recursiveRemove:!0,version:"1.0.0",defaultProps:Object.assign(Object.assign({},an.defaultProps),{adaptiveStyles:y([{element:"host",styleAttributes:{display:"inline-flex",position:"relative",width:"auto",minWidth:"min-content",height:"100%",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"10px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"10px",paddingRight:"10px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px",borderStyle:"solid",borderTopWidth:"0px",borderTopColor:"rgb(0, 0, 0)",borderBottomWidth:"0px",borderBottomColor:"rgb(0, 0, 0)",borderLeftWidth:"0px",borderLeftColor:"rgb(0, 0, 0)",borderRightWidth:"0px",borderRightColor:"rgb(0, 0, 0)",borderTopLeftRadius:"0px",borderTopRightRadius:"0px",borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px",boxShadow:"none",flexBasis:"0"},classes:""}]),content:{size:1}}),propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"},hideSyncSelect:!0},{type:"CONTROL",name:"DISPLAY",elementProp:"styleAttributes",elementSubProp:"display",element:"host",params:{label:"DOCUMENT_DISPLAY_ON_MOBILE",displayPropertyValue:"inline-flex"}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"INDENTATION",elementProp:"styleAttributes",element:"host",params:{indentationType:"PADDING"},hideSyncSelect:!0}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"]},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}}]}],contextMenuModel:[{type:"CONTROL",name:"COMPONENT_OPERATIONS"},{type:"CONTROL",name:"FOCUS_PARENT_COMPONENT",params:{hideForEntryType:"VIEW"}}],metaDescription:null}),Bn=function(){let{flexGrow:e}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{path:[],type:Un.componentType,name:Un.name,version:Un.version,focusParentOnClick:!1,recursiveRemove:!0,preventDraggable:!0,props:Object.assign(Object.assign({},Un.defaultProps),{content:Object.assign(Object.assign({},Un.defaultProps.content),{size:e||"1"})}),children:[]}},Hn={name:"SysColumnsComponent",componentType:"COLUMNS",version:"1.0.0",contextMenuModel:[],floatingPanelModel:[],floatingControlsModel:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host",params:{mode:"horizontal"}},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"SIZE",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"MARGIN",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"CONTAINER_PADDING",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"PARENT_ALIGNMENT",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"COLUMNS_PROPORTIONS",propPath:["content","size"],params:{parent:!0}}]}],propertyPaneModel:{content:[{type:"GROUP",propPath:["adaptiveStyles","desktop"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"}]},{type:"GROUP",propPath:["adaptiveStyles","mobile"],children:[{type:"CONTROL",name:"WIDGET_LAYOUT_SELECT",displayCondition:"return sdk.appConfig.modelType !== 'RESPONSIVE' && sdk.component.type === 'VIEW' && ['DETACHED', 'FLOATING_BOX', 'CONTENT_LOCKER'].includes(sdk.layoutType) && sdk.widgetType !== 'AGE_VERIFY'"},{type:"CONTROL",name:"SIZE",element:"host",elementProp:"styleAttributes",params:{width:{options:["fixed","fill","hug"]},height:{options:["fixed","fill","hug"]}},displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"COLUMNS",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"SWITCH",propPath:["isResponsive"],params:{label:"ADAPTIVE_COLUMNS",boldLabel:!0}},{type:"CONTROL",name:"BACKGROUND",elementProp:"styleAttributes",element:"host"},{type:"CONTROL",name:"BORDERS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BOX_SHADOW",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"},{type:"CONTROL",name:"BORDER_RADIUS",elementProp:"styleAttributes",element:"host",displayCondition:"return sdk.component.type === 'VIEW' ? sdk.layoutType !== 'CONTENT_LOCKER' : true"}]}],general:[{type:"CONTROL",name:"ACTIONS",propPath:["handlers"],params:{origin:!0}}]},events:{dispatch:[],listen:[]},defaultProps:{adaptiveStyles:y([{element:"host",styleAttributes:{position:"relative",width:"100%",minWidth:"50px",height:"auto",gap:"10px"}}]),isResponsive:!0},presets:[{name:"100%",label:"",sortWeight:20,icon:"/claspo-editor/columns-frame-100.svg",overrides:{defaultChildren:[Bn()]}},{name:"50%-50%",label:"",sortWeight:10,icon:"/claspo-editor/columns-frame-50-50.svg",overrides:{defaultChildren:[Bn(),Bn()]}},{name:"33%-66%",label:"",sortWeight:0,icon:"/claspo-editor/columns-frame-33-66.svg",overrides:{defaultChildren:[Bn({flexGrow:1}),Bn({flexGrow:2})]}}],metaDescription:{sortWeight:70,icon:"/claspo-editor/container-component-icon.svg",label:{en:"Columns",ru:"",uk:"",es:"Columns",fr:"Columns",de:"Columns",it:"Columns",pt:"Columns",ro:"Columns",bg:"Columns",cs:"Columns",el:"Columns",nl:"Columns",pl:"Columns",sv:"Columns",tr:"Columns",ar:"Columns",zh:"Columns",da:"Columns"},defaultPreset:"50%-50%"}};class Gn extends _n{constructor(){super(),this.manifest=Hn,this.updateResponsiveStyles=()=>{this.getProps().isResponsive&&"mobile"===this.getEnvironment()?this.getRootElement().querySelector(".columns-container").style.flexDirection="column":this.getRootElement().querySelector(".columns-container").style.flexDirection="row"},this.getRootElement().innerHTML="\n      ".concat("\n  <style>\n    :host {\n      position: relative;\n      min-width: 50px;\n      min-height: 50px; \n      border-radius: inherit;\n      display:flex;\n    }\n\n    .columns-container {\n      height: auto;\n      min-height: 50px; \n      width: 100%;\n      min-width: 50px;\n      display: flex;\n      gap: inherit;\n    }\n  </style>\n  ","\n      <div ").concat(i("render-outlet"),' class="columns-container"></div>\n    ')}connectedCallback(){super.connectedCallback(),this.observeProps(((e,t)=>{this.applyAutoAdaptiveStyles(t.adaptiveStyles),this.updateResponsiveStyles()})),this.observeEnvironment(((e,t)=>{this.updateResponsiveStyles()}))}}Gn.define={name:"sys-columns",model:Hn.name,manifest:Hn};class Wn extends Tn{constructor(){super(...arguments),this.manifest=Un,this.updateResponsiveStyles=()=>{var e,t;let n=null===(t=null===(e=this.getParentComponent())||void 0===e?void 0:e.getProps())||void 0===t?void 0:t.isResponsive;e=[...this.shadowRoot.children].filter((e=>e.hasAttribute("cl-element")));let i=this.getHostElement().style;e.length?i.minWidth="min-content":(["paddingTop","paddingBottom","paddingLeft","paddingRight","padding"].map((e=>i[e])).map((e=>e&&parseFloat(e))).some(Boolean)&&(i.minWidth="min-content"),i.minWidth="20px"),"mobile"===this.getEnvironment()&&n&&(e.length?i.minHeight="auto":i.background.includes("url")?i.minHeight="150px":e.length||(i.minHeight="50px"))},this.updateEmptyState=()=>{let e=!(Array.from(this.getRootElement().children).filter((e=>"STYLE"!==e.tagName&&"SCRIPT"!==e.tagName))||[]).length;this.setAttribute(i("empty"),e)},this.watchChildren=()=>{let e=this;this.mutationObserver=new MutationObserver((function(){e.updateEmptyState(),e.updateResponsiveStyles()})),this.mutationObserver.observe(this.getRootElement(),{childList:!0})},this.processSize=e=>{var t;e=null!==(t=null!=e?e:this.style.flexGrow)&&void 0!==t?t:"1",this.style.flexGrow=e},this.processStyles=()=>{this.innerHTML+='\n      <style>\n      [cl-component="'.concat(this.componentName,'"] {\n        position: relative;\n        min-width: 50px;\n        min-height: 50px;\n      }\n      </style>')}}connectedCallback(){var e;super.connectedCallback(),this.updateEmptyState(),this.watchChildren(),this.observeEnvironment((()=>{this.updateResponsiveStyles()})),this.observeProps(((e,t)=>{var n;this.updateResponsiveStyles(),this.processSize(null===(n=t.content)||void 0===n?void 0:n.size)})),null===(e=this.getParentComponent())||void 0===e||e.observeProps((()=>{this.updateResponsiveStyles()}))}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this.mutationObserver)||void 0===e||e.disconnect()}}Wn.define={name:"sys-column",model:Un.name,manifest:Un};var jn=new class{constructor(){this.classes=[Rn,bn,Gn,Wn,In,Pn,Vn],this.modelNameToTagMap=this.classes.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.define.model]:t.define.name})),{})}register(e,t){this.decorator=e,this.classes.forEach((e=>this.registerComponent(e,t)))}registerComponent(e,t){let n=this.getComponentTagName(e.define.name,t);customElements.get(n)||(e="STATIC"===t?S(e):N(e),customElements.define(n,e),this.modelNameToTagMap[e.define.model]=e.define.name)}getComponent(e,t){let n=(i=e,i.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()))).replace("-component","");var i;if(t=this.getComponentTagName(n,t),!(t=customElements.get(t)))throw Error("Not defined or loaded component: "+e);return t}getComponentTagName(e,t){return t=t.toLowerCase(),"".concat(e,"-").concat(t)}};class zn{constructor(e,t,n,i,o,r,s,a,l,c,d,h,u,m){this.state=e,this.eventEmitter=t,this.form=n,this.documentModel=i,this.resizeListener=o,this.config=r,this.commonStylesService=s,this.trackingService=a,this.layoutType=l,this.actionFactory=c,this.actionRegister=d,this.prizePoolFactory=h,this.context=u,this.mergeTagsProcessorFactory=m}create(e,t){let n=new(this.getComponentClass(e,t)),o=i("content-container");if(e.type===Tt.VIEW&&"SysColumnsComponent"!==e.name){let e=document.createElement("div");e.setAttribute(o,""),e.style.display="inherit",e.style.gap="inherit",e.style.justifyContent="inherit",e.style.alignItems="inherit",e.style.flexDirection="inherit",e.style.width="100%",e.style.height="100%",n.getRootElement().appendChild(e),n.contentContainer=e}return n.setAttribute(i("type"),e.type),n.setAttribute(i("id"),e.id),n.setAttribute(i("component"),e.name),n.setAttribute(i("path"),e.path),n.setAttribute(i("element"),"host"),"UPDATING"===t&&this.commonStylesService.setStyles("* {cursor:pointer !important;} *:focus {outline: none !important;}"),this.processStyles(n.getRootElement(),e,t),Lt.applyHostStyles(e.type,n,e,this.layoutType),n}getComponentClass(e,t){return jn.getComponent(e.name,t)}constructProps(e,t){return{model:e,documentModel:this.documentModel,resizeListener:this.resizeListener,config:this.config,layoutType:this.layoutType,viewResourceManager:t,services:{state:this.state,eventEmitter:this.eventEmitter,form:this.form,config:this.config,trackingService:this.trackingService,actionFactory:this.actionFactory,actionRegister:this.actionRegister,prizePoolFactory:this.prizePoolFactory,context:this.context,mergeTagsProcessorFactory:this.mergeTagsProcessorFactory},utils:new sn}}processStyles(e,t,n){let i=this.commonStylesService.getStyles(),o=document.createElement("style");this.constructAnimationStyles(e,t,n),o.textContent=i,e.appendChild(o)}constructAnimationStyles(e,t,n){"UPDATING"!==n&&(t=wt.constructAnimationStylesByTypes(Pt.extractLoopAnimationsFromAdaptiveStylesClasses(t)))&&((n=document.createElement("style")).textContent=t,e.appendChild(n))}}class Kn{constructor(e){this._onComponentResourcesLoaded=e=>{this.componentResourcesMap.delete(e),this.viewHasPendingResources()||this.systemEventEmitter.emit(Fn.VIEW_COMPONENT_RESOURCES_LOADED)},this.systemEventEmitter=e,this.componentResourcesMap=new Map,this.systemEventEmitter.on("COMPONENT_RESOURCES_LOADED",this._onComponentResourcesLoaded)}registerComponent(e,t){this.componentResourcesMap.set(e,t)}viewHasPendingResources(){return 0<[...this.componentResourcesMap.entries()].filter((e=>([,e]=e,0<e.getPending().count()))).length}}class Xn{constructor(e,t,n,i,o){this.isMobile=null,this.resizeListener=t,this.documentModel=e,this.factory=i,this.eventEmitter=o,this.viewResourceManager=new Kn(this.eventEmitter),this.destroy=this.destroy.bind(this)}render(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"STATIC",o=this.factory.create(e,n,this.viewResourceManager);if(this.documentModel.setComponentRef(e.id,o),e.componentRef=o,e.type===Tt.VIEW&&"SysColumnsComponent"===e.name){let t=i("content-container"),n=this.getRenderOutlet(e.componentRef.getRootElement());null==n||n.setAttribute(t,"")}return e.children.forEach((t=>{this.renderComponent(e,t,n)})),Promise.resolve().then((()=>{this.viewResourceManager.viewHasPendingResources()||this.eventEmitter.emit(Fn.VIEW_COMPONENT_RESOURCES_LOADED)})),o}destroy(e){var t;null!==(t=e.model)&&void 0!==t&&t.path&&this.documentModel.destroyView(e.model.path[0])}renderComponent(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Ct.INSIDE,o=this.factory.create(t,n,this.viewResourceManager);this.documentModel.setComponentRef(t.id,o);var r=e.componentRef.getRootElement();return r=t.type===Tt.FLOATING_IMAGE?r:this.selectElementToAppendTo(e.componentRef.contentContainer)||this.selectElementToAppendTo(r),i===Ct.INSIDE?o.connect(i,r,o):o.connect(i,e.componentRef,t.componentRef),t.children&&t.children.forEach((e=>this.renderComponent(t,e,n))),t}selectElementToAppendTo(e){return e?this.getRenderOutlet(e)||e:null}getRenderOutlet(e){return e.querySelector("[".concat(i("render-outlet"),"]"))}}let Yn=["DOCUMENT_VIEW_TYPE_SUCCESS","DOCUMENT_VIEW_TYPE_SUBSCRIBED","DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST","DOCUMENT_VIEW_TYPE_ERROR","REQUEST_FORM_VIEW_TYPE_SUCCESS"];class qn{constructor(e,t,n,i,o,r,s,a,l){this.id=n.id,this.params=n.params,this.form=t,this.eventEmitter=e,this.httpClient=i,this.configService=o,this.formEventsListener=null,this.tracking=r,this.stateService=s,this.context=a,this.getServices=l,this.category="SUBMIT"}getTrackingMessageBeforeSentData(){return""}getTrackingMessageByStatus(e){return""}execute(e,t,n,i){if(this.formEventsListener&&this.formEventsListener.off(),!this.form.submitQueuedAfterPending||!0===e){if(!this.form.preventSubmit)return new Promise((o=>{if(!this.form.isPending())return this.form.submitQueuedAfterPending=!1,this.submit(!0===e?t:o,n,i);this.form.submitQueuedAfterPending=!0,setTimeout((()=>this.execute(!0,o)),500)}));this.form.submitQueuedAfterPending=!1}}submit(e,t,n){var i=this.getServices().viewRouter._getCurrentViewIndex();let o=0<this.getServices().documentModel.getViews().slice(i+1).filter((e=>!Yn.includes(e.label))).length,r=Object.assign(Object.assign({},this.params),n);this.form.markAsTouched(),this.stateService.getState().emitActionOnSubmit&&this.eventEmitter.emit(this.stateService.getState().emitActionOnSubmit.eventName),this.stateService.getState().interceptSubmitActions&&!t||(this.form.isValid()||r.skipValidation?(t=this.form.getControlsMap(),o?(this.goToView(i+1),e(!0)):(i=this.context.getKVMap(),this.eventEmitter.emit("CONTACT_DATA_SUBMIT"),this.getTrackingMessageBeforeSentData()&&this.tracking.send("FormFinish_[Name]"),this.httpClient.execute(this.configService.getConfig("subscribeContactUrl"),"POST",this.constructRequestPayload(i,t),this.constructRequestHeaders()).then((e=>e.json().then((t=>429===e.status?{state:"TOO_MANY_REQUESTS"}:{contactId:t.contactId,state:t&&t.next&&t.next.type}))),(()=>({state:"ERROR"}))).then((t=>{let n=this.getTrackingMessageByStatus(t.state);switch(t.state){case"SUCCESS":n&&this.tracking.send(n),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUCCESS"===e.label||"DOCUMENT_VIEW_TYPE_SUCCESSFUL_REQUEST"===e.label||"REQUEST_FORM_VIEW_TYPE_SUCCESS"===e.label)));break;case"ALREADY_SUBSCRIBED":n&&this.tracking.send(n),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_SUBSCRIBED"===e.label)));break;case"ERROR":n&&this.tracking.send(n),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label)));break;case"TOO_MANY_REQUESTS":n&&this.tracking.send(n),this.goToView(this.getServices().documentModel.getViews().findIndex((e=>"DOCUMENT_VIEW_TYPE_ERROR"===e.label))),this.eventEmitter.emit("TOO_MANY_REQUESTS")}t.contactId&&"0"!==t.contactId&&this.eventEmitter.emit("CONTACT_ID_WAS_RECEIVED",t.contactId),e("SUCCESS"===t.state||"ALREADY_SUBSCRIBED"===t.state)})).catch((()=>{this.goToView(r.viewIndexOnError),e(!1)})))):(this.eventEmitter.emit("INVALID_CONTACT_DATA_SUBMIT_ATTEMPT"),e(!1)))}constructDataToSent(e,t){let n=Object.assign({},e);return Object.keys(t).forEach((e=>{if(e.startsWith("clConsentId")){if(!e.endsWith("_label")){var i={value:t[e]};t["".concat(e,"_label")]&&(i.text=t["".concat(e,"_label")]),n.consents?n.consents[e]=i:n.consents={[e]:i}}}else n[e]=t[e]})),n}constructRequestPayload(e,t){return e={data:this.constructDataToSent(e,t),referrer:window.location.href,triggeredBy:this.configService.getConfig("triggeredBy")},this.configService.getConfig("widgetDebugMode")&&(e.ignoreTracking=!0),e}constructRequestHeaders(){let e={},t=this.configService.getConfig("clCustomerId");return t&&Object.assign(e,{"cl-customer-id":t}),e}goToView(e){this.eventEmitter.emit("GO_TO_VIEW",e)}}class Qn extends qn{constructor(){super(...arguments),this.type="SUBSCRIBE_CONTACT"}formDataValidation(e){return!(!e.email&&!e.phone)||(this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_INVALID"),this.formEventsListener=this.form.on(vt.validationStatusChanged,(()=>{this.eventEmitter.emit("SET_SUBSCRIBE_CONTACT_BUTTON_AS_VALID")})),!1)}getTrackingMessageBeforeSentData(){return"FormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"FormSuccessSubscribe_[Name]",ALREADY_SUBSCRIBED:"FormAlreadySubscribe_[Name]",ERROR:"FormErrorSubscribe_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class Zn extends qn{constructor(){super(...arguments),this.type="REQUEST"}getTrackingMessageBeforeSentData(){return"RequestFormFinish_[Name]"}getTrackingMessageByStatus(e){return{SUCCESS:"RequestFormSuccess_[Name]",ERROR:"RequestFormError_[Name]",TOO_MANY_REQUESTS:"RequestFormError_[Name]"}[e]||""}}class Jn{constructor(e,t){this.type="DISPATCH_EVENT",this.eventEmitter=e,this.config=t}execute(e){return this.eventEmitter.emit(this.config.params.eventName,null),Promise.resolve(!0)}}class $n{constructor(e){this.type="GO_TO_PREVIOUS_VIEW",this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class ei{constructor(e){this.type="GO_TO_NEXT_VIEW",this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type),Promise.resolve(!0)}}class ti{constructor(e){this.configService=e}track(e,t){if(!this.configService.getConfig("widgetDebugMode")){var n=this.configService.getConfig("formVariantId");if(n){e=+n.split("v")[1];let i=+n.split("v")[0].replace("f","");n=this.configService.getConfig("hostUrl")+"forms/v1/event";let o=this.configService.getConfig("clCustomerId"),r=this.configService.getConfig("clContactId"),s=this.configService.getConfig("triggeredBy"),a=this.configService.getConfig("interactionId"),l=this.configService.getConfig("revision"),c=this.configService.getConfig("appearanceRevision"),d=this.configService.getConfig("browserLanguage"),h=this.configService.getConfig("browserLanguage"),u=this.configService.getConfig("appearanceLanguage");t=btoa(JSON.stringify({formId:i,variantId:e,clCustomerId:o,contactId:r,iid:a,revision:l,appearanceRevision:c,type:"click",referrer:window.location.href,params:t,triggeredBy:s,lang:d,browserLanguage:h,appearanceLanguage:u}));try{navigator.sendBeacon(n,t)}catch(e){mn.log(e)}}}}}class ni extends ti{constructor(e,t,n){super(n),this.type="GO_TO_VIEW",this.eventEmitter=e,this.config=t}execute(){return this.eventEmitter.emit(this.type,this.config.params.viewId||this.config.params.viewIndex),this.config.params.trackClick&&this.track("GoToViewAction",this.config.params.trackClickParams),Promise.resolve(!0)}}class ii{constructor(e,t){this.type="SHOW_WIDGET",this.params=t.params||{},this.eventEmitter=e}execute(){return this.eventEmitter.emit(this.type,this.params),Promise.resolve(!0)}}class oi extends ti{constructor(e,t){super(t),this.type="OPEN_LINK",this.params=e.params,this.configService=t}execute(e,t){return t.stopPropagation(),this.track("OpenLinkAction",this.params.trackClickParams),t=this.params.link,e=this.configService.getConfig("utmTag"),this.params.tagsEnabled&&null!=e&&e.enabled&&(t=oi.getDynamicUtmParamsMap(this.configService),e=oi.getUtmTags(e,t),t=oi.appendQueryParamsToLink(this.params.link,e)),window.open(t,this.params.target),Promise.resolve(!0)}static appendQueryParamsToLink(e,t){let n=new URL(e);return Object.keys(t).forEach((e=>{n.searchParams.has(e)||n.searchParams.append(e,t[e])})),n.href}static getUtmTags(e,t){let n={},i=new Map([["utmSource","utm_source"],["utmMedium","utm_medium"],["utmCampaign","utm_campaign"],["utmContent","utm_content"],["utmTerm","utm_term"]]);return["utmSource","utmMedium","utmCampaign","utmContent","utmTerm"].filter((t=>void 0!==(null==e?void 0:e[t]))).forEach((o=>{let r=i.get(o);o=t.has(e[o])?t.get(e[o]):encodeURIComponent(e[o]),n[r]=o})),null!=e&&e.customTagsEnabled&&Object.keys((null==e?void 0:e.utmCustomTags)||{}).filter((t=>{var n;return void 0!==(null===(n=null==e?void 0:e.utmCustomTags)||void 0===n?void 0:n[t])})).forEach((t=>n[t]=encodeURIComponent(e.utmCustomTags[t]))),n}static getDynamicUtmParamsMap(e){return new Map([["$widgetId",oi.normalizeUtmParam(e.getConfig("widgetId"))],["$widgetName",encodeURIComponent(oi.normalizeUtmParam(e.getConfig("widgetName")))],["$widgetType",oi.normalizeUtmParam(e.getConfig("type"))],["$widgetLang",oi.normalizeUtmParam(e.getConfig("browserLanguage"))],["$contactId",encodeURIComponent(oi.normalizeUtmParam(e.getConfig("clContactId")))]])}static normalizeUtmParam(e){return null==e?"":String(e)}}class ri extends ti{constructor(e,t,n){super(n),this.type="CLOSE_WIDGET",this.params=t.params,this.eventEmitter=e,this.configService=n}execute(){return new Promise((e=>{this.eventEmitter.emit(this.type,(()=>{e(!0)})),this.track("CloseWidgetAction",this.params.trackClickParams)}))}}class si{constructor(e,t,n,i,o,r,s){this.eventEmitter=e,this.form=t,this.configService=n,this.tracking=i,this.stateService=o,this.context=r,this.getServices=s}get(e){switch(e.type){case"SUBSCRIBE_CONTACT":return new Qn(this.eventEmitter,this.form,e,gn,this.configService,this.tracking,this.stateService,this.context,this.getServices);case"REQUEST":return new Zn(this.eventEmitter,this.form,e,gn,this.configService,this.tracking,this.stateService,this.context,this.getServices);case"DISPATCH_EVENT":return new Jn(this.eventEmitter,e);case"GO_TO_VIEW":return new ni(this.eventEmitter,e,this.configService);case"GO_TO_PREVIOUS_VIEW":return new $n(this.eventEmitter);case"GO_TO_NEXT_VIEW":return new ei(this.eventEmitter);case"SHOW_WIDGET":return new ii(this.eventEmitter,e);case"OPEN_LINK":return new oi(e,this.configService);case"CLOSE_WIDGET":return new ri(this.eventEmitter,e,this.configService);default:throw Error("Not supported action type ".concat(e.type))}}}class ai{calculateFromWeights(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e3,n=e.map((e=>Object.assign(Object.assign({},e),{weight:e.weight*t})));var i=R(n.map((e=>parseFloat(e.weight))));i=Math.floor(Math.random()*(i+1-1))+1;let o=this._buildRanges(n),r=this._getRangeByWeight(o,i);return n.find((e=>e.id===r.id))}_getRangeByWeight(e,t){return e.find((e=>t>=e.from&&t<=e.to))}_buildRanges(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];if(0===n)t.push({from:1,to:parseFloat(i.weight),id:i.id});else{let e=t[t.length-1].to,n=e+parseFloat(i.weight);t.push({from:e+1,to:n,id:i.id})}}return t}}class li{constructor(e,t,n){this.instanceModel=e,this.httpClient=t,this.configService=n,this.configService.getConfig("prizePoolModels")&&(e=this.configService.getConfig("prizePoolModels").find((e=>e.id===this.instanceModel.id)))&&(this.instanceModel=e),this.prizeOption=null,this.storageService=this.configService.getConfig().storage,this.randomDistributor=new ai}async load(){if("MANUAL"===this.instanceModel.sourceType&&!this.instanceModel.options){let e="".concat(this.configService.getConfig("hostUrl"),"forms/v1/prize/pool/").concat(this.instanceModel.id);this.instanceModel=await this.httpClient.execute(e,"GET").then((e=>e.json()))}}getModel(){return this.instanceModel}async getPrize(){var e,t;if(!this.instanceModel)return null;if("FIXED"===this.instanceModel.model)return this.instanceModel.data;if("MANUAL"===this.instanceModel.sourceType){let n=null===(e=this.storageService)||void 0===e?void 0:e.get(this.instanceModel.id);return e=n&&this.instanceModel.options.find((e=>e.id===n)),n&&e?this.mapPrizeOption(e):(this.prizeOption=this._calculatePrize(),null===(t=this.storageService)||void 0===t||t.set(this.instanceModel.id,this.prizeOption.id),this.mapPrizeOption(this.prizeOption))}}submitPrize(){}mapPrizeOption(e){let t=this._mapLabelSuffix(e.value,e.valueType);return{id:e.id,label:t,value:e.code}}_calculatePrize(){let e=R(this.instanceModel.options.map((e=>parseFloat(e.weight))));return this.randomDistributor.calculateFromWeights(this.instanceModel.options,e)}_mapLabelSuffix(e,t){return"DISCOUNT_PERCENTAGE"===t?"".concat(e,"%"):e}}class ci{constructor(e,t){this.httpClient=e,this.configService=t}get(e){return new li(e,this.httpClient,this.configService)}}class di{constructor(e){this.eventEmitter=e,this.registeredActions=[],this.eventEmitter.on("EXECUTE_ACTION_BY_PREDICATE",(e=>{var t;"function"==typeof e.predicate&&(null===(t=this.registeredActions.find(e.predicate))||void 0===t||t.execute(void 0,void 0,!0,e.overrideParams))}))}register(e){this.registeredActions.push(e)}getRegisteredActions(){return this.registeredActions}}class hi extends Et{constructor(e,t,n){super(),this.addRecord=(e,t)=>{e=this.data.addRecord(e,t),this.subscribeToSource(t),this.emit("RECORD_ADDED",e)},this.updateRecord=(e,t)=>{null!=(e=this.data.getRecord(e))&&e.update(t)&&this.emit("RECORD_UPDATED",e.getValue())},this.getRecord=e=>this.data.getRecord(e),this.sourceRegistry=e,this.data=t,this.isStaticMode=n,this.initSources()}getRegistry(){return this.sourceRegistry}deleteRecord(e){let t=this.data.getRecord(e);t&&!this.isStaticMode&&(this.data.deleteRecord(e),this.emit("RECORD_DELETED",t))}getRecordsMap(){return this.data.getRecordsMap()}getKVMap(){return this.data.getKVMap()}initSources(){this.sourceRegistry.registerInitialSources(),this.sourceRegistry.getSources().forEach((e=>{e=e.getValue(),!this.isStaticMode&&e&&Object.keys(e).length&&Object.entries(e).forEach((e=>{let[t,n]=e;this.addRecord(t,n)}))}))}subscribeToSource(e){(e=this.sourceRegistry.getSource(e.sourceId))&&!e.isSubscribed()&&e.subscribe((e=>{let{value:t,componentId:n}=e;this.updateRecord(n,{value:t})}))}}class ui{constructor(e){this.context=e}destroy(){}process(e,t,n){this.element=e,this.mergeTags=t,this.componentId=n,this.mergeTags&&0!==Object.keys(this.mergeTags).length&&this.element.childNodes.forEach((e=>{if(e.nodeType!==Node.TEXT_NODE&&"MERGE_TAG"===e.getAttribute("cl-type")){var t=e.getAttribute("cl-id");(t=this.mergeTags[t])&&this.processSingleMergeTag(e,t)}}))}processSingleMergeTag(e,t){throw Error("BaseMergeTagsProcessor: processSingleMergeTag is not implemented")}}class mi extends ui{processSingleMergeTag(e,t){let n=this.context.getRecord(t.id),i=this.context.getRegistry().getSource(t.sourceId);var o,r=this.context.getKVMap();let s;!n&&r[t.id]&&(s=r[t.id]),i&&(s=(null==(r=i.getValue(null==n?void 0:n.value.id))?void 0:r.value)||s,r&&"function"==typeof r.processor&&(o=r.processor(i,t))),o=o||s||(null==n?void 0:n.value.value)||t.fallbackValue,n||this.context.addRecord(t.id,Object.assign(Object.assign({recordKey:t.id,id:t.id,sourceId:t.sourceId},i?i.getValue(t.id):{}),{value:o})),e.style.fontFamily="inherit",L(e).textContent=o}}class pi extends ui{constructor(e){super(e),this.contextSubscriptions=[this.context.on("RECORD_ADDED",this._handleContextEvents.bind(this)),this.context.on("RECORD_UPDATED",this._handleContextEvents.bind(this)),this.context.on("RECORD_DELETED",this._handleContextEvents.bind(this))]}destroy(){super.destroy(),this.contextSubscriptions&&this.contextSubscriptions.forEach((e=>e.off()))}processSingleMergeTag(e,t){if(e){var n=this.context.getRecord(t.id);e.style.fontFamily="inherit",L(e).textContent=t.exampleValue,n?e.classList.remove("tag-deleted"):e.classList.add("tag-deleted")}}_handleContextEvents(e){var t;(e=null===(t=this.mergeTags)||void 0===t?void 0:t[e.key])&&this.processSingleMergeTag(this.element.querySelector('[cl-id="'.concat(e.id,'"]')),e)}}class gi{constructor(e,t){this.isStaticMode=e,this.context=t}create(){return this.isStaticMode?new mi(this.context):new pi(this.context)}}class Ei{constructor(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.id=e,this.subscriptionEntry=t,this.config=n,this.subscribed=!1}subscribe(e){this.subscribed=!0,this.subscriptionEntry.subscribe(e)}getValue(e){return this.subscriptionEntry.getValue(e)}isSubscribed(){return this.subscribed}}class vi{constructor(e){this.formService=e}subscribe(e){this.formService.on(yt.valueChanged,(t=>{e({key:t.getName(),value:t.getValue(),componentId:t.getComponentId()})})),this.formService.on(yt.controlRegistered,(t=>{e({key:t.getName(),value:t.getValue()})}))}getValue(e){var t;return e?null===(t=this.formService.getControl(e))||void 0===t?void 0:t.getValue():this.formService.getControlsMap()}}class fi{constructor(e){this.registeredSourcesMap={},this.sources=[new Ei("FORM",new vi(e))]}registerSource(e){if(this.registeredSourcesMap[e.id])throw Error("Source with id ".concat(e.id," already registered"));return this.registeredSourcesMap[e.id]=e}getSource(e){return this.registeredSourcesMap[e]}getSources(){return Object.values(this.registeredSourcesMap)}registerInitialSources(){return this.sources.map((e=>this.registerSource(e)))}}class yi{constructor(e,t){this.key=e,this.value=t}getKey(){return this.key}getValue(){return this.value}update(e){let t=JSON.stringify(this.value);return e=Object.assign(Object.assign({},this.value),e),t!==JSON.stringify(e)&&(this.value=e,!0)}}class _i{constructor(){this.records={}}getRecord(e){return this.records[e]}addRecord(e,t){return t=new yi(e,t),this.records[e]=t}deleteRecord(e){let t=this.records,n=t[e];e=["symbol"==typeof e?e:e+""];var i,o={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&0>e.indexOf(i)&&(o[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)0>e.indexOf(i[r])&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(o[i[r]]=t[i[r]])}return this.records=o,n}getRecordsMap(){return this.records}getKVMap(){return Object.keys(this.records).reduce(((e,t)=>(e[(t=this.records[t]).value.id]=t.value.value,e)),{})}}class Ti{constructor(e,t,n,i,o,r,s,a,l){var c;e=new Ot(e);var d=!o;o=d?new Nt(e):new At(e,o);let h=new mt,u=new St(t),m=new Lt;m.setStyles(r);let p=null!==(c=t.componentFactoryClass)&&void 0!==c?c:zn;c=new Et,r=new _t(i);var g=new fi(r),E=new _i;g=new hi(g,E,d),l=new(null!=l?l:si)(c,r,u,i,h,g,(()=>this.services)),E=new di(c);let v=new ci(gn,u);s=new p(h,c,r,e,o,u,m,i,s,l,E,v,g,d=new gi(d,g)),t=new Xn(e,o,t,s,c),this.services={documentService:new Rt(e,t,a),componentResolver:n,documentModel:e,state:h,form:r,eventEmitter:c,config:u,resizeListener:o,componentFactory:s,viewRenderer:t,commonStylesService:m,tracking:i,actionFactory:l,actionRegister:E,prizePoolFactory:v,context:g,mergeTagsProcessorFactory:d}}destroy(){Object.keys(this.services).filter((e=>"viewRenderer"!==e)).forEach((e=>this.services[e]&&this.services[e].destroy&&this.services[e].destroy()))}}class bi{constructor(e,t,n,i,o){this.eventEmitter=e,this.documentModel=t,this.viewRenderer=n,this.optionalDocumentStyles=i,this.services=o,this.currentViewComponentRef=this.currentViewIndex=null,this.eventEmitter.on("TOO_MANY_REQUESTS",(()=>{this.viewDestroy(),this.documentContainer.innerText="Too many requests"}))}_getCurrentViewIndex(){return this.currentViewIndex}start(){return this.documentContainer=window.document.createElement("div"),this.documentContainer.setAttribute("cl-document",""),this.optionalDocumentStyles&&Object.keys(this.optionalDocumentStyles).forEach((e=>{this.documentContainer.style[e]=this.optionalDocumentStyles[e]})),this.navigate(0),this.eventEmitter.on("GO_TO_VIEW",(e=>{if("number"==typeof e)this.navigate(e);else{let t=this.documentModel.getModel().views.findIndex((t=>t.id===e));-1===t?this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{viewPointer:e}):this.navigate(t)}})),this.eventEmitter.on("GO_TO_PREVIOUS_VIEW",(()=>{0<this._getCurrentViewIndex()&&this.navigate(this._getCurrentViewIndex()-1)})),this.eventEmitter.on("GO_TO_NEXT_VIEW",(()=>{this.documentModel.getModel().views[this._getCurrentViewIndex()+1]&&this.navigate(this._getCurrentViewIndex()+1)})),this.eventEmitter.on("CONTACT_DATA_SUBMIT",(()=>{this.contactDataSubmitted=!0})),this.documentContainer}destroy(){this.viewDestroy(),this.documentContainer&&this.documentContainer.remove()}navigate(e){let t=this.documentModel.getView(e),n=this.currentViewIndex;if(this.currentViewIndex!==e){if(!t)throw this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{navigateTo:e}),Error("View was not found by index: "+e);setTimeout((()=>{let e=Yn.includes(t.label),i=this.contactDataSubmitted,o=0<this.services.form.getControlsAsArray().length;e&&o&&!i&&(this.eventEmitter.emit("WIDGET_NAVIGATION_STATE_NOT_FOUND",{toSystemStateWithoutSubmitFromIndex:n,ctx:this.services.context.getKVMap()}),this.services.actionFactory.get({type:"REQUEST"}).execute(void 0,void 0,!0,{skipValidation:!0}))}),300);var i=this.viewRenderer.render(t,e);this.viewDestroy(),this.documentContainer.appendChild(i),this.currentViewComponentRef=i,this.currentViewIndex=e}}viewDestroy(){this.currentViewComponentRef&&this.viewRenderer.destroy(this.currentViewComponentRef)}getDocumentContainer(){return this.documentContainer}}class Ci{static getValueByPropPath(e,t){let n=e||{};return t.forEach((e=>{n=null==n?void 0:n[e]})),n}static transformPropPathStringToArray(e){return e.split(",")}static constructDynamicPropPath(e,t){let n=[];return e.filter((e=>e.includes("[id]"))).length?(e.forEach((e=>{var i=e.split(",[id");if(!(i=Ci.getValueByPropPath(t.props,Ci.transformPropPathStringToArray(i[0]))))return null;Object.keys(i).forEach((t=>{n.push(e.replace("[id]",t))})),n=Ci.constructDynamicPropPath(n,t)})),n):e}static applyTranslationObjectToComponentsIfNeeded(e,t,n){let i=e.views;return n?(n=JSON.parse(n||"{}"),Object.keys(n).length?(e.views=this.applyTranslationObjectToComponents(i,t,n),e):e):e}static setProp(e,t,n){e[t.id]&&(e=e[t.id][n])&&(t.props=this._setValueByPropPath({props:t.props,propPath:n.split(","),value:e}))}static applyTranslationObjectToComponents(e,t,n){let i=e=>{const o=t.find((t=>t.name===e.name&&t.version===e.version));o&&o.i18nPropPaths&&o.i18nPropPaths.length&&o.i18nPropPaths.forEach((t=>{t.includes("[id]")?Ci.constructDynamicPropPath(["".concat(t)],e).forEach((t=>{Ci.setProp(n,e,t)})):Ci.setProp(n,e,t)})),e.children&&e.children.length&&e.children.forEach(i)};return e.forEach(i),e}static _setValueByPropPath(e){let t=e.props;var n=e.propPath;let i=e.property;return i||e.element&&e.elementProp||(i=n.slice(-1)[0],n=n.slice(0,-1)),n.forEach((e=>{t=t&&t[e]})),e.element&&e.elementProp?(n=t.findIndex((t=>t.element===e.element)),"object"==typeof t[n][e.elementProp]?t.splice(n,1,Object.assign(Object.assign({},t[n]),{[e.elementProp]:Object.assign(Object.assign({},t[n][e.elementProp]),{[i]:e.value})})):t.splice(n,1,Object.assign(Object.assign({},t[n]),{[e.elementProp]:e.value})),e.props):(t[i]=e.value,e.props)}}class Ii{constructor(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0,r=5<arguments.length?arguments[5]:void 0;var s;this.entryModuleType="STATIC",this.componentResolver=t,this.config=Object.assign(Object.assign({},n),{entryModuleType:this.entryModuleType}),this.documentJson=e,this.translations=i,this.viewRouter=this.viewRenderer=this.compositionRoot=null,this.trackingService=o||{send:()=>{},trackClick:()=>{}},this.layoutType=r,(null!==(s=this.config.componentRegister)&&void 0!==s?s:jn).register(S,this.entryModuleType)}init(e){this.documentJson=Ci.applyTranslationObjectToComponentsIfNeeded(JSON.parse(JSON.stringify(this.documentJson)),this.componentResolver.getComponentManifests(),this.translations),e=new Ti(this.documentJson,this.config,this.componentResolver,this.trackingService,null,"",this.layoutType,this.entryModuleType,e);let t=new bi(e.services.eventEmitter,e.services.documentModel,e.services.viewRenderer,this.config&&this.config.optionalDocumentStyles,e.services);e.services.viewRouter=t,this.compositionRoot=e,this.viewRenderer=e.services.viewRenderer,this.componentFactory=e.services.componentFactory,this.viewRouter=t;let n=this.compositionRoot.services.documentModel.getShared().cssVars;return Promise.resolve().then((()=>ut.override(n,this.viewRouter.getDocumentContainer()))),t.start()}destroy(){var e,t;null===(e=this.viewRouter)||void 0===e||e.destroy(),null===(t=this.compositionRoot)||void 0===t||t.destroy()}performAction(e,t){if(t=this.compositionRoot.services.documentService.handleModelUpdate(e,t),"COLOR_SCHEMA_UPDATE"===e)e=this.compositionRoot.services.documentModel.getShared().cssVars,ut.override(e,this.viewRouter.getDocumentContainer());return t}listenAction(e,t){this.compositionRoot.services.eventEmitter.on(e,((e,n)=>{t(e,n)}))}}class Oi extends Et{constructor(e){super(),this.propsRequestListener=e=>{var t=e.detail.id;let n=e.detail.widgetId;n&&this.params.config.formVariantId&&this.params.config.formVariantId!==n||(t=It.getNodeById(this.entryModule.compositionRoot.services.documentModel.getViews(),t))&&(e.detail.props=this.entryModule.componentFactory.constructProps(t,this.entryModule.viewRenderer.viewResourceManager))},this.params=e,this.entryModule=null,this.controllers=[]}disconnect(){window.removeEventListener("cl-props-request",this.propsRequestListener)}addPropsRequestEventListener(){window.addEventListener("cl-props-request",this.propsRequestListener)}setEntryModule(e){this.entryModule=e}navigate(e){this.entryModule&&this.entryModule.viewRouter&&this.entryModule.viewRouter.navigate(e)}updateSharedPropsByType(e,t,n){var i,o,r,s;switch(e){case"FLOATING_BAR":return{floatingBar:Object.assign(Object.assign({},t.floatingBar),null===(i=n.shared)||void 0===i?void 0:i.floatingBar)};case"FLOATING_BOX":return{floatingBox:Object.assign(Object.assign({},t.floatingBox),null===(o=n.shared)||void 0===o?void 0:o.floatingBox)};case"LAUNCHER":return{launcher:Object.assign(Object.assign({},t.launcher),null===(r=n.shared)||void 0===r?void 0:r.launcher)};case"DETACHED":return{dialog:Object.assign(Object.assign({},t.dialog),null===(s=n.shared)||void 0===s?void 0:s.dialog)};default:return{}}}updateSharedParams(e,t){var n;let i=this.updateSharedPropsByType(this.params.widgetType,e.documentModel.shared,t);return Object.assign(Object.assign({},e),{documentModel:Object.assign(Object.assign({},e.documentModel),{shared:Object.assign(Object.assign(Object.assign({},e.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e.documentModel.shared.closeIcon),null===(n=t.shared)||void 0===n?void 0:n.closeIcon)}),i)})})}setPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setPosition&&(t.params=this.updateSharedParams(t.params,e),t.setPosition(e.isMobileEnv))}))}setCloseIcon(e){this.controllers.forEach((t=>{"function"==typeof t.setCloseIconParams&&(t.params=this.updateSharedParams(t.params,e),t.setCloseIconParams(e.isMobileEnv))}))}setLauncherEntryAnimationAndPosition(e){this.controllers.forEach((t=>{"function"==typeof t.setEntryAnimationAndPosition&&(t.params=this.updateSharedParams(t.params,e),t.setEntryAnimationAndPosition(e.isMobileEnv))}))}performAction(e,t){let n=this.entryModule.performAction(e,t);return this.controllers.forEach((n=>{if("COLOR_SCHEMA_UPDATE"===e)ut.override(t,n.getConnectedElement())})),n}setEnvironment(e){this.entryModule.performAction("ENVIRONMENT_UPDATE",e);let t={isMobileEnv:e.isMobileEnv};this.setCloseIcon(t),this.setPosition(t),this.setLauncherEntryAnimationAndPosition(t),this.controllers.forEach((t=>{"function"==typeof t.updateScrollbar&&t.updateScrollbar(e.isMobileEnv)}))}}class Si{constructor(){this.loadedGoogleFonts=[]}addGoogleFonts(e,t){(e||[]).length&&(e=this.getDynamicUrlPart(e,t))&&this.addFonts(e,t)}getDynamicUrlPart(e,t){let n=[];return((t||document).fonts||[]).forEach((e=>n.push("".concat(e.family," ").concat(e.weight," ").concat(e.style)))),t=new Set(n),this.combineUrlDynamicPart(e,t)}combineUrlDynamicPart(e,t){let n="",i=this.makeFontOptions();return e.forEach((e=>{let o="",r="";i.forEach((n=>{if(!t.has("".concat(e," ").concat(n," normal"))){let e="1,".concat(n);r=r?r+";".concat(e):r+e}t.has("".concat(e," ").concat(n," italic"))||(n="0,".concat(n),o=o?o+";".concat(n):o+n)})),(o||r)&&(n+="&family=".concat(e.replace(/ /g,"+"),":ital,wght@").concat(o,";").concat(r))})),n}makeFontOptions(){let e=[];for(let t=0;9>t;t++)e.push(100*(t+1));return e}addFonts(e,t){if((t||document).head){var n=document.createElement("link");n.rel="stylesheet",n.href="https://fonts.googleapis.com/css2?display=swap"+e,(t||document).head.appendChild(n),this.loadedGoogleFonts.push(n)}}removeGoogleFonts(){this.loadedGoogleFonts.forEach((e=>e.remove())),this.loadedGoogleFonts=[]}}class Ai extends Si{constructor(e,t){super(),this.params=e,this.eventEmitter=t,this.connectedElement=null}hasComponentWithResourcesOnTheView(e,t){if(t){var n=0;return e.iterateViewModelAndExecute(t.currentViewIndex,(e=>{var t,i;!0===(null===(i=null===(t=null==e?void 0:e.componentRef)||void 0===t?void 0:t.manifest)||void 0===i?void 0:i.waitForResourcesLoad)&&n++})),0<n}}createSvgElement(e,t,n){let i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.setAttributeNS(null,"viewBox","0 0 "+e+" "+t),i.setAttributeNS(null,"width",e),i.setAttributeNS(null,"height",t),i.innerHTML=n,i}getHideIcon(){return this.createSvgElement(21,21,'<path fill-rule="evenodd" clip-rule="evenodd" d="M13.5582 11.167C13.6018 10.9519 13.6247 10.7293 13.6247 10.5013C13.6247 8.66035 12.1323 7.16797 10.2913 7.16797C10.0634 7.16797 9.84072 7.19086 9.6256 7.23446L10.3945 8.00339C11.6932 8.05612 12.7365 9.09947 12.7892 10.3981L13.5582 11.167ZM8.1189 9.2633C7.91046 9.62829 7.79134 10.0509 7.79134 10.5013C7.79134 11.882 8.91063 13.0013 10.2913 13.0013C10.7418 13.0013 11.1644 12.8822 11.5293 12.6737L12.1346 13.279C11.6067 13.6301 10.9729 13.8346 10.2913 13.8346C8.45039 13.8346 6.95801 12.3423 6.95801 10.5013C6.95801 9.81975 7.16256 9.18597 7.51361 8.65801L8.1189 9.2633Z" fill="#2C2C2C"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M15.7837 13.3901C16.4728 12.7662 17.0357 12.1378 17.4361 11.6517L17.4851 11.5924C17.7606 11.2595 18.0164 10.9504 18.0164 10.4987C18.0164 10.047 17.7606 9.73786 17.4851 9.40501L17.4361 9.3457C16.832 8.61222 15.8577 7.55476 14.6386 6.67763C13.4227 5.80287 11.9277 5.08203 10.2911 5.08203C9.46902 5.08203 8.68264 5.26393 7.94942 5.55587L8.59862 6.20507C9.14557 6.02176 9.71248 5.91536 10.2911 5.91536C11.6843 5.91536 13.0094 6.53209 14.1519 7.35408C15.2911 8.17371 16.2136 9.1722 16.7929 9.8755C17.1465 10.3049 17.183 10.3791 17.183 10.4987C17.183 10.6183 17.1465 10.6925 16.7929 11.1219C16.4027 11.5957 15.8567 12.2034 15.1937 12.8001L15.7837 13.3901ZM6.30424 7.44623C5.22306 8.24755 4.34715 9.19835 3.78941 9.8755C3.43577 10.3049 3.39925 10.3791 3.39925 10.4987C3.39925 10.6183 3.43577 10.6925 3.78941 11.1219C4.36868 11.8252 5.29119 12.8237 6.43042 13.6433C7.57294 14.4653 8.89795 15.082 10.2911 15.082C11.2901 15.082 12.2539 14.765 13.1406 14.2826L13.7526 14.8946C12.7242 15.4892 11.5495 15.9154 10.2911 15.9154C8.65456 15.9154 7.1596 15.1945 5.94374 14.3198C4.72459 13.4426 3.7503 12.3852 3.14617 11.6517L3.09716 11.5924C2.82173 11.2595 2.56592 10.9504 2.56592 10.4987C2.56592 10.047 2.82172 9.73786 3.09716 9.40501L3.14617 9.3457C3.711 8.65993 4.5994 7.69096 5.70897 6.85095L6.30424 7.44623Z" fill="#2C2C2C"/>\n        <path d="M4.45752 2.16602L17.7909 15.4993" stroke="#2C2C2C" stroke-width="0.833333"/>')}getClaspoIcon(){return this.createSvgElement(17,10,'<path d="M13.8946 6.59451C13.337 7.15222 12.5956 7.45921 11.807 7.45921H3.68778C3.09624 7.45921 2.54034 7.22894 2.12199 6.81068C1.70373 6.39243 1.52894 5.83644 1.52894 5.24489C1.52894 4.65345 1.70373 4.09746 2.12199 3.67911C2.54034 3.26095 3.09624 3.03058 3.68778 3.03058C4.23793 3.03058 4.75748 3.23004 5.16396 3.59453V5.36522L10.1517 2.06086L10.1518 2.06116C10.6365 1.73171 11.2081 1.5544 11.807 1.5544C12.5956 1.5544 13.337 1.8614 13.8946 2.4191C14.4524 2.97671 14.7436 3.71827 14.7436 4.50686C14.7436 5.29544 14.4524 6.0369 13.8946 6.59451ZM11.807 0.078125C10.8924 0.078125 10.0424 0.355518 9.33667 0.830762L9.33636 0.830259L5.16396 3.59443V1.8617C4.71187 1.66425 4.21276 1.5544 3.68778 1.5544C1.64956 1.5544 0 3.20678 0 5.24489C0 7.28311 1.64956 8.93549 3.68778 8.93549H11.807C14.2529 8.93549 16.2911 6.95275 16.2911 4.50686C16.2911 2.06086 14.2529 0.078125 11.807 0.078125Z" fill="#F3492C"/>')}addBrandingUTMParametersToURL(e,t){return t={utm_campaign:"Powered_by_promo",utm_medium:"referral",utm_source:t},(e=new URL(e)).search=e.search?e.search+"&".concat(new URLSearchParams(t).toString()):"?".concat(new URLSearchParams(t).toString()),e.toString()}createBrandingElement(){var e=this.getClaspoIcon();let t=this.getHideIcon();this.brandingElement=document.createElement("div"),this.brandingElement.classList.add("cl-branding");var n=document.createElement("a");n.classList.add("cl-link"),n.setAttribute("href",this.addBrandingUTMParametersToURL("https://claspo.io/",this.params.config.siteId)),n.setAttribute("rel","nofollow"),n.setAttribute("target","_blank");let i=document.createElement("span");i.classList.add("cl-branding-text"),i.innerText="Powered by ",n.append(i),n.append(e),(e=document.createElement("span")).classList.add("cl-branding-brand"),e.innerText="Claspo",n.append(e),this.brandingElement.append(n),this.params.config.upgradePlanButton&&((n=document.createElement("div")).classList.add("cl-branding-upgrade-overlay"),n.addEventListener("click",(()=>{this.params.config.upgradePlanUrl&&window.open(this.params.config.upgradePlanUrl,"_self")})),(e=document.createElement("div")).classList.add("cl-branding-upgrade"),e.appendChild(t),this.brandingElement.append(e),this.brandingElement.append(n))}addBrandingElementListeners(){this.brandingElement.addEventListener("click",(()=>{this.eventEmitter.emit("BRANDING_ELEMENT_CLICKED",this.params.widgetType)}))}isMobileEnv(e){return window.matchMedia("(max-width: ".concat(e,"px)")).matches}setConnectedElement(e){this.connectedElement=e,this.addWidgetClickEventListener(e)}getConnectedElement(){return this.connectedElement}getDisabledWidgetStyles(e){return"".concat(e,":after {\n      content: '';\n      height: 100%;\n      width: 100%;\n      position: absolute;\n      left: 0;\n      top: 0;\n      z-index: 1;\n    }")}getBrandingStyles(){return".cl-branding {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          border-radius: 20px;\n          background: #FFFFFF;\n          height: 21px;\n          line-height: 21px !important;\n          font-family: Arial, sans-serif !important;\n          letter-spacing: 0.3px !important;\n          font-size: 10px !important;\n          font-weight: 400 !important;\n          padding: 0 10px !important;\n          gap: 8px;\n          position: absolute;\n          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          z-index: 1;\n        }\n        \n        .cl-link {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          text-decoration: none;\n          cursor: pointer;\n        }\n\n      .cl-branding-text {\n        color: #121221;\n        flex: none;\n        order: 0;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400 !important;\n        font-style: normal !important;\n      }\n\n      .cl-branding-brand{\n        display: flex;\n        align-items: center;\n        gap: 2px;\n        color: #F3492C;\n        flex: none;\n        order: 1;\n        flex-grow: 0;\n        font-size: 10px !important;\n        font-family: Arial, sans-serif !important;\n        font-weight: 400;\n        font-style: normal !important;\n      }\n\n      .cl-branding-link-overlay,\n      .cl-branding-upgrade-overlay {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        cursor: pointer;\n      }\n\n      .cl-branding-upgrade {\n        display: flex;\n        align-items: center;\n        order: 2;\n        flex-grow: 0;\n      }\n\n      .cl-branding:hover {\n        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.07);\n      }"}getViewportWidth(e,t){return Math.max((e||document).documentElement.clientWidth,(t||window).innerWidth||0)}getContainerElementHeight(){return"BODY"===this.containerElement.tagName?Math.max(document.documentElement.clientHeight,window.innerHeight||0):this.containerElement.getBoundingClientRect().height}getActualSizeByEnv(e){var t;return(e=null===(t=this.params.documentModel.shared.actualSize)||void 0===t?void 0:t[e?"mobile":"desktop"])?e:null}getViewContentContainer(){var e;return null===(e=this.documentElement.querySelector('[cl-type="VIEW"]'))||void 0===e?void 0:e.shadowRoot.querySelector("[cl-content-container]")}changeViewAlignToTop(){let e=this.documentElement.querySelector('[cl-type="VIEW"]');"row"===e.style.flexDirection?e.style.alignItems="flex-start":e.style.justifyContent="flex-start"}addWidgetClickEventListener(e){e.addEventListener("click",(()=>{this.eventEmitter.emit("WIDGET_CLICKED",e)}))}}class Ni extends Ai{getDefaultCloseIconParams(){let e={verticalOffset:"-42px",horizontalOffset:"-42px",width:"34px",height:"34px",content:"0",inlineSvg:!0,color:"rgb(255, 255, 255)"};return{desktop:e,mobile:Object.assign(Object.assign({},e),{verticalOffset:"-37px",horizontalOffset:"0px"})}}applyCloseIconParams(e,t,n){e&&t&&(t=n?t.mobile:t.desktop,e.style.width=t.width,e.style.height=t.height,e.style.top=t.verticalOffset,e.style.right=t.horizontalOffset,t.inlineSvg?(e.style.color=t.color,e.innerHTML=this.getInlineSvg(t.content),(e=e.firstElementChild).style.width="100%",e.style.height="100%"):(e.style.color="",e.innerHTML="",(n=document.createElement("img")).src=t.content,n.style.width="100%",e.appendChild(n)))}getInlineSvg(e){switch(+e){case 0:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 1:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.9916 5.34171C19.4472 5.79732 19.4472 6.53602 18.9916 6.99163L6.99163 18.9916C6.53602 19.4472 5.79732 19.4472 5.34171 18.9916C4.8861 18.536 4.8861 17.7973 5.34171 17.3417L17.3417 5.34171C17.7973 4.8861 18.536 4.8861 18.9916 5.34171Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.34171 5.34171C4.8861 5.79732 4.8861 6.53602 5.34171 6.99163L17.3417 18.9916C17.7973 19.4472 18.536 19.4472 18.9916 18.9916C19.4472 18.536 19.4472 17.7973 18.9916 17.3417L6.99163 5.34171C6.53602 4.8861 5.79732 4.8861 5.34171 5.34171Z" fill="currentColor"/>\n</svg>\n';case 2:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 3C6.80558 3 3 6.80558 3 11.5C3 16.1944 6.80558 20 11.5 20C16.1944 20 20 16.1944 20 11.5C20 6.80558 16.1944 3 11.5 3ZM2 11.5C2 6.25329 6.25329 2 11.5 2C16.7467 2 21 6.25329 21 11.5C21 16.7467 16.7467 21 11.5 21C6.25329 21 2 16.7467 2 11.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M14.8536 8.85319L8.85355 14.8532L8.14645 14.1461L14.1464 8.14608L14.8536 8.85319Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.14645 8.85355L14.1464 14.8536L14.8536 14.1464L8.85355 8.14645L8.14645 8.85355Z" fill="currentColor"/>\n</svg>\n';case 3:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.8648 6.13518C18.0451 6.31542 18.0451 6.60765 17.8648 6.7879L6.78792 17.8648C6.60768 18.0451 6.31545 18.0451 6.13521 17.8648C5.95496 17.6846 5.95496 17.3923 6.13521 17.2121L17.2121 6.13518C17.3923 5.95494 17.6846 5.95494 17.8648 6.13518Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M6.13518 6.13518C5.95494 6.31542 5.95494 6.60765 6.13518 6.7879L17.2121 17.8648C17.3923 18.0451 17.6846 18.0451 17.8648 17.8648C18.045 17.6846 18.045 17.3923 17.8648 17.2121L6.78789 6.13518C6.60765 5.95494 6.31542 5.95494 6.13518 6.13518Z" fill="currentColor"/>\n</svg>\n';case 4:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n';case 5:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="10" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 9.70662L9.70711 15.7066L8.29289 14.2924L14.2929 8.2924L15.7071 9.70662Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29289 9.70711L14.2929 15.7071L15.7071 14.2929L9.70711 8.29289L8.29289 9.70711Z" fill="currentColor"/>\n</svg>\n';case 6:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3.5C7.30558 3.5 3.5 7.30558 3.5 12C3.5 16.6944 7.30558 20.5 12 20.5C16.6944 20.5 20.5 16.6944 20.5 12C20.5 7.30558 16.6944 3.5 12 3.5ZM2.5 12C2.5 6.75329 6.75329 2.5 12 2.5C17.2467 2.5 21.5 6.75329 21.5 12C21.5 17.2467 17.2467 21.5 12 21.5C6.75329 21.5 2.5 17.2467 2.5 12Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.3536 9.35306L9.35355 15.3531L8.64645 14.646L14.6464 8.64596L15.3536 9.35306Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.64645 9.35355L14.6464 15.3536L15.3536 14.6464L9.35355 8.64645L8.64645 9.35355Z" fill="currentColor"/>\n</svg>\n        ';case 7:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12ZM7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z" fill="currentColor"/>\n</svg>\n        ';case 8:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.9138 8.08736C16.1416 8.31516 16.1416 8.68451 15.9138 8.91232L8.9138 15.9123C8.68599 16.1401 8.31664 16.1401 8.08884 15.9123C7.86103 15.6845 7.86103 15.3152 8.08884 15.0874L15.0889 8.08736C15.3167 7.85955 15.686 7.85955 15.9138 8.08736Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.08882 8.08736C7.86102 8.31516 7.86102 8.68451 8.08882 8.91232L15.0888 15.9123C15.3166 16.1401 15.686 16.1401 15.9138 15.9123C16.1416 15.6845 16.1416 15.3152 15.9138 15.0874L8.91378 8.08736C8.68598 7.85955 8.31663 7.85955 8.08882 8.08736Z" fill="currentColor"/>\n</svg>\n        ';case 9:return'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="12" cy="12" r="9" fill="black" fill-opacity="0.1"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.705 8.29392C15.8189 8.40783 15.8189 8.5925 15.705 8.7064L8.70495 15.7064C8.59105 15.8203 8.40638 15.8203 8.29247 15.7064C8.17857 15.5925 8.17857 15.4078 8.29247 15.2939L15.2925 8.29392C15.4064 8.18002 15.5911 8.18002 15.705 8.29392Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.29246 8.29392C8.17856 8.40783 8.17856 8.5925 8.29246 8.7064L15.2925 15.7064C15.4064 15.8203 15.5911 15.8203 15.705 15.7064C15.8189 15.5925 15.8189 15.4078 15.705 15.2939L8.70494 8.29392C8.59104 8.18002 8.40636 8.18002 8.29246 8.29392Z" fill="currentColor"/>\n</svg>\n        '}}addCloseIconEventListener(){this.closeIconElement.addEventListener("click",(()=>{this.eventEmitter.emit("CLOSE_ICON_CLICKED",this.closeIconElement)}))}}let Ri=e=>(e=localStorage.getItem("esOverlapDebug")?10*e:e,Math.round(Number.MAX_SAFE_INTEGER/1e7-e));class Li extends Ni{constructor(e,t){var n;super(e,t),this.zIndex=String(null!==(n=this.params.zIndex)&&void 0!==n?n:Ri(Li.zIndexPriority)),e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBoxRootElement=document.createElement("div"),this.floatingBoxRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBoxElement=this.floatingBoxRootElement.querySelector(Li.floatingBoxSelector),this.floatingBoxElement.setAttribute("cl-connector-root-element","FLOATING_BOX"),this.params.config.formVariantId&&this.floatingBoxElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBoxElement.querySelector(Li.floatingBoxCloseIconSelector),this.addCloseIconEventListener(),this.setPosition(e),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.floatingBoxElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.bottom="-30px",this.brandingElement.style.right="0"}setDefaultPositionMobileParams(){var{documentModel:{shared:{floatingBox:e}}}=this.params;null!=e&&e.mobile||(e={verticalPosition:"BOTTOM",horizontalPosition:"LEFT",verticalOffset:this.getMinVerticalOffset(),horizontalOffset:"0px"},this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{floatingBox:Object.assign(Object.assign({},this.params.documentModel.shared.floatingBox),{mobile:Object.assign({},e)})})})}))}clearPosition(){var e;this.floatingBoxElement.removeAttribute("style"),this.floatingBoxElement.style.zIndex=this.zIndex,this.floatingBoxElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}getMinVerticalOffset(){return this.params.config.branded?32:0}getVerticalOffset(e){var t=this.params.documentModel.shared.floatingBox;return e=e?t.mobile.verticalOffset:t.verticalOffset,t=this.getMinVerticalOffset(),parseFloat(e)<t?"".concat(t,"px"):e}setPosition(e){this.clearPosition(),this.setDefaultPositionMobileParams();let t=this.params.documentModel.shared.floatingBox,n=e?t.mobile.horizontalOffset:t.horizontalOffset,i=this.getVerticalOffset(e);this.floatingBoxElement.style[(e?t.mobile.horizontalPosition:t.horizontalPosition).toLowerCase()]=n;let o=e?t.mobile.verticalPosition.toLowerCase():t.verticalPosition.toLowerCase();this.params.disableLayoutAnimations||"SLIDE_TO_TOP"!==t.entryAnimation.type?this.floatingBoxElement.style[o]=i:(this.floatingBoxElement.style[o]="".concat(parseFloat(i)-20,"px"),this.floatingBoxElement.style.opacity="0",setTimeout((()=>{this.floatingBoxElement.style[o]=i,this.floatingBoxElement.style.opacity="1"}),50))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:Object.assign(Object.assign({},e),{desktop:Object.assign(Object.assign({},e.desktop),{color:"rgb(0, 0, 0)"}),mobile:Object.assign(Object.assign({},e.mobile),{color:"rgb(0, 0, 0)"})})})})})}}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(this.floatingBoxElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBoxElement.style.visibility="visible"}))),this.documentElement=e,this.containerElement=t,this.floatingBoxRootElement.querySelector(Li.floatingBoxContentSelector).appendChild(e),t.appendChild(this.floatingBoxElement),this.setConnectedElement(this.floatingBoxElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.floatingBoxElement}disconnect(){this.floatingBoxElement.remove(),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t){var n=this.getActualSizeByEnv(e);if(n){var i=parseFloat(this.closeIconElement.style.top);e=this.getVerticalOffset(e),e=parseFloat(e),(i=this.getContainerElementHeight()-(0<i?0:Math.abs(i))-e)>parseFloat(n.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.maxHeight="".concat(i,"px"),this.changeViewAlignToTop())}}}}_getTemplate(e){return'\n<div class="cl-floating-box">\n  <style>\n  .cl-floating-box {\n    '.concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(Li.floatingBoxSelector):"","\n\n  .cl-floating-box-inner-content {\n     position: relative;\n     max-width: 100vw;\n     z-index: 1;\n  }\n\n  .cl-floating-box-close-icon {\n    position: absolute;\n    cursor: pointer;\n    z-index: 99;\n  }\n\n  ").concat(this.getBrandingStyles(),'\n\n  </style>\n\n  <div class="cl-floating-box-inner-content">\n    <div class="cl-floating-box-close-icon"></div>\n    <div class="cl-floating-box-content"></div>\n  </div>\n</div>\n')}}Li.zIndexPriority=2,Li.floatingBoxSelector=".cl-floating-box",Li.floatingBoxContentSelector=".cl-floating-box-content",Li.floatingBoxCloseIconSelector=".cl-floating-box-close-icon";class Mi extends Ni{constructor(e,t){var n,i;super(e,t),this.contentLockerRootElement=document.createElement("div"),this.contentLockerRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.contentLockerElement=this.contentLockerRootElement.querySelector(Mi.contentLockerSelector),this.contentLockerElement.setAttribute("cl-connector-root-element","CONTENT_LOCKER"),this.params.config.formVariantId&&this.contentLockerElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.contentLockerElement.style.position=null!==(n=this.params.displayPosition)&&void 0!==n?n:"fixed",this.contentLockerElement.style.zIndex=String(null!==(i=this.params.zIndex)&&void 0!==i?i:Number.MAX_SAFE_INTEGER),this.params.documentModel.shared.closeIcon&&(e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),t=this.contentLockerRootElement.querySelector(Mi.contentLockerContentSelector),this.closeIconElement=document.createElement("div"),this.closeIconElement.classList.add("cl-content-locker-close-icon"),t.appendChild(this.closeIconElement),this.addCloseIconEventListener(),this.setCloseIconParams(e)),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.contentLockerElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(){this.brandingElement.style.right="10px",this.brandingElement.style.bottom="10px"}addBlurryBackdrop(e){e.style.backdropFilter="blur(20px)";let t=new MutationObserver((t=>{t.forEach((t=>{var n;"attributes"===t.type&&"style"===t.attributeName&&(null!==(n=e.style.backdropFilter)&&void 0!==n&&n.includes("blur(20px)")||(e.style.backdropFilter="blur(20px)"))}))}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>t.disconnect()}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.removeBlurryBackdrop=this.addBlurryBackdrop(this.contentLockerElement);let i=this.contentLockerRootElement.querySelector(Mi.contentLockerContentSelector);return i.appendChild(e),t.appendChild(this.contentLockerElement),this.setConnectedElement(this.contentLockerElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(i.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{i.style.visibility="visible"}))),this.contentLockerElement}disconnect(){var e;this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),null===(e=this.removeBlurryBackdrop)||void 0===e||e.call(this),this.contentLockerElement.remove(),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&this.params.documentModel.shared.actualSize&&(e=this.getActualSizeByEnv(e))){var n=this.getContainerElementHeight();n>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",t.style.minHeight="".concat(n,"px"),this.changeViewAlignToTop())}}}_getTemplate(e){return'\n      <div class="cl-content-locker">\n        <style>\n        .cl-content-locker {\n          display: block;\n          top: 0;\n          left: 0;\n          bottom: 0;\n          right: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(Mi.contentLockerSelector):"","\n\n        .cl-content-locker-content {\n            width: 100%;\n            height: 100%;\n            min-height: fit-content;\n        }\n\n        .cl-noscroll {\n          overflow: hidden !important;\n        }\n\n        .cl-content-locker-close-icon {\n          z-index: 99;\n          position: absolute;\n          cursor: pointer;\n        }\n\n        ").concat(this.getBrandingStyles(),'\n\n        </style>\n\n          <div class="cl-content-locker-content"></div>\n      </div>')}}Mi.contentLockerSelector=".cl-content-locker",Mi.contentLockerContentSelector=".cl-content-locker-content",Mi.contentLockerCloseIconSelector=".cl-content-locker-close-icon";class wi extends Ni{constructor(e,t){var n;super(e,t),this.zIndex=String(null!==(n=this.params.zIndex)&&void 0!==n?n:Ri(wi.zIndexPriority)),e=this.params.documentModel.shared.mobileBreakpointWidth,this.floatingBarRootElement=document.createElement("div"),this.floatingBarRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.floatingBarElement=this.floatingBarRootElement.querySelector(wi.floatingBarSelector),this.floatingBarElement.setAttribute("cl-connector-root-element","FLOATING_BAR"),this.params.config.formVariantId&&this.floatingBarElement.setAttribute("cl-widget-id",this.params.config.formVariantId),e=this.isMobileEnv(e),this.closeIconElement=this.floatingBarElement.querySelector(wi.floatingBarCloseIconSelector),this.addCloseIconEventListener(),this.setCloseIconParams(e),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(e),this.floatingBarElement.appendChild(this.brandingElement),this.addBrandingElementListeners())}adjustBrandingPosition(e){let t=this.params.documentModel.shared.floatingBar;e=e?t.mobile:t.desktop,this.brandingElement.style.right="10px",this.brandingElement.style.zIndex="2","BOTTOM"===e.verticalPosition?this.brandingElement.style.top="-30px":this.brandingElement.style.bottom="-30px"}clearPosition(){var e;this.floatingBarElement.removeAttribute("style"),this.floatingBarElement.style.zIndex=this.zIndex,this.floatingBarElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed",this.modifiedHtmlBodyElement&&this.originalHtmlBodyElementMarginTop&&(this.modifiedHtmlBodyElement.style.marginTop=this.originalHtmlBodyElementMarginTop),this.modifiedFloatingElement&&(this.modifiedFloatingElement.style.top=this.originalModifiedFloatingElementTop)}setPosition(e){this.clearPosition();let t=this.params.documentModel.shared.floatingBar;"BOTTOM"===(e?t.mobile:t.desktop).verticalPosition?(this.floatingBarElement.style.left="0px",this.floatingBarElement.style.bottom="0px"):this._setTopPosition(e)}async _setTopPosition(e){if(this.modifiedHtmlBodyElement=this.modifiedFloatingElement=null,"body"===this.containerElement.tagName.toLowerCase()&&this.params.documentModel.shared.actualSize&&!this.params.disableSmartPosition&&(e=e?this.params.documentModel.shared.actualSize.mobile:this.params.documentModel.shared.actualSize.desktop)){e=e.height;var t=this.containerElement.getRootNode(),n=this._getElementAtTheTopOfTheViewport(t);n&&(n=this._findFloatingElement(n))&&(this.modifiedFloatingElement=n,this.originalModifiedFloatingElementTop=getComputedStyle(n).top,n.style.top=e),this.modifiedHtmlBodyElement=t.body,this.originalHtmlBodyElementMarginTop=getComputedStyle(this.modifiedHtmlBodyElement).marginTop,this.modifiedHtmlBodyElement.style.marginTop=e}(()=>{this.floatingBarElement.style.left="0px",this.floatingBarElement.style.top="0px"})()}_getElementAtTheTopOfTheViewport(e){let t=this.getViewportWidth(e,e.defaultView||e.parentWindow)/2,n=e.elementFromPoint(t,0);return n!==e.body?n:e.elementFromPoint(t,50)}_findFloatingElement(e){let t=null;for(;e;){let n=getComputedStyle(e);if(!(e&&e.getAttribute("cl-connector-root-element")||"fixed"!==n.position)||"sticky"===n.position){t=e;break}e=e.parentElement}return t}setCloseIconParams(e){this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){return this.containerElement=t,this.floatingBarRootElement.querySelector(wi.floatingBarContentSelector).appendChild(e),t.appendChild(this.floatingBarElement),this.setConnectedElement(this.floatingBarElement),this.setPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(this.floatingBarElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.floatingBarElement.style.visibility="visible"}))),this.floatingBarElement}disconnect(){this.clearPosition(),this.floatingBarElement.remove(),this.removeGoogleFonts()}_getTemplate(e){return'\n      <div class="cl-floating-bar">\n        <style>\n        .cl-floating-bar {\n          width: 100%;\n        }\n\n        '.concat(e.disabled?this.getDisabledWidgetStyles(wi.floatingBarSelector):"","\n\n        .cl-floating-bar-inner-content {\n           position: relative;\n           max-width: 100vw;\n           z-index: 1;\n        }\n\n        .cl-floating-bar-close-icon {\n          position: absolute;\n          cursor: pointer;\n          z-index: 99;\n        }\n\n       ").concat(this.getBrandingStyles(),'\n        </style>\n\n        <div class="cl-floating-bar-inner-content">\n          <div class="cl-floating-bar-close-icon"></div>\n          <div class="cl-floating-bar-content"></div>\n        </div>\n      </div>\n    ')}}wi.zIndexPriority=2,wi.floatingBarSelector=".cl-floating-bar",wi.floatingBarContentSelector=".cl-floating-bar-content",wi.floatingBarCloseIconSelector=".cl-floating-bar-close-icon";class Di extends Ai{constructor(e,t){var n;super(e,t),this.zIndex=String(null!==(n=this.params.zIndex)&&void 0!==n?n:Ri(Di.zIndexPriority)),this.launcherRootElement=document.createElement("div"),this.launcherRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(this.params)),this.launcherElement=this.launcherRootElement.querySelector(Di.launcherSelector),this.launcherElement.setAttribute("cl-connector-root-element","LAUNCHER"),this.params.config.formVariantId&&this.launcherElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.defaultStylesElement=this.launcherElement.querySelector(Di.launcherStylesSelector).cloneNode(!0)}connect(e,t,n){return this.launcherRootElement.querySelector(Di.launcherContentSelector).appendChild(e),t.appendChild(this.launcherElement),this.setEntryAnimationAndPosition(this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth)),this.setConnectedElement(this.launcherElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(this.launcherElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.launcherElement.style.visibility="visible"}))),this.launcherElement}disconnect(){this.launcherElement.remove(),this.removeGoogleFonts()}setEntryAnimationAndPosition(e){var t=this.params.documentModel.shared.launcher;this.setLoopAnimation(t.loopAnimation);let n=(e=e?t.mobile:t.desktop).verticalPosition.toLowerCase(),i=e.horizontalPosition.toLowerCase();var o=["SLIDE_TO_TOP","SLIDE_TO_BOTTOM","SLIDE_TO_LEFT","SLIDE_TO_RIGHT"];if(this.params.disableLayoutAnimations||!o.includes(t.entryAnimation.type))this.launcherElement.style[i]=e.horizontalOffset,this.launcherElement.style[n]=e.verticalOffset,this.launcherElement.style.opacity="1";else{if("SLIDE_TO_TOP"===t.entryAnimation.type||"SLIDE_TO_BOTTOM"===t.entryAnimation.type){o=i;var r=e.horizontalOffset,s=n,a=e.verticalOffset;t="SLIDE_TO_TOP"===t.entryAnimation.type?"TOP"===e.verticalPosition?20:-20:"TOP"===e.verticalPosition?-20:20}else o=n,r=e.verticalOffset,s=i,a=e.horizontalOffset,t="SLIDE_TO_LEFT"===t.entryAnimation.type?"LEFT"===e.horizontalPosition?20:-20:"LEFT"===e.horizontalPosition?-20:20;this.launcherElement.style[o]=r,this.launcherElement.style[s]="".concat(parseFloat(a)+t,"px"),setTimeout((()=>{this.launcherElement.style[s]=a,this.launcherElement.style.opacity="1"}),50)}}clearLoopAnimations(){var e;let t=[];this.launcherElement.classList.forEach((e=>{e.startsWith(wt.animationClassPrefix)&&t.push(e)})),this.launcherElement.classList.remove(...t),this.launcherElement.querySelector(Di.launcherStylesSelector).innerHTML=this.defaultStylesElement.innerHTML,this.launcherElement.removeAttribute("style"),this.launcherElement.style.zIndex=this.zIndex,this.launcherElement.style.position=null!==(e=this.params.displayPosition)&&void 0!==e?e:"fixed"}setLoopAnimation(e){this.clearLoopAnimations(),this.params.disableLayoutAnimations||(this._applyLoopAnimationParams(e),this.launcherElement.classList.add(wt.animationClassPrefix+e.type))}_applyLoopAnimationParams(e){e.params&&Object.keys(e.params).forEach((t=>{let n=e.params[t];this.launcherElement.style.setProperty("--cl-".concat(e.type,"-").concat(t),"".concat(n||wt.getDefaultParamValueByAnimationType(e.type,t)))}))}_getTemplate(e){var t;return'\n      <div class="cl-launcher">\n        <style class="cl-launcher-styles">\n\n        '.concat(wt.constructAnimationStylesByTypes([null===(t=e.documentModel.shared.launcher.loopAnimation)||void 0===t?void 0:t.type]),"\n\n        .cl-launcher {\n          ").concat(this.params.disableLayoutAnimations?"":"transition: 0.3s;","\n          cursor: pointer;\n          opacity: 0;\n        }\n\n        ").concat(e.disabled?this.getDisabledWidgetStyles(Di.launcherSelector):"",'\n\n        .cl-launcher-inner-content {\n           position: relative;\n        }\n        </style>\n\n        <div class="cl-launcher-inner-content">\n          <div class="cl-launcher-content"></div>\n        </div>\n      </div>\n')}}Di.zIndexPriority=3,Di.launcherSelector=".cl-launcher",Di.launcherContentSelector=".cl-launcher-content",Di.launcherStylesSelector=".cl-launcher-styles";class Pi extends Ni{constructor(e,t){var n,i;super(e,t),this.zIndex=String(null!==(n=this.params.zIndex)&&void 0!==n?n:Ri(Pi.zIndexPriority)),this.setDefaultDialogParams(),e=this.params.documentModel.shared.mobileBreakpointWidth,this.dialogRootElement=document.createElement("div"),this.dialogRootElement.insertAdjacentHTML("afterbegin",this._getTemplate(Object.assign(Object.assign({},this.params),{background:this.params.documentModel.shared.dialog.background}))),this.dialogElement=this.dialogRootElement.querySelector(Pi.dialogSelector),this.dialogElement.style.zIndex=this.zIndex,this.dialogElement.setAttribute("cl-connector-root-element","DETACHED"),this.params.config.formVariantId&&this.dialogElement.setAttribute("cl-widget-id",this.params.config.formVariantId),this.dialogElement.style.position=null!==(i=this.params.displayPosition)&&void 0!==i?i:"fixed",i=this.isMobileEnv(e),this.closeIconElement=this.dialogElement.querySelector(Pi.dialogCloseIconSelector),this.addBackDropClickEventListener(),this.addCloseIconEventListener(),this.setCloseIconParams(i),this.params.config.branded&&(this.createBrandingElement(),this.adjustBrandingPosition(),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").appendChild(this.brandingElement),this.addBrandingElementListeners()),this.boundEscapeListener=this.escapeListenerCallback.bind(this),window.addEventListener("keyup",this.boundEscapeListener)}adjustBrandingPosition(){this.brandingElement.style.position="relative",this.brandingElement.style.marginTop="10px"}setDefaultDialogParams(){this.params.documentModel.shared.dialog||(this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{dialog:{background:"rgba(0, 0, 0, 0.7)"}})})}))}setDefaultCloseIconParams(){if(!this.params.documentModel.shared.closeIcon){let e=this.getDefaultCloseIconParams();this.params=Object.assign(Object.assign({},this.params),{documentModel:Object.assign(Object.assign({},this.params.documentModel),{shared:Object.assign(Object.assign({},this.params.documentModel.shared),{closeIcon:{desktop:e.desktop,mobile:e.mobile}})})})}}addBackDropClickEventListener(){this.dialogElement.addEventListener("click",(e=>{e.target===this.dialogElement&&this.eventEmitter.emit("CLOSE_WIDGET")}))}setCloseIconParams(e){this.setDefaultCloseIconParams(),this.applyCloseIconParams(this.closeIconElement,this.params.documentModel.shared.closeIcon,e)}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(this.dialogElement.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{this.dialogElement.style.visibility="visible"}))),this.documentElement=e,this.containerElement=t,this.params.disableGlobalScroll&&document.body.classList.add("cl-noscroll"),this.dialogRootElement.querySelector(Pi.dialogContentSelector).appendChild(e),t.appendChild(this.dialogElement),this.setConnectedElement(this.dialogElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,t.getRootNode()),e=this.isMobileEnv(this.params.documentModel.shared.mobileBreakpointWidth),this.updateScrollbar(e),this.dialogElement}disconnect(){this.params.disableGlobalScroll&&document.body.classList.remove("cl-noscroll"),this.dialogElement.remove(),window.removeEventListener("keyup",this.boundEscapeListener),this.removeGoogleFonts()}updateScrollbar(e){if(!this.params.disableScrollbarCalculation){var t=this.getViewContentContainer();if(t&&(e=this.getActualSizeByEnv(e))){var n=.9*this.getContainerElementHeight();n>parseFloat(e.height)||(t.style.overflowY="auto",t.style.overflowX="hidden",this._extendContainerOuterSizeToFitInnerContentShadows(t),this.dialogElement.querySelector(".cl-dialog-inner-content-wrapper").style.maxHeight="".concat(n,"px"),this.dialogElement.style.overflowY="auto",this.dialogElement.style.overflowX="hidden",this.changeViewAlignToTop())}}}escapeListenerCallback(e){"Escape"===e.key&&this.eventEmitter.emit("CLOSE_WIDGET")}_extendContainerOuterSizeToFitInnerContentShadows(e){e.style.width="calc(100% + ".concat(40,"px)"),e.style.margin="-".concat(20,"px"),e.style.padding="".concat(20,"px")}_getTemplate(e){return'\n<div class="cl-dialog">\n  <style>\n  .cl-dialog {\n    top: 0;\n    left: 0;\n    right: 0;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: '.concat(e.background,";\n    box-sizing: border-box;\n  }\n\n  ").concat(e.disabled?this.getDisabledWidgetStyles(Pi.dialogSelector):"","\n\n  .cl-dialog-inner-content-wrapper {\n     display: flex;\n     flex-direction: column;\n     align-items: end;\n  }\n  \n  .cl-dialog-inner-content {\n     position: relative;\n     max-width: 100vw;\n  }\n\n  .cl-dialog-close-icon {\n    z-index: 99;\n    position: absolute;\n    cursor: pointer;\n  }\n\n  ").concat(this.getBrandingStyles(),'\n  </style>\n\n  <div class="cl-dialog-inner-content-wrapper">\n    <div class="cl-dialog-inner-content">\n      <div class="cl-dialog-close-icon"></div>\n      <div class="cl-dialog-content"></div>\n    </div>\n  </div>\n</div>\n')}}Pi.zIndexPriority=1,Pi.dialogSelector=".cl-dialog",Pi.dialogContentSelector=".cl-dialog-content",Pi.dialogCloseIconSelector=".cl-dialog-close-icon";let xi={BEFORE_BEGIN:"beforebegin",AFTER_BEGIN:"afterbegin",BEFORE_END:"beforeend",AFTER_END:"afterend",REPLACE:"REPLACE"};class Vi{static map(e){return xi.hasOwnProperty(e)?xi[e]:xi.AFTER_END}}class Fi extends Ai{constructor(e,t){super(e,t),this.builtInElement=null,this.params.config.branded&&this.createBrandingElement()}connect(e,t,n){return this.hasComponentWithResourcesOnTheView(n.compositionRoot.services.documentModel,n.viewRouter)&&(e.style.visibility="hidden",n.compositionRoot.services.eventEmitter.on(Fn.VIEW_COMPONENT_RESOURCES_LOADED,(()=>{e.style.visibility="visible"}))),this.params.placement?(n=(t=document.querySelector(this.params.placement.selector)).getRootNode(),e.setAttribute("cl-connector-root-element","BUILT_IN"),this.params.config.formVariantId&&e.setAttribute("cl-widget-id",this.params.config.formVariantId),this.params.placement.insertType===xi.REPLACE?t.replaceWith(e):t.insertAdjacentElement(Vi.map(this.params.placement.insertType),e)):(n=t.getRootNode(),t.appendChild(e)),this.params.disabled&&((t=document.createElement("style")).innerHTML=this.getDisabledWidgetStyles('[class^="cl-widget"]'),e.appendChild(t)),this.builtInElement=e,this.setConnectedElement(this.builtInElement),this.params.disableGoogleFonts||this.addGoogleFonts(this.params.documentModel.shared.googleFonts,n),this.params.config.branded&&((t=document.createElement("style")).innerHTML=this.getBrandingStyles(),this.adjustBrandingPosition(),e.appendChild(this.brandingElement),"VIEW"===e.getAttribute("cl-type")?(e.shadowRoot.appendChild(t),e.shadowRoot.appendChild(this.brandingElement)):(e.style.position="relative",e.appendChild(t),e.appendChild(this.brandingElement)),this.addBrandingElementListeners()),this.builtInElement}adjustBrandingPosition(){this.brandingElement.style.position="absolute",this.brandingElement.style.bottom="10px",this.brandingElement.style.right="10px"}disconnect(){this.builtInElement&&this.builtInElement.remove(),this.removeGoogleFonts()}}class ki{static create(e,t){let{widgetType:n}=e;switch(n){case"FLOATING_BOX":return new Li(e,t);case"FLOATING_BAR":return new wi(e,t);case"DETACHED":return new Pi(e,t);case"CONTENT_LOCKER":return new Mi(e,t);case"LAUNCHER":return new Di(e,t);case"BUILT_IN":return new Fi(e,t);default:throw Error("LayoutFactory: unknown widget type ".concat(n))}}}class Ui extends Oi{constructor(e){super(e),this.controllers.push(ki.create(e,this));let{documentModel:t,componentResolver:n,config:i={},translations:o,trackingService:r,widgetType:s}=e;e=new Ii(t,n,i,o,r,s),this.setEntryModule(e)}connect(e){var t;let n=this.entryModule.init();return super.addPropsRequestEventListener(),this.params.config.formVariantId?n.classList.add("cl-widget-"+this.params.config.formVariantId):n.classList.add("cl-widget"),this.entryModule.listenAction("*",((e,t)=>{this.emit(t,e),"CLOSE_WIDGET"===t&&e&&"function"==typeof e&&e()})),null===(t=this.controllers[0])||void 0===t?void 0:t.connect(n,e,this.entryModule)}disconnect(){super.disconnect(),this.entryModule&&this.entryModule.viewRouter&&this.entryModule.compositionRoot&&this.entryModule.destroy(),this.controllers[0]&&this.controllers[0].disconnect(),this.controllers=[]}destroy(){this.disconnect()}}class Bi{constructor(e){t(this,"collectionIntervalHours",null),this.collectionIntervalHours=e}setData(e,t){this._storeData({[e]:t})}getData(e){return this._getData().data[e]}_getData(){}_setData(e){}_storeData(e){let t=this._getData();this._setData({...t,data:{...t.data,...e}})}_updateMetricCollectionDate(){let e=this._getData();this._setData({...e,lastDate:(new Date).toISOString()})}_shouldMetricBeCollected(){var e=this._getLastDate();return!e||(e=new Date(e),parseInt(((new Date).getTime()-e.getTime())/36e5)>=this.collectionIntervalHours)}_getLastDate(){return this._getData().lastDate}}var Hi=new class extends Bi{constructor(){super(2),this._storeData({SCRIPT_INITIAL_LOAD:this._getWindowPerf()}),this._shouldMetricBeCollected()&&ce.info("SCRIPT_INITIAL_LOAD",this._composePayload())}collect(e){this._storeData({[e]:this._getWindowPerf()})}_getData(){return fe.getMetrics()}_setData(e){fe.setMetrics(e)}_composePayload(){let e=this._getData();return{site:new URL(document.location.href).hostname,...e.data}}_getWindowPerf(){return window.performance.now()}};class Gi{constructor(e,t){this.observer=null,this.rootElement=e,this.oneTimeObserver=t}handle(e){this.observer=new IntersectionObserver((t=>{t.find((e=>e.isIntersecting))&&(e(),this.oneTimeObserver&&this.unsubscribe())}),{root:null,rootMargin:"0px",threshold:.1}),this.observer.observe(this.rootElement)}unsubscribe(){this.observer.disconnect()}}class Wi{constructor(e){this._payload={...e,type:"view"},e.addReferrer&&(this._payload.referrer=window.location.href)}get(){return btoa(JSON.stringify(this._payload))}}class ji extends Gi{constructor(e,t){super(e,!0),this.params=t}handle(){super.handle(this.onFormShown.bind(this))}onFormShown(){let e=new Wi({...this.params,addReferrer:"DEBUG"!==tt.getFormVariant("f".concat(this.params.formId,"v").concat(this.params.variantId)).publishStatus}).get();Ke.execute(new Ue("/forms/v1/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()}).catch((e=>ce.error(e,"onFormsReceived error on FormViewedEventHandler: ")))}}var zi=new class extends Et{};class Ki{static isFormBranded(e){return!!tt.getForm(e).branded}}class Xi{static isEmail(e){return Xi.emailPattern.test(e)}static isPhoneNumber(e){return!!e&&(!!(e=(e||"").match(Xi.phonePattern))&&10<=e.length)}static hasBrandName(e){return["esputnik","yespo","reteno"].some((t=>e.toLowerCase().includes(t)))}}t(Xi,"emailPattern",/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+(\.[A-Za-z0-9]+)+)+$/),t(Xi,"phonePattern",new RegExp(/\d/,"g")),t(Xi,"hashPattern",/^[0-9a-f]+$/);var Yi=new class{constructor(){t(this,"_delays",{short:1e3,checkShort:800,normal:1e4,long:6e5}),t(this,"_minErrorsCount",0),t(this,"_maxErrorsCount",3),t(this,"_errorsCount",0),t(this,"_sendingDataInProgress",!1),t(this,"_webContactDataQueue",[]),t(this,"_webContactSendURL",null),t(this,"_webEventSendURL",null),t(this,"_orgId",null),t(this,"_guid",null),t(this,"_currentDelayMS",null),t(this,"_checkDelayMS",null),t(this,"_host",null),t(this,"_readFromQueryIntervalId",null),t(this,"_checkErrorsCountIntervalId",null),this._host=fe.getConfig().apiConfig.hostUrl,this._webContactSendURL=this.getUrl("webcontact"),this._webEventSendURL=this.getUrl("webevent"),ge.get("webContactDataQueue"),this._currentDelayMS=this._delays.short,this._checkDelayMS=this._delays.checkShort,this._orgId=fe.getConfig().orgId,this._guid=fe.getConfig().guid,this.prefix=fe.getPrefix(),this.allowedToRun()&&(this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),this._currentDelayMS),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),this._checkDelayMS))}get _webId(){return Ze.getUserIdentifier()}setPrefix(e,t){this.prefix={debugPrefix:e,storagePrefix:t}}allowedToRun(){return!!(this.prefix.debugPrefix&&"cl"!==this.prefix.debugPrefix||this._orgId)}getUrl(e){return"".concat(this._host,"site-events/api/v1/").concat(e)}checkErrorsCount(){let e=this._delays.short;this._errorsCount>this._minErrorsCount&&this._errorsCount<=this._maxErrorsCount&&(e=this._delays.normal),this._errorsCount>this._maxErrorsCount&&(e=this._delays.long),this._currentDelayMS!==e&&(this._currentDelayMS=e,this.adjustReadFromQueryInterval(e),this.adjustCheckErrorsCountInterval(e))}adjustCheckErrorsCountInterval(e){clearInterval(this._checkErrorsCountIntervalId),this._checkErrorsCountIntervalId=setInterval((()=>this.checkErrorsCount()),e-2e3)}adjustReadFromQueryInterval(e){clearInterval(this._readFromQueryIntervalId),this._readFromQueryIntervalId=setInterval((()=>this.readFromQueue()),e)}stop(){this.allowedToRun()&&(clearInterval(this._readFromQueryIntervalId),clearInterval(this._checkErrorsCountIntervalId))}destroy(){this.stop()}addToQueue(e,t){this.allowedToRun()&&this._webContactDataQueue.push({data:e,message:t})}readFromQueue(){if(this._webContactDataQueue.length&&!this._sendingDataInProgress){let e=this._webContactDataQueue[0];this._sendingDataInProgress=!0,this.updateWebContact(e.data,e.message)}}removeFirstElementFromQueue(){this._webContactDataQueue.shift(),this._sendingDataInProgress=!1}errorSendingWebContact(){this._sendingDataInProgress=!1,this._errorsCount+=1}async successSendingWebContact(e){e=await this.secureWebContact(e),fe.setWebContact(e),this.removeFirstElementFromQueue(),this._errorsCount=0,(fe.getState().userInfo||fe.getState().customerData)&&this.migrateToWebContact()}async activate(e){var t,n,i=fe.getWebContact();0!==Object.keys(i).length?this._webContactDataQueue.length||fe.setWebContact(await this.secureWebContact(i)):(i=null!==(t=fe.getUserInfo())&&void 0!==t?t:{},t=null!==(n=fe.getCustomerData())&&void 0!==n?n:{},n=M({webPushSubscriptionContactId:ge.get("esWebPushContactId"),widgetSubscriptionContactId:ge.get("clContactId"),utmContactId:t.esContactId||i.esContactId,externalCustomerId:t.externalCustomerId||i.externalCustomerId,email:t.email||i.email,iid:t.iid||i.iid}),t.phone&&D(t.phone)?n.phone=t.phone:i.phone&&D(i.phone)&&(n.phone=i.phone),Object.keys(n).length&&this.addToQueue({...n,webId:this._webId,orgId:this._orgId},e))}updateFromCustomerData(e,t){let n={email:e.email,externalCustomerId:e.externalCustomerId,trackingContactId:e.esContactId};D(e.phone)&&(n.phone=e.phone),this.addToQueue({...n,webId:this._webId,orgId:this._orgId},t)}updateFromUserInfo(e,t){let n={email:e.email};D(e.phone)&&(n.phone=e.phone),this.addToQueue({...n,webId:this._webId,orgId:this._orgId},t)}async updateWebContact(e,t){var n=["webId","orgId"],i=r(M(fe.getWebContact()),n);let o=["email","phone"].filter((t=>!this.isPropertyPresentAndNotHashed(t,e))),s=r(M(e),n.concat(o));return function(e,t){return Object.keys(t).some((n=>e[n]!==t[n]))}(n=await this.secureWebContact(i),i=await this.secureWebContact(s))?(n=Object.keys(function(e,t){let n=Object.keys(t).filter((n=>e[n]!==t[n])),i={};for(let e of n)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}(n,i)).reduce(((e,t)=>({...e,[t]:s[t]})),{}),n=M({...n,webId:this._webId,orgId:this._orgId}),this.sendWebContact(n,t).then((()=>{}))):(this.removeFirstElementFromQueue(),Promise.resolve())}isPropertyPresentAndNotHashed(e,t){var n;return(n=null==t?void 0:t[e])&&(n=!(64===(null==(e=null==t?void 0:t[e])?void 0:e.length)&&Xi.hashPattern.test(e))),n}async secureWebContact(e){let t=["email","phone"].filter((t=>this.isPropertyPresentAndNotHashed(t,e)));if(!t.length)return e;let n=await Promise.all(t.map((t=>{var n=this._guid;return w(t="".concat(e[t]).concat(n))})));return t.reduce(((e,t,i)=>({...e,[t]:n[i]})),e)}async migrateToWebContact(){fe.setState((e=>{let{userInfo:t,customerData:n,...i}=e;return{...i,_userInfo:t,_customerData:n}}))}sendWebContact(e,t){return Ke.execute(this._webContactSendURL,"POST",{...e},{"Content-Type":"application/json"}).then((t=>{200===t.status?this.successSendingWebContact(e):this.errorSendingWebContact()})).catch((n=>{this.errorSendingWebContact(),ce.info("FAILED_SEND_WEB_CONTACT",{name:n.name,message:n.message,data:e,sourceMessage:t,stack:n.stack})}))}sendWebEvent(e){return Ke.execute(this._webEventSendURL,"POST",{...e,webId:this._webId,orgId:this._orgId},{"Content-Type":"application/json"}).catch((e=>ce.info("FAILED_TRACKING_WEB_EVENTS",{name:e.name,message:e.message,stack:e.stack})))}};class qi{constructor(e){let{placement:t,placements:n=[]}=e;this._placements=[],t&&this._placements.push(t),n.length&&this._placements.push(...n),this._placementsMap=new Map}getUniquePresentPlacements(){return this.constructPlacementsMap(),Array.from(this._placementsMap.values()).filter((e=>document.querySelector(e.selector)))}static createPlacementKey(e){return"".concat(e.selector,"_").concat(e.insertType)}constructPlacementsMap(){this._placements.forEach((e=>{null!=e&&e.selector&&null!=e&&e.insertType&&this._placementsMap.set(qi.createPlacementKey(e),e)}))}}class Qi{constructor(e){t(this,"obs",null),this.targetNode=e}observe(e){this.obs=new MutationObserver((function(t,n){for(const n of t)"childList"===n.type&&(0<(t=Array.from(n.removedNodes)).length&&e&&e(t))})),this.obs.observe(this.targetNode,{childList:!0,subtree:!0})}observing(){return null!==this.obs}disconnect(){this.obs&&(this.obs.disconnect(),this.obs=null)}}class Zi extends me{constructor(e){super(),this.prefix="".concat(e,"component.sdk.")}get(e){return super.get(this.getKey(e))}set(e,t){return super.set(this.getKey(e),t)}getKey(e){return this.prefix+e}}var Ji=new class{constructor(e){this.hostURL=e}track(e,t){let n="".concat(this.hostURL,"/user-activity/public/v1/activity");return Ke.execute(n,"POST",{activityType:e,page:JSON.stringify(t)},{"Content-Type":"text/plain"})}}(fe.getConfig().apiConfig.hostUrl);var $i=new class extends rt{constructor(e,n){super(e,n),t(this,"_variantsQueue",[]),t(this,"_injectedVariants",[]),t(this,"_staticPreviews",[]),t(this,"destroyForm",(e=>{let t=e.id;e=this._staticPreviews.findIndex((e=>e.params.config.formVariantId===t));let n=this._staticPreviews[e];n&&(n.disconnect(),this._staticPreviews.splice(e,1),e=this._injectedVariants.findIndex((e=>e.id===t)),this._injectedVariants.splice(e,1))})),this.removedNodeObserver=new Qi(document.body)}activate(e,t){super.activate(e,t),this._variantsQueue=tt.getStaticActiveFormVariants(fe.getConfig()).filter((e=>!e.rules||!e.rules.CUSTOM_CODE.enabled)).slice()}showFormFromCustomCode(e,t){let n=!0===e.rules.CUSTOM_CODE.enabled;e.rules&&!n||this._injectVariants([{...e,triggeredBy:t}])}showFormBySelector(e){let t=!0===e.rules.SELECTOR.enabled;e.rules&&!t||this._injectVariants([e])}destroy(){this._staticPreviews.forEach((e=>{let t=new ht(e.params.config.formVariantId);t.activate(),t.send("FormClose_[Name]"),t.destroy(),e.disconnect()})),this._injectedVariants=[],this.removedNodeObserver.disconnect()}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this._injectVariants([e])}isVariantAlreadyInjected(e){return!!this.getInjectedConnectorIds().find((t=>t===e))}getInjectedConnectorIds(){return this._injectedVariants.map((e=>e.id))}async _injectVariants(e){return await Promise.all(k(e.filter((e=>e&&(e.placement||e.placements))).map((e=>{const{id:t}=e,n=new qi(e).getUniquePresentPlacements();return n.length?(this._removeInjectedVariantsFromQueue(t),this._injectedVariants.push(e),this.prepareForm(e).then((t=>{let{appearance:i}=t;return F(n.map((t=>this._injectVariant(e,i,t))))})).catch((t=>{ce.error(t,"Error injectBuiltInForm call formVariantId="+e.id)}))):Promise.reject({formVariantId:t,message:"No placements found"})})),1))}async _injectVariant(e,t,n){var i,o,r;let{id:a,formId:l,triggeredBy:c}=e,d=t&&t.document||{};if(!Object.keys(d).length)return Promise.reject({formVariantId:a,message:"No appearance or documentModel found"});let h=new ht(a);h.activate();let u,m=ot.isInDebugMode(l),p=()=>{h.send("FormClose_[Name]"),this.userActionsDetector.formVariantStat.close(e.id),E.disconnect()},g=fe.getConfig().forms,E=new Ui({widgetType:"BUILT_IN",documentModel:d,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==g||null===(i=g[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:a,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:m,utmTag:null===(o=fe.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==g||null===(r=g[e.formId])||void 0===r?void 0:r.name,type:e.type,clContactId:s(e),branded:Ki.isFormBranded(e.formId),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:c||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Zi(fe.getPrefix().storagePrefix)},translations:t.translations,trackingService:h,placement:n});this.addWidgetClickHandler(E,h,e),E.on("CONTACT_ID_WAS_RECEIVED",(e=>{e&&(ge.set("clContactId",e),fe.setUserInfo({...fe.getUserInfo(),clContactId:e}),P({contactId:e}),Yi.addToQueue({widgetSubscriptionContactId:e},"[WebContactService] BuiltInWidgetTypeService. After widget subscription")),zi.emit("CONTACT_DATA_SUBMIT",{formVariantId:a})})),E.on("SHOW_WIDGET",(t=>{t.closeWidget&&p(),zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:c})})),E.on("CLOSE_WIDGET",(()=>p())),E.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(a)})),E.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:l,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})})),this.addInjectedDocumentConnector(a,E);try{if(!document.querySelector(n.selector))return Promise.reject({formVariantId:a,message:"No container element found"});u=E.connect(),this.observeRemovedNodesIfNeeded()}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}return m||(this.userActionsDetector.formVariantStat.view(a),this.userActionsDetector.formVariantHoverStat.visible(a),Hi.collect("FORM_RENDERED"),new ji(u,je.createFormParams(a,c,t.lang)).handle()),h.send("FormShow_[Name]"),this._staticPreviews.push(E),{rootElement:u,documentConnector:E}}_getReadyToInjectVariants(){return this._variantsQueue.filter((e=>e.placement&&e.placement.selector&&document.querySelector(e.placement.selector))).map((e=>[e,e.placement.selector&&document.querySelector(e.placement.selector)]))}_removeInjectedVariantsFromQueue(e){let t=this._variantsQueue.findIndex((t=>t.id===e));this._variantsQueue.splice(t,1)}observeRemovedNodesIfNeeded(){this.removedNodeObserver.observing()||this.removedNodeObserver.observe((()=>{this._injectedVariants.filter((e=>{var t,n,i;return!1===(null===(t=this.injectedPreviewMap[e.id])||void 0===t||null===(n=t.controllers[0])||void 0===n||null===(i=n.connectedElement)||void 0===i?void 0:i.isConnected)})).forEach(this.destroyForm)}))}}(new Je,Ge);var eo=new class extends rt{constructor(e,t){super(e,t)}showFormBySelector(e){let t=e.id;e&&e.rules&&e.rules.SELECTOR.enabled&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(t)||this.prepareAppearanceAndShowForm(e))}showFormFromCustomCode(e,t){let n=e.id;e&&e.rules&&(this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||this.prepareAppearanceAndShowForm(e,t))}showForm(e){if(!(this.isAppearanceLoading()||this.isDialogOpened()||this.isVariantAlreadyInjected(e.id)))return this.prepareAppearanceAndShowForm(e)}prepareAppearanceAndShowForm(e,t){return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((n=>(({appearance:n}=n),this._showForm(e,n,t)))).catch((t=>{ce.error(t,"Error showDetachedForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,o,r;let a=t&&t.document||{};if(!Object.keys(a).length)return Promise.reject({formVariantId:e.id,message:"No appearance or documentModel found"});let l=new ht(e.id);l.activate();let c,d=()=>{l.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)},h=fe.getConfig().forms,u=new Ui({widgetType:"DETACHED",documentModel:a,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==h||null===(i=h[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ot.isInDebugMode(e.formId),utmTag:null===(o=fe.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==h||null===(r=h[e.formId])||void 0===r?void 0:r.name,type:e.type,clContactId:s(e),branded:Ki.isFormBranded(e.formId),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Zi(fe.getPrefix().storagePrefix)},translations:t.translations,trackingService:l,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(u,l,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(ge.set("clContactId",t),fe.setUserInfo({...fe.getUserInfo(),clContactId:t}),P({contactId:t}),Yi.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] DetachedWidgetTypeService. After widget subscription")),zi.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})}));try{c=u.connect(document.body)}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}return this.addInjectedDocumentConnector(e.id,u),this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ot.isInDebugMode(e.formId)||new ji(c,je.createFormParams(e.id,n,t.lang)).handle(),l.send("FormShow_[Name]"),{rootElement:c,documentConnector:u}}isDialogOpened(){return!!document.body.querySelector(".cl-dialog")}}(new Je,Ge);var to=new class extends rt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((i=>(({appearance:i}=i),this._showForm(e,i,t).catch((e=>{ce.error(e,"Error _showForm connect1 "+n)}))))).catch((e=>{ce.error(e,"Error showFloatingBoxForm call formVariantId="+n)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{ce.error(t,"Error showFloatingBoxForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,o,r;let a=t&&t.document||{};if(!Object.keys(a).length)return Promise.reject({formVariantId:e.id,message:"No appearance or documentModel found"});let l=new ht(e.id);l.activate();let c,d=()=>{l.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)},h=fe.getConfig().forms,u=new Ui({widgetType:"FLOATING_BOX",documentModel:a,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==h||null===(i=h[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ot.isInDebugMode(e.formId),utmTag:null===(o=fe.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==h||null===(r=h[e.formId])||void 0===r?void 0:r.name,type:e.type,clContactId:s(e),branded:Ki.isFormBranded(e.formId),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Zi(fe.getPrefix().storagePrefix)},translations:t.translations,trackingService:l,displayPosition:"fixed"});await this.componentResolver.loadComponentsIfNecessary(t.document,fe.getConfig().apiConfig.staticResourcesUrl),this.addWidgetClickHandler(u,l,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(ge.set("clContactId",t),fe.setUserInfo({...fe.getUserInfo(),clContactId:t}),P({contactId:t}),Yi.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBoxWidgetTypeService. After widget subscription")),zi.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})})),this.addInjectedDocumentConnector(e.id,u);try{c=u.connect(document.body)}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ot.isInDebugMode(e.formId)||new ji(c,je.createFormParams(e.id,n,t.lang)).handle(),l.send("FormShow_[Name]"),{rootElement:c,documentConnector:u}}isFloatingBoxVisible(){return!!document.body.querySelector(".cl-floating-box")}}(new Je,Ge);var no=new class extends rt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>{({appearance:n}=n),this._showForm(e,n,t)})).catch((e=>{ce.error(e,"Error showFloatingBarForm call formVariantId="+n)})))}showForm(e){if(!this.isVariantAlreadyInjected(e.id))return this.addInjectedConnectorId(e.id),this.prepareForm(e).then((t=>(({appearance:t}=t),this._showForm(e,t)))).catch((t=>{ce.error(t,"Error showFloatingBarForm call formVariantId="+e.id)}))}async _showForm(e,t,n){var i,o,r;let a=t&&t.document||{};if(!Object.keys(a).length)return Promise.reject({formVariantId:e.id,message:"No appearance or documentModel found"});let l=new ht(e.id);l.activate();let c,d=()=>{l.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)},h=fe.getConfig().forms,u=new Ui({widgetType:"FLOATING_BAR",documentModel:a,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==h||null===(i=h[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,widgetDebugMode:ot.isInDebugMode(e.formId),optionalDocumentStyles:{width:"100%"},utmTag:null===(o=fe.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==h||null===(r=h[e.formId])||void 0===r?void 0:r.name,type:e.type,clContactId:s(e),branded:Ki.isFormBranded(e.formId),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Zi(fe.getPrefix().storagePrefix)},translations:t.translations,trackingService:l,displayPosition:"fixed"});this.addWidgetClickHandler(u,l,e),u.on("CONTACT_ID_WAS_RECEIVED",(t=>{t&&(ge.set("clContactId",t),fe.setUserInfo({...fe.getUserInfo(),clContactId:t}),P({contactId:t}),Yi.addToQueue({widgetSubscriptionContactId:t},"[WebContactService] FloatingBarWidgetTypeService. After widget subscription")),zi.emit("CONTACT_DATA_SUBMIT",{formVariantId:e.id})})),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("WIDGET_CLICKED",(()=>l.send("FormClick_[Name]"))),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})})),this.addInjectedDocumentConnector(e.id,u);try{c=u.connect(document.body)}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}return this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ot.isInDebugMode(e.formId)||new ji(c,je.createFormParams(e.id,n,t.lang)).handle(),l.send("FormShow_[Name]"),{rootElement:c,documentConnector:u}}}(new Je,Ge);var io=new class extends rt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id,i=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>{({appearance:n}=n),this._showForm(e,i,n,t)})).catch((e=>{ce.error(e,"LauncherMainService:Error showLauncher call formVariantId="+n)})))}showForm(e){let t=e.id,n=e.linkedToVariantId;this.isAppearanceLoading()||this.isLauncherVisible()||this.isVariantAlreadyInjected(t)||(this.addInjectedConnectorId(t),this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,n,t)})).catch((e=>{ce.error(e,"LauncherMainService:Error showForm call formVariantId="+t)})))}async _showForm(e,t,n,i){var o,r,a;let l=n&&n.document||{};if(!Object.keys(l).length)return Promise.reject({formVariantId:e.id,message:"No appearance or documentModel found"});let c=new ht(e.id);c.activate();let d,h=()=>{this.userActionsDetector.onWidgetClosed(e),m.disconnect(),this.removeInjectedConnectorId(e.id)},u=fe.getConfig().forms,m=new Ui({widgetType:"LAUNCHER",documentModel:l,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==u||null===(o=u[e.formId])||void 0===o?void 0:o.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,n.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:n.lang,widgetDebugMode:ot.isInDebugMode(e.formId),utmTag:null===(r=fe.getConfig().formConfig)||void 0===r?void 0:r.utmTag,widgetId:e.formId,widgetName:null==u||null===(a=u[e.formId])||void 0===a?void 0:a.name,type:e.type,clContactId:s(e),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:i||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},optionalDocumentStyles:{display:"flex"},storage:new Zi(fe.getPrefix().storagePrefix)},translations:n.translations,trackingService:c,displayPosition:"fixed"});m.on("SHOW_WIDGET",(n=>{n.closeWidget&&h(),t&&(zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t,formVariantId:e.id,triggeredByLauncher:!0}),c.send("LauncherClick_[Name]"))})),this.addWidgetClickHandler(m,c,e),m.on("CLOSE_WIDGET",(()=>h())),m.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),m.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})})),this.addInjectedDocumentConnector(e.id,m);try{d=m.connect(document.body)}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ot.isInDebugMode(e.formId)||new ji(d,je.createFormParams(e.id,i,n.lang)).handle(),c.send("LauncherShow_[Name]")}isLauncherVisible(){return!!document.body.querySelector(".cl-launcher")}}(new Je,Ge);var oo=new class extends rt{constructor(e,t){super(e,t)}showFormFromCustomCode(e,t){let n=e.id;this.isAppearanceLoading()||this.isVariantAlreadyInjected(n)||(this.addInjectedConnectorId(n),this.prepareForm(e).then((n=>(({appearance:n}=n),this._showForm(e,n,t)))).catch((e=>{ce.error(e,"Error showContentLocker call formVariantId="+n)})))}showForm(e){if(!(this.isAppearanceLoading()||this.isContentLockerVisible()||this.isVariantAlreadyInjected(e.id))){this.addInjectedConnectorId(e.id);var t=this._showBackdropWhileLoading();this.prepareForm(e).then((t=>{({appearance:t}=t),this._showForm(e,t)})).catch((t=>{ce.error(t,"Error showContentLocker call formVariantId="+e.id)})).finally(t)}}_showBackdropWhileLoading(){let e=document.createElement("div");return e.classList.add("cl-content-locker-backdrop"),e.style.width="100%",e.style.height="100%",e.style.backgroundColor="rgba(0, 0, 0, 0.1)",e.style.backdropFilter="blur(20px)",e.style.display="flex",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.zIndex="99999999",document.body.appendChild(e),()=>e.remove()}async _showForm(e,t,n){var i,o,r;let a=t&&t.document||{},l=new ht(e.id);l.activate();let c,d=()=>{l.send("FormClose_[Name]"),this.userActionsDetector.onWidgetClosed(e),u.disconnect(),this.removeInjectedConnectorId(e.id)},h=fe.getConfig().forms,u=new Ui({widgetType:"CONTENT_LOCKER",documentModel:a,componentResolver:this.componentResolver,config:{siteId:fe.getConfig().siteId,clCustomerId:Ze.getUserIdentifier(),interactionId:null==h||null===(i=h[e.formId])||void 0===i?void 0:i.__interactionId,appearanceRevision:e.appearanceRevision,revision:e.revision,formVariantId:e.id,hostUrl:fe.getConfig().apiConfig.hostUrl,subscribeContactUrl:new Ue("/forms/v1/subscribe/".concat(je.createVariantUUID(e.id,t.lang))).get(),browserLanguage:this.browserLanguageService.getLanguageForForms(),appearanceLanguage:t.lang,optionalDocumentStyles:{width:"100%",height:"100%"},widgetDebugMode:ot.isInDebugMode(e.formId),utmTag:null===(o=fe.getConfig().formConfig)||void 0===o?void 0:o.utmTag,widgetId:e.formId,widgetName:null==h||null===(r=h[e.formId])||void 0===r?void 0:r.name,type:e.type,clContactId:s(e),branded:Ki.isFormBranded(e.formId),staticResourcesUrl:fe.getConfig().apiConfig.staticResourcesUrl,triggeredBy:n||"Rules",storeRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.setRelativeTimerViewDate(e.id)},clearRelativeTimerViewDate:()=>{this.userActionsDetector.formVariantStat.clearRelativeTimerViewDate(e.id)},getRelativeTimerViewDate:()=>{var t;return null===(t=this.userActionsDetector.formVariantStat.getStats(e.id).formVariants[e.id])||void 0===t?void 0:t.relativeTimerViewDate},storage:new Zi(fe.getPrefix().storagePrefix)},translations:t.translations,trackingService:l,displayPosition:"fixed",disableGlobalScroll:!0});this.addWidgetClickHandler(u,l,e),u.on("SHOW_WIDGET",(t=>{t.closeWidget&&d(),t.variantId&&zi.emit("SHOW_WIDGET_FROM_ANOTHER_WIDGET",{linkedToVariantId:t.variantId,formVariantId:e.id,triggeredBy:n})})),u.on("CLOSE_WIDGET",(()=>d())),u.on("CLOSE_ICON_CLICKED",(()=>d())),u.on("CONTACT_DATA_SUBMIT",(()=>{this.userActionsDetector.formVariantStat.submit(e.id)})),u.on("WIDGET_NAVIGATION_STATE_NOT_FOUND",(t=>{Ji.track("WIDGET_NAVIGATION_STATE_NOT_FOUND",{...t,widgetId:e.formId,siteId:fe.getConfig().siteId,accountId:fe.getConfig().accountId,clCustomerId:Ze.getUserIdentifier(),clContactId:s(e)})})),this.addInjectedDocumentConnector(e.id,u);try{c=u.connect(document.body)}catch(t){throw ce.error(t,"Error _showForm connect"+e.id),t}this.userActionsDetector.formVariantStat.view(e.id),this.userActionsDetector.formVariantHoverStat.visible(e.id),ot.isInDebugMode(e.formId)||new ji(c,je.createFormParams(e.id,n,t.lang)).handle(),l.send("FormShow_[Name]")}isContentLockerVisible(){return!!document.body.querySelector(".cl-content-locker")}}(new Je,Ge);class ro{constructor(){t(this,"showForm",(e=>this._delegate(e.type,"showForm",[e])))}activateAll(e,t){Object.values(ro._delegates).forEach((n=>n.activate(e,t)))}destroyAll(){Object.values(ro._delegates).forEach((e=>e.destroy()))}getShownForms(){return Object.keys(ro._delegates).reduce(((e,t)=>({...e,[t]:ro._delegates[t].getInjectedConnectorIds()})),{})}showFormFromSelectorClick(e){"BUILT_IN"===e.type||"DETACHED"===e.type?this._delegate(e.type,"showFormBySelector",[e]):this._delegate(e.type,"showFormFromCustomCode",[e])}showFormFromCustomCode(e,t){this._delegate(e.type,"showFormFromCustomCode",[e,t])}getAppearanceFromCacheOrLoad(e){return this._delegate(e.type,"getAppearanceFromCacheOrLoad",[e])}prepareForm(e,t){return this._delegate(e.type,"prepareForm",[e,t])}destroyForm(e){return this._delegate(e.type,"destroyForm",[e])}_delegate(e,t,n){let i=ro._delegates[e];if(!i)throw Error("WidgetTypeFacade: ".concat(e," class is not delegated"));let o=i[t];if(!o||"function"!=typeof o)throw Error("WidgetTypeFacade: ".concat(e," class ").concat(t," method is not delegated"));return o.apply(i,n)}}t(ro,"_delegates",{BUILT_IN:$i,DETACHED:eo,FLOATING_BOX:to,FLOATING_BAR:no,LAUNCHER:io,CONTENT_LOCKER:oo});var so=new ro;var ao=new class{constructor(){this.changeObserver=new it,this.formVariantListenedMap=new Map}activate(){let e=tt.getFormVariants(fe.getConfig()).filter((e=>{var t,n,i,o;return e.rules&&(null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.enabled)&&((null===(n=e.rules.SELECTOR)||void 0===n?void 0:n.selector)||(null===(i=e.rules.SELECTOR)||void 0===i||null===(o=i.selectors)||void 0===o?void 0:o.length))})).filter((e=>tt.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_doesFormVariantListenedMapContainValue(e,t){return!!this.formVariantListenedMap.has(e)&&(!!(e=this.formVariantListenedMap.get(e))&&e.has(t))}_setFormVariantListenedMapValue(e,t){this.formVariantListenedMap.has(e)?this.formVariantListenedMap.get(e).add(t):this.formVariantListenedMap.set(e,new Set([t]))}_tryToAddClickListener(e){e.forEach((e=>{var t,n;let i=null===(t=e.rules.SELECTOR)||void 0===t?void 0:t.selector;t=(null===(n=e.rules.SELECTOR)||void 0===n?void 0:n.selectors)||[],i&&!t.includes(i)&&t.push(i),t.length&&t.forEach((t=>{if(!this._doesFormVariantListenedMapContainValue(e.id,t))try{Array.from(document.querySelectorAll(t)).forEach((n=>{n&&(this._setFormVariantListenedMapValue(e.id,t),n.addEventListener("click",this.formVariantClickHandler(e)))}))}catch(t){ce.error(t,"Failed to add click listener formVariantId="+e.id)}}))}))}formVariantClickHandler(e){return()=>{so.showFormFromSelectorClick(e),zi.emit("SHOW_WIDGET_BY_CLICKING_ELEMENT",e)}}destroy(){this.changeObserver.disconnect()}};var lo=new class{constructor(){this.changeObserver=new it,this.formVariantListened={}}activate(){let e=tt.getFormVariants(fe.getConfig()).filter((e=>e.rules&&e.rules.CUSTOM_CODE.enabled&&e.rules.CUSTOM_CODE.selector)).filter((e=>tt.filterByStatus(e)));this._tryToAddClickListener(e),this.changeObserver.observe((()=>this._tryToAddClickListener(e)))}_tryToAddClickListener(e){e.forEach((e=>{let t=e.rules.CUSTOM_CODE.selector;if(t&&!this.formVariantListened[e.id])try{let n=document.querySelector(t);n&&(this.formVariantListened[e.id]=e,n.addEventListener("click",(()=>{so.showFormFromCustomCode(e),zi.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e.id)})))}catch(t){ce.error(t,"Failed to add click listener formVariantId="+e.id)}}))}destroy(){this.changeObserver.disconnect()}};let co=new Set(["FLOATING_BOX","FLOATING_BAR"]),ho={corners:[],edges:[],content:[],offset:[],all:[]};var uo=new class{isMobile(e){return U(e.document)}getWidgetSize(e,t,n){return t=t.document.shared.actualSize&&t.document.shared.actualSize[n?"mobile":"desktop"],{width:"FLOATING_BAR"===e.type?tn.width:parseInt(t.width),height:parseInt(t.height)}}getCoords(e,t){var n;if(!t)return ho;let i=this.isMobile(t);return(!i||null!==(n=t.document.shared.actualSize)&&void 0!==n&&n.mobile)&&(n=this.mapProps(e.type,t.document.shared,i))?(t=this.getWidgetSize(e,t,i),"DETACHED"===e.type&&(n.horizontalOffset=(tn.width-t.width)/2,n.verticalOffset=(tn.height-t.height)/2),e={x:parseInt(n.horizontalOffset),y:parseInt(n.verticalOffset)},this.buildCoordsLists({...n,widgetSize:t,indentationPosition:e})):ho}findTheWidgetsRootElementToBeOverlapped(e,t,n){let i,o=localStorage.getItem("esOverlapDebug");return n.find(((t,n)=>{let[r,s]=t;return t=document.elementsFromPoint(r,s),t=this.getTargetElementThatRelateToWidget(t),o&&((n=document.createElement("div")).id=e.id,n.innerHTML="".concat(e.id),n.style.backgroundColor=t?"red":"green",n.style.color="white",n.style.fontSize="8px",n.style.width="auto",n.style.height="auto",n.style.position="fixed",n.style.left="".concat(r,"px"),n.style.top="".concat(s,"px"),n.style.zIndex=String(Math.round(Number.MAX_SAFE_INTEGER/1e7)),document.body.appendChild(n)),i=t})),i}mapProps(e,t,n){switch(e){case"FLOATING_BAR":return n?t.floatingBar.mobile:t.floatingBar.desktop;case"FLOATING_BOX":return n?t.floatingBox.mobile:t.floatingBox;case"DETACHED":return{};default:throw Error("Can not map props for overlap calculation of ".concat(e))}}getTargetElementThatRelateToWidget(e){return e.filter((e=>e instanceof HTMLElement)).find((e=>null!=e&&e.hasAttribute("cl-connector-root-element")?co.has(e.getAttribute("cl-connector-root-element")):null!=e&&e.hasAttribute("cl-type")?(e=e.closest("[cl-connector-root-element]"),co.has(e.getAttribute("cl-connector-root-element"))):null))}getCornersPoints(e){let{horizontalPosition:t,verticalPosition:n,widgetSize:i,indentationPosition:o}=e;return{x0:e="LEFT"===t?o.x:tn.width-(o.x+i.width),x1:"LEFT"===t?e+i.width:tn.width-o.x,y0:"BOTTOM"===n?tn.height-o.y:o.x+i.height,y1:"TOP"===n?o.y:tn.height-(o.y+i.height)}}buildCoordsLists(e){let{x0:t,x1:n,y0:i,y1:o}=this.getCornersPoints(e);var{widgetSize:r}=e;e=[[t,i],[t,o],[n,i],[n,o]];let s=[],a=[],l=[],c=Math.round(r.height/2),d=Math.round(r.height/6),h=Math.round(r.width/2);r=Math.round(r.width/6);for(let e=0;6>=e;e++)s.push([t+r*e,i]),s.push([t+r*e,o]),s.push([t,o+d*e]),s.push([n,o+d*e]),a.push([t+h,o+c]);let u=[[-50,-50],[-50,50],[50,-50],[50,50]];return e.forEach(((e,t)=>{let[n,i]=e;u.forEach(((e,t)=>{let[o,r]=e;l.push([n+o,i+r])}))})),{corners:e,edges:s,content:a,offset:l,all:e.concat(s).concat(a).concat(l)}}};class mo{createScaledPixelMatrix(){return Array.apply(null,Array(Math.round(tn.width/mo.pxScaleFactor))).map((()=>Array.apply(null,Array(Math.round(tn.height/mo.pxScaleFactor)))))}getIntersectionsForBatch(e){let t=this.createScaledPixelMatrix(),n=new Set;e.forEach((e=>{let i=e.fV.id,o=Math.round(e.coordsMap.corners[1][0]/mo.pxScaleFactor),r=Math.round(e.coordsMap.corners[3][0]/mo.pxScaleFactor),s=Math.round(e.coordsMap.corners[1][1]/mo.pxScaleFactor);e=Math.round(e.coordsMap.corners[0][1]/mo.pxScaleFactor);for(let a=o;a<r;a++)for(let l=s;l<e;l++)try{t[a][l]?(t[a][l]+="_".concat(i),n.add(t[a][l])):t[a][l]=i}catch(t){ce.warn("Virtual overlap coords fV ".concat(i," x S").concat(o," xE ").concat(r," yStart ").concat(s," yEnd ").concat(e),t)}}));let i=[...n.values()],o=new Set,r=[],s=new Set,a=[];return i.forEach(((e,t)=>{s.add(t);let n=e.split("_");(e=i.filter(((e,t)=>!s.has(t))).filter((e=>n.filter((e=>!o.has(e))).find((t=>e.includes(t)))))).length?(e=e.join("_").split("_"),e=n.concat(e),e=[...new Set(e).values()],r.push(e),e.forEach((e=>o.add(e)))):a.push(n)})),a.forEach((e=>{let t=e.filter((e=>!o.has(e))).length;e.length===t&&(r.push(e),e.forEach((e=>o.add(e))))})),{list:r,set:o}}}t(mo,"pxScaleFactor",10);var po=new mo;class go{static get(e){let t=e.filter((e=>e.rules.pageFulfilled)),n=[];return 1===t.length?t[0]:(n=t.length?t:e,n[Math.floor(Math.random()*n.length)])}}class Eo{constructor(){let{unlockTimeout:e=null}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t(this,"_unlockTimeout",null),t(this,"_timers",{}),t(this,"_locked",{}),this._unlockTimeout=e}setStatus(e){let t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!0===t?this._locked[e]=t:(delete this._locked[e],clearTimeout(this._timers[e]),delete this._timers[e])}is(e){return this._locked[e]===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])}canLock(e){return!this.is(e,!0)}isLocked(){return Object.values(this._locked).some((e=>!0===e))}lock(e){this.canLock(e)&&this.setStatus(e,!0);let t=this.unlock.bind(this,e);return this._unlockTimeout&&Object.assign(this._timers,{[e]:setTimeout(t,this._unlockTimeout)}),t}lockAll(e){e.forEach((e=>this.lock(e)))}unlock(e){this.is(e,!0)&&this.setStatus(e,!1)}unlockAll(e){(e||Object.keys(this._locked)).forEach((e=>this.unlock(e)))}}class vo extends Eo{unlockWhenReady(e,t){let n,i,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,r=new Promise((e=>{n=t.documentConnector.entryModule.viewRenderer.viewResourceManager.systemEventEmitter.on("VIEW_COMPONENT_RESOURCES_LOADED",(()=>{e()})).off}));Promise.race([r,new Promise((e=>{i=setTimeout(e,o)}))]).finally((()=>{this.unlock(e),n(),clearTimeout(i)}))}}class fo{constructor(){t(this,"semaphore",new vo),this.q=[]}async getOverlapState(e){var t,n,i=await so.getAppearanceFromCacheOrLoad(e);return null!=i&&null!==(t=i.document)&&void 0!==t&&null!==(n=t.shared)&&void 0!==n&&n.actualSize?(t=uo.getCoords(e,i)).all.length?{fV:e,rootElement:i=uo.findTheWidgetsRootElementToBeOverlapped(e,i,t.all),coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:t}:{fV:e,rootElement:void 0,coordsMap:ho}}async processBatch(e){if(this.semaphore.isLocked())return Promise.resolve();var t=await Promise.all(this.q.map((e=>this.getOverlapState(e).then((t=>({fV:e,...t}))))));this.q=[];let n=t.filter((e=>!e.coordsMap.all.length));await Promise.all(n.map((t=>(e(t.fV.id),so.showForm(t.fV)))));let i=(t=t.filter((e=>e.coordsMap.all.length)).filter((e=>!e.rootElement))).reduce(((e,t)=>(e.set(t.fV.id,t),e)),new Map);if(1<t.length){let{list:n,set:o}=po.getIntersectionsForBatch(t);t.filter((e=>!o.has(e.fV.id))).forEach((t=>{so.showForm(t.fV),e(t.fV.id)}));let r=new Set;n.forEach((e=>{e=e.map((e=>i.get(e))).map((e=>e.fV)),e=go.get(e),r.add(e.id),this.semaphore.lock(e.id)})),await Promise.all([...r].map((async t=>{t=i.get(t),e(t.fV.id);let n=await so.showForm(t.fV);return this.semaphore.unlockWhenReady(t.fV.id,n),n})))}else if(t.length)return[t]=t,e(t.fV.id),so.showForm(t.fV);return Promise.resolve()}async addBatch(e,t){this.q.push(...e),await this.processBatch(t)}}var yo=new class{constructor(){this.floatingDisplayQueue=new fo}async display(e,t,n,i,o){let r=[],s=[],a=[],l=[],c=[];if(e.forEach((e=>{var t,n,i,o;"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)||"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(i=e.rules)||void 0===i||null===(o=i.ANNOYANCE)||void 0===o?void 0:o.type)?c.push(e):"DETACHED"===e.type?l.push(e):co.has(e.type)?r.push(e):"BUILT_IN"===e.type?a.push(e):s.push(e)})),await this.floatingDisplayQueue.addBatch(r,t),await Promise.all(l.map((e=>(t(e.id),so.showForm(e))))),0===r.concat(l).length&&c.length){1<c.length&&c.find((e=>{var t,n;return"SHOW_IN_INTERVAL"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)}))&&(c=c.filter((e=>{var t,i;let o="SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"!==(null==e||null===(t=e.rules)||void 0===t||null===(i=t.ANNOYANCE)||void 0===i?void 0:i.type);return o||n(e.id),o})));let e=c.length,i=c.filter((e=>{var t,n;return"SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===(null==e||null===(t=e.rules)||void 0===t||null===(n=t.ANNOYANCE)||void 0===n?void 0:n.type)})).length,r=go.get(c);t(r.id),c.filter((e=>e.id!==r.id)).forEach((t=>{n(t.id),1<e&&i===e&&o(t.id)})),await so.showForm(r)}else c.forEach((e=>n(e.id)));await Promise.all(s.map((async e=>(t(e.id),so.showForm(e))))),await F(this.reorderBuiltInForms(a).map((async e=>so.showForm(e).then((n=>{if((n=n.length?n[0]:n).length&&"rejected"===n[0].status||"rejected"===n.status)return i(e.id);t(e.id)}),(()=>{i(e.id)})))))}async prepareForDisplay(e){return so.prepareForm(e,{ignoreLoading:!0})}reorderBuiltInForms(e){return e.sort(((e,t)=>(e=e.placement&&"REPLACE"===e.placement.insertType||e.placements&&e.placements.some((e=>"REPLACE"===e.insertType)),t=t.placement&&"REPLACE"===t.placement.insertType||t.placements&&t.placements.some((e=>"REPLACE"===e.insertType)),e&&!t?1:!e&&t?-1:0)))}};var _o=new class{log(){localStorage.getItem("esRulesLogger")&&console.log(...arguments)}};class To{static isEnabled(){return"true"===he.get().formConfig.ANNOYANCE_SAFEGUARD_ENABLED}static get(){try{var e="object"==typeof he.get().formConfig.ANNOYANCE_SAFEGUARD?he.get().formConfig.ANNOYANCE_SAFEGUARD:JSON.parse(he.get().formConfig.ANNOYANCE_SAFEGUARD)}catch(t){e=null}return e||To.fallbackConfig}}t(To,"fallbackConfig",{unit:"SECOND",amount:"10"});class bo{static getCurrentNumberOfAnnoyanceWidgets(){let e=so.getShownForms(),t=[];return Object.keys(e).filter((e=>xe.has(e))).forEach((n=>{t.push(...e[n])})),t.length}static isAlreadyRendered(e,t){let n=so.getShownForms();return n[e]&&n[e].includes(t)}static isRenderingAllowed(e,t,n){if(this.isAlreadyRendered(n,t))return!0;let{sessionAnnoyanceLastWidgetClosedMs:i,sessionAnnoyanceLastWidgetPagesCount:o,sessionPagesCount:r}=e;if(Se.getAll().includes(To.get().unit)){if(Number.isInteger(i))return e=i>(e=Ae.convert(To.get().unit,Se.MILLISECOND,To.get().amount)),_o.log("annoyance time diffing ".concat(JSON.stringify(To.get())," = ").concat(e)),e&&0===bo.getCurrentNumberOfAnnoyanceWidgets()}else if(o)return e=r-o>=(e=To.get().amount),_o.log("annoyance pages count ".concat(r," (sessionPagesCount) ").concat(JSON.stringify(To.get())," = ").concat(e)),e&&0===bo.getCurrentNumberOfAnnoyanceWidgets();return 0===bo.getCurrentNumberOfAnnoyanceWidgets()}}let Co=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>!!e)).join("__")},Io={COOKIE:"cookie",CONTACT_ID:"contactId",EXTERNAL_CUSTOMER_ID:"externalCustomerId",EMAIL:"email",PHONE:"phone"};class Oo{constructor(e,t,n,i,o){this.cookie=e,this.contactId=t,this.email=n,this.phone=i,this.externalCustomerId=o}toJSON(){return JSON.stringify(this)}toLocatorsList(){return Object.keys(Io).filter((e=>!!this[Io[e]])).map((e=>({type:Io[e],value:this[Io[e]]})))}static fromUserInfo(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Oo(void 0,e.clContactId||e.esContactId||e.utmContactId,e.email,e.phone,e.externalCustomerId)}}class So{static async request(e){let t=fe.getConfig(),n=Ze.getUserIdentifier(),i=Oo.fromUserInfo(fe.getUserInfo());return i.cookie=n,e={accountId:t.accountId||t.orgId,contactId:i.contactId,locators:i.toLocatorsList(),checks:e},Ke.execute(t.apiConfig.asyncRulesCheckUrlV2,"POST",e,So.getHeadersV2()).then((e=>e.body)).catch((e=>(ce.error(e,"Failed on async rules check V2 "),null)))}}t(So,"getHeadersV2",(()=>({"cl-customer-id":Ze.getUserIdentifier()})));class Ao{set(e,t){return Le.set(e,t)}get(e){return Le.get(e)}remove(e){return Le.remove(e)}}class No{constructor(e,t,n){let i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;this.cacheProvider=e,this.cacheKey=t,this.cleanupInterval=n,this.defaultTTl=i,this.cleanupInterval&&this.startCleanup()}startCleanup(){this.interval=setInterval((()=>this.cleanup()),this.cleanupInterval)}stopCleanup(){this.interval&&(clearInterval(this.interval),this.interval=null)}cleanup(){var e=this.getMap();let t=!1;for(let n in e)e[n].expirationDate&&Date.now()>e[n].expirationDate&&(delete e[n],t=!0);t&&(e=JSON.stringify(e),this.cacheProvider.set(this.cacheKey,e))}set(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.defaultTTl,i=3<arguments.length?arguments[3]:void 0,o=4<arguments.length?arguments[4]:void 0;try{let r=n?Date.now()+n:null,s=this.getMap();s[e]={value:t,expirationDate:r,clContactId:i,webId:o};let a=JSON.stringify(s);this.cacheProvider.set(this.cacheKey,a)}catch(e){ce.info("Failed to set item to session storage",e)}}get(e){try{let t=this.getMap();if(!t.hasOwnProperty(e))return null;let n=t[e];return n.expirationDate&&Date.now()>n.expirationDate?(this.delete(e),null):n}catch(e){return ce.info("Failed to get item from session storage",e),null}}delete(e){try{let t=this.getMap();delete t[e];let n=JSON.stringify(t);this.cacheProvider.set(this.cacheKey,n)}catch(e){ce.info("Failed to remove item from session storage",e)}}getMap(){try{let e=this.cacheProvider.get(this.cacheKey);return e?JSON.parse(e):{}}catch(e){return ce.info("Failed to get item from session storage",e),{}}}clear(){this.cacheProvider.remove(this.cacheKey)}}var Ro=new class{constructor(){if(this.isFeatureEnabled()){var e,t;this.lock=new Eo,this.initAsyncRulesCheckCache();let n=fe.getConfig();this.segmentationWithoutContactIdEnabled=(null===(e=n.features)||void 0===e?void 0:e.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET)&&!0===(null===(t=n.features)||void 0===t?void 0:t.SEGMENT_BY_CONTACT_ACTIVITY_IN_WIDGET),this.generalHideForSubscribersCache=!1,this.widgetHideForSubscribersCache=new Map,this.serviceFailedToProcess=!1}}initAsyncRulesCheckCache(){Le.registerKeys("es.async.rules.check.cache","es.async.rules.check.cache.duration.ms"),this.asyncRulesCheckCache=new No(new Ao,"es.async.rules.check.cache",4e3);let e=Le.get("es.async.rules.check.cache.duration.ms");this.asyncRulesCheckCacheDuration=!isNaN(e)&&+e||3e5}isFeatureEnabled(){var e,t;return(null===(e=fe.getConfig().features)||void 0===e?void 0:e.CHECK_SEGMENT_MEMBERSHIP)&&!0===(null===(t=fe.getConfig().features)||void 0===t?void 0:t.CHECK_SEGMENT_MEMBERSHIP)}getTtl(e,t){var n,i;let o=null;return 429===(null===(n=e.response.error)||void 0===n?void 0:n.status)?o=5e3:e.response.error&&404!==(null===(i=e.response.error)||void 0===i?void 0:i.status)||(o=t),o}processAsyncRule(e,t,n,i,o,r,s,a,l,c){o=Co(o,a),i[e.formId].push(o),(e=this.asyncRulesCheckCache.get(a))&&!e[l]&&e[l]!==c&&(this.asyncRulesCheckCache.delete(a),e=void 0),e?t[o]=e.value.response.checkResult:(t[o]=void 0,n.push({type:r,params:{[s]:a},response:void 0}))}processResponse(e,t,n,i,o,r){e[t=Co(t,n.params[i])]=n.response.checkResult,this.asyncRulesCheckCache.set(n.params[i],n,this.getTtl(n,this.asyncRulesCheckCacheDuration),o,r)}containsIdentifyFields(e){return!!e.fields&&e.fields.some((e=>!!("phone"===e.id|"email"===e.id)))}async processAsyncRules(e,t,n){if(this.lock.isLocked())return[];let i=[],o=[];return e.reduce(((e,i)=>{let o="FOR_ALL"===tt.getForm(i.formId).publishStatus&&i.useCase===We.REQUEST_FORM;var r=n===i.formId,s=et.isDebugVariantShouldBeShown(tt.getDebugFormVariants(),i.id);return r=t&&(r||s),s=!tt.formVariantHasEnabledAsyncRules(i),r||s&&!o?e.push({fV:i,shouldBeRendered:!0}):e.push({fV:i,shouldBeCheckedByAsyncRules:!0}),e}),[]).forEach((e=>{let{fV:t,shouldBeCheckedByAsyncRules:n}=e;n?i.push(t):o.push(t)})),e=await this.checkBatch(i),o.concat(e)}async checkBatch(e){var t;let n=[];if(this.serviceFailedToProcess)return n;let i=[],o={},r={},s=ge.get("clContactId")||null,a=!!s,l=Ze.getUserIdentifier();if(e.forEach((e=>{r[e.formId]=[];var t=e.asyncRules.SHOW_IF_SEGMENT_MEMBER;let n=e.asyncRules.HIDE_FOR_SUBSCRIBERS;var c=t&&t.enabled;let d=c&&(this.segmentationWithoutContactIdEnabled||a),h=e.useCase===We.REQUEST_FORM&&!d&&!this.containsIdentifyFields(e);d?this.processAsyncRule(e,o,i,r,"SHOW_IF_SEGMENT_MEMBER","IS_IN_SEGMENT","segmentId",t.segmentId,"clContactId",s):c&&(r[e.formId].push(Co("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)),o[Co("SHOW_IF_SEGMENT_MEMBER",null==t?void 0:t.segmentId)]=void 0),h&&this.processAsyncRule(e,o,i,r,"SHOW_IF_WEB_ID_MAPPED","IS_WEB_ID_MAPPED","webId",l,"webId",l),n&&n.enabled&&(t=Co("HIDE_FOR_SUBSCRIBERS",n.checkThisWidgetOnly&&e.formId),r[e.formId].push(t),(c=n.checkThisWidgetOnly?this.widgetHideForSubscribersCache.get(e.formId):this.generalHideForSubscribersCache)?o[t]=!c.response.checkResult:(o[t]=void 0,i.push({type:"IS_ALREADY_SUBSCRIBED",params:{widgetId:n.checkThisWidgetOnly&&e.formId||void 0},response:void 0})))})),!i.length)return B(e,r,o);i=function(e){return Object.values(e.reduce(((e,t)=>{let n=Co(t.type,t.params.segmentId,t.params.widgetId);return e[n]||(e[n]=t),e}),{}))}(i),this.lock.lock(0);let c=await So.request(i.filter((e=>!e.response)));return this.lock.unlock(0),c?(null==c||null===(t=c.checks)||void 0===t||t.forEach((e=>{if("IS_IN_SEGMENT"===e.type)Co("SHOW_IF_SEGMENT_MEMBER",e.params.segmentId),this.processResponse(o,"SHOW_IF_SEGMENT_MEMBER",e,"segmentId",s,l);else if("IS_WEB_ID_MAPPED"===e.type)this.processResponse(o,"SHOW_IF_WEB_ID_MAPPED",e,"webId",s,l);else if("IS_ALREADY_SUBSCRIBED"===e.type){let t=Co("HIDE_FOR_SUBSCRIBERS",e.params.widgetId);o[t]=!e.response.checkResult,e.params.widgetId?this.widgetHideForSubscribersCache.set(e.params.widgetId,e):this.generalHideForSubscribersCache=e}})),B(e,r,o)):(this.serviceFailedToProcess=!0,n)}};class Lo{constructor(){}activate(){this._setupCache()}_setupCache(){var{storagePrefix:e}=fe.getPrefix();let t="".concat(e,"check.segment.cache");e="".concat(e,"check.segment.cache.duration.ms"),Le.registerKeys(t,e),e=Le.get(e),e=!isNaN(e)&&+e||3e5,this.cache=new No(new Ao,t,4e3,e)}async processAsyncRules(e,t,n){return e=e.map((e=>new Promise(((i,o)=>{if((!t||n!==e.formId&&!et.isDebugVariantShouldBeShown(tt.getDebugFormVariants(),e.id))&&tt.formVariantHasEnabledAsyncRules(e))return this.check(e).then(i);i({fV:e,shouldBeRendered:!0})})).catch((e=>{ce.error(e,"Failed on form rules check")})))),(await Promise.all(e)).filter((e=>e&&e.shouldBeRendered)).map((e=>(({fV:e}=e),e)))}async check(e){if(this.cache.get(e.id))return{fV:e,shouldBeRendered:this.cache.get(e.id).value};var t=fe.getConfig().apiConfig.asyncRulesCheckUrl.replace("{id}",je.createVariantUUID(e.id));return t=await Ke.execute(t,"GET",null,Lo.getHeaders()).then((e=>e.body)).then((e=>!e.hideByAsyncRules)).catch((t=>(ce.error(t,"Failed on async rules check fV:"+e.id),!1))),this.cache.set(e.id,t),{fV:e,shouldBeRendered:t}}}t(Lo,"getHeaders",(()=>({"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()})));var Mo=new Lo;class wo{isRuleTypeEnabled(e,t){return!!e[t]&&(!e[t].hasOwnProperty("enabled")||e[t].enabled)}}let Do={ANNOYANCE:"ANNOYANCE",FREQUENCY:"FREQUENCY",CUSTOM_CODE:"CUSTOM_CODE",TARGETING:"TARGETING",HIDE:"HIDE",SCHEDULE:"SCHEDULE",SELECTOR:"SELECTOR",PLACEMENT:"PLACEMENT"};class Po extends wo{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,Do.CUSTOM_CODE)}isFulfilled(){return this.isEnabled()}}class xo{constructor(e,t){var n,i;this.annoyanceType=(null===(n=e.rules)||void 0===n||null===(i=n.ANNOYANCE)||void 0===i?void 0:i.type)||"SHOW_IN_INTERVAL",this.fV=e,this.sessionStat=t}isEnabled(){return xe.has(this.fV.type)&&To.isEnabled()}isFulfilled(e){return!!bo.isAlreadyRendered(this.fV.type,this.fV.id)||("SHOW_REGARDLESS_OF_THE_DISPLAY_OF_WIDGETS"===this.annoyanceType||("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===this.annoyanceType?!e.skipList.includes(this.fV.id)&&0===bo.getCurrentNumberOfAnnoyanceWidgets():bo.isRenderingAllowed(e,this.fV.id)))}}t(xo,"config",To.get());class Vo extends wo{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=n}isEnabled(){return!this.excludedRuleTypes.includes("FREQUENCY")&&this.isRuleTypeEnabled(this.fV.rules,"FREQUENCY")}isBasedOnTime(){var e;return 0<((null===(e=this.rule)||void 0===e?void 0:e.predicates)||[]).filter((e=>e.isActive)).filter((e=>["MIN_INTERVAL","ONCE_PER_SESSION"].includes(e.name))).length}isFulfilled(e){var t;return 0<((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).filter((t=>!Vo.predicates[t.name]||new Vo.predicates[t.name](t,this.fV).is(e))).length}}t(Vo,"predicates",{NO_LIMIT:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this.fV.useCase||this.fV.useCase!==We.AGE_VERIFY||!(null!=(e=e.formVariants[this.fV.id])&&e.closeDate)}},ONCE_PER_SITE:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){return e=e.formVariants[this.fV.id],this.fV.useCase&&this.fV.useCase===We.AGE_VERIFY?!(null!=e&&e.closeDate):!e}},MIN_INTERVAL:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=Ae.convert(this.predicate.params.unit,Se.MILLISECOND,this.predicate.params.amount);if(this.fV.useCase&&this.fV.useCase===We.AGE_VERIFY){var n,i=null===(n=e.formVariants[this.fV.id])||void 0===n?void 0:n.closeDate;if(i)return 0<=new Date-new Date(i)-t}else if(n=null===(i=e.formVariants[this.fV.id])||void 0===i?void 0:i.view)return 0<=new Date-new Date(n)-t;return!0}},ONCE_PER_SESSION:class{constructor(e,t){this.predicate=e,this.fV=t}is(e){let t=e.formVariants[this.fV.id];return this.fV.useCase&&this.fV.useCase===We.AGE_VERIFY?!t||!t.closeDate||new Date(t.closeDate).getTime()<new Date(e.currentSession.getStartISOString()).getTime():!t||!t.view||new Date(t.view).getTime()<new Date(e.currentSession.getStartISOString()).getTime()}}});class Fo{constructor(e){this.condition=e}isFulfilled(e,t,n){var i;let o=null===(i=e.formVariants[t.id])||void 0===i?void 0:i.close;if((i=t.useCase&&t.useCase===We.AGE_VERIFY)&&n.basedOnTime){var r=!n.fulfilled&&o>=this.condition.params.amount;return _o.log("WIDGET_AGE_VERIFY_BASED_ON_TIME_CLOSED ".concat(r)),r}return i?(e=(null===(r=e.formVariants[t.id])||void 0===r?void 0:r.closeDate)&&o>=this.condition.params.amount,_o.log("WIDGET_AGE_VERIFY_CLOSED ".concat(e)),e):(r=o>=this.condition.params.amount,_o.log("WIDGET_CLOSED ".concat(r)),r)}}class ko{static create(e){if("WIDGET_CLOSED"===e.name)return new Fo(e);throw Error("Unknown ConditionName: "+e.name)}}let Uo={AND:"AND",OR:"OR"};class Bo extends wo{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.excludedRuleTypes=n,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return!this.excludedRuleTypes.includes("HIDE")&&this.isRuleTypeEnabled(this.fV.rules,"HIDE")}isFulfilled(e,t){if(!this.isEnabled())return!1;let n=this.rule.conditions.filter((n=>ko.create(n).isFulfilled(e,this.fV,t)));return H(this.rule.conditions.length,n.length,this.rule.relation)}}class Ho{constructor(e,t){this.predicate=e,this.fV=t}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}_isDateWithTimeZoneInPast(e,t){let n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return 0>=new Date(e).getTime()+(n||0)-this._setTimeZoneToNativeDate(null,t).getTime()}_isDayAndTimeAllowed(e,t,n){var i=this._setTimeZoneToNativeDate(null,n);n=i.toLocaleString("en-EN",{weekday:"long"}).toLowerCase();var o=60*i.getHours()+i.getMinutes();if(i=this._getPreviousDay(i).toLocaleString("en-EN",{weekday:"long"}).toLowerCase(),"00"===e.from.hours&&"00"===e.from.minutes&&"00"===e.to.hours&&"00"===e.to.minutes)o=!0;else{var r=e.to.hours;let s=e.to.minutes;if("00"===r&&"00"===s&&(r="23",s="59"),e=60*parseInt(e.from.hours,10)+parseInt(e.from.minutes,10),0>(r=60*parseInt(r,10)+parseInt(s,10))-e)return e<=o&&t.includes(n)||o<=r&&t.includes(i);o=e<=o&&o<=r}return o&&t.includes(n)}_setTimeZoneToNativeDate(e,t){return e=e?new Date(e):new Date,t?new Date(e.toLocaleString.call(e,"en-US",{timeZone:t&&"Europe/Kyiv"===t?"Europe/Kiev":t})):e}_getPreviousDay(e){return(e=new Date(e)).setDate(e.getDate()-1),e}}class Go extends wo{constructor(e,t){super(),this.rule=e,this.fV=t}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"SCHEDULE")}isFulfilled(e){var t;return 0===((null===(t=this.rule)||void 0===t?void 0:t.predicates)||[]).filter((e=>e.isActive)).map((t=>!Go.predicates[t.name]||{fulfilled:new Go.predicates[t.name](t,this.fV).is(e)})).filter((e=>!e.fulfilled)).length}}t(Go,"predicates",{HIDE_AFTER:class extends Ho{constructor(e,t){super(e,t)}is(e){return!this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SHOW_AFTER:class extends Ho{constructor(e,t){super(e,t)}is(e){return this._isDateWithTimeZoneInPast(this.predicate.params.date,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},SPECIFIC_DAYS_AND_TIME:class extends Ho{constructor(e,t){super(e,t)}is(e){return this._isDayAndTimeAllowed(this.predicate.params.time,this.predicate.params.days,this.predicate.params.timeZone,e.cacheTimeShiftMs)}},HIDE_AFTER_RELATIVE_TIMER_FOR_AMOUNT_OF_TIME:class{constructor(e,n){t(this,"_dayInMs",864e5),t(this,"_hourInMs",36e5),t(this,"_minuteInMs",6e4),this.predicate=e,this.fV=n,this.isShownInCurrentSessionKey=Le.getKey("f.isRelativeTimerShownInCurrentSession"),Le.registerKeys(this.isShownInCurrentSessionKey),this.relativeTimerStorageKey="cl.f.fv.relativeTimerViewDate"}is(e){var t,n=null===(t=e.formVariants[this.fV.id])||void 0===t?void 0:t.relativeTimerViewDate;let i=(t=this._getPersistedShownParams())||this.predicate.params;if(!n||"FROM_THE_START_OF_DISPLAYING"!==i.mode)return this.allowDisplay();if((n=(e=new Date(n).getTime()+(e.cacheTimeShiftMs||0)+this._getLengthMs(i.lengthFromTheStart))<Date.now())&&i.isShowAgainAllowed){if("NEXT_SESSION"===i.showAgainMode)return t?this.restrictDisplay():this.allowDisplay(!0);if("AFTER_FIXED_PERIOD"===i.showAgainMode)return e+(t=this._getShowAgainMs(i.showAgainUnit,i.showAgainAmount))<=Date.now()?this.allowDisplay(!0):this.restrictDisplay()}return n?this.restrictDisplay():this.allowDisplay()}restrictDisplay(){return!1}allowDisplay(e){return this._getPersistedShownParams()||this._setPersistedShownParams(),e&&localStorage.removeItem(this.relativeTimerStorageKey),!0}_getPersistedShownParams(){return Le.get(this.isShownInCurrentSessionKey)}_setPersistedShownParams(){Le.set(this.isShownInCurrentSessionKey,this.predicate.params)}_getLengthMs(e){let[t,n,i,o]=e.split(".").map(Number);return t*this._dayInMs+n*this._hourInMs+i*this._minuteInMs+1e3*o}_getShowAgainMs(e,t){return{DAYS:this._dayInMs,HOURS:this._hourInMs,MINUTES:this._minuteInMs}[e]*t}}});let Wo=[{operandName:"VISITOR",operators:[{type:"TIME",name:"TIME_SPENT_ON_PAGE"},{type:"TIME",name:"TIME_SPENT_ON_SITE"},{type:"INTEGER",name:"PAGE_READ_PERCENT"},{type:"INTEGER",name:"PAGES_VIEWED"},{type:"TIME",name:"UN_ACTIVE_TIME"},{type:"VOID",name:"USER_LEAVES_PAGE"},{type:"VOID",name:"USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM"},{type:"VOID",name:"USER_NOT_HOVER_WIDGET"},{type:"VOID",name:"NEW_VISITORS"}]},{operandName:"DEVICE_TYPE",operators:[{type:"SELECT",name:"EQUALS",options:[{label:"ANY",value:null},{label:"MOBILE",value:"MOBILE"},{label:"DESKTOP",value:"DESKTOP"}]}]},{operandName:"URL",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"URL_SEARCH_PARAM",operators:[{type:"STRING",name:"EQUALS"},{type:"STRING",name:"CONTAINS"},{type:"STRING",name:"CONTAINS_ONE_OF"},{type:"STRING",name:"STARTS_WITH"},{type:"STRING",name:"ENDS_WITH"},{type:"STRING",name:"REG_EX"}]},{operandName:"HTML_ELEMENT",operators:[{type:"HTML_ELEMENT",name:"MATCHES"}]},{operandName:"COUNTRY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"REGION",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]},{operandName:"CITY",operators:[{type:"STRING",name:"CONTAINS_ONE_OF"}]}];class jo{static getOperatorType(e,t){return Wo.find((t=>t.operandName===e)).operators.find((e=>e.name===t)).type}}class zo{constructor(e){t(this,"operatorNameMap",{CONTAINS:G,STARTS_WITH:W,EQUALS:z,ENDS_WITH:j,REG_EX:K,CONTAINS_ONE_OF:X}),this.name=e}isMatched(e,t){return this.operatorNameMap[this.name](e,t)}}class Ko{constructor(e){t(this,"operatorNameMap",{TIME_SPENT_ON_PAGE:q,TIME_SPENT_ON_SITE:Q,UN_ACTIVE_TIME:Z}),this.name=e}isMatched(e,t){return e=this.operatorNameMap[this.name](e,t,this.name),_o.log("time  ".concat(this.name," ").concat(JSON.stringify(t)," = ").concat(e)),e}}class Xo{constructor(e){t(this,"operatorNameMap",{MATCHES:J}),this.name=e}isMatched(e){return this.operatorNameMap[this.name](e)}}class Yo{constructor(e){t(this,"operatorNameMap",{USER_ALREADY_SUBSCRIBED_FOR_THE_CURRENT_FORM:$,USER_LEAVES_PAGE:ee,USER_NOT_HOVER_WIDGET:ne,NEW_VISITORS:te}),this.name=e}isMatched(e,t,n){return e=this.operatorNameMap[this.name](e,t,n),_o.log("".concat(this.name,"  ").concat(JSON.stringify(t)," = ").concat(e)),e}}class qo{constructor(e){t(this,"operatorNameMap",{PAGE_READ_PERCENT:ie,PAGES_VIEWED:oe}),this.name=e}isMatched(e,t){return this.operatorNameMap[this.name](e,t,this.name)}}class Qo{static create(e,t){switch(e){case"STRING":case"SELECT":return new zo(t);case"TIME":return new Ko(t);case"HTML_ELEMENT":return new Xo(t);case"INTEGER":return new qo(t);case"VOID":return new Yo(t);default:throw Error("Unknown OperatorType: "+e)}}}class Zo{constructor(e){this.condition=e}isOperandValueMatched(e,t){var n=jo.getOperatorType(this.condition.operand.name,this.condition.operator);let i;n=Qo.create(n,this.condition.operator);try{i=t?decodeURIComponent(this.condition.value):this.condition.value}catch(e){i=this.condition.value}return t=n.isMatched(e,i),_o.log("".concat(e,"  ").concat(this.condition.operator," ").concat(i," = ").concat(t)),t}}class Jo extends Zo{constructor(e){super(e)}urlWithoutDebugParams(){let e=new URL(window.location.href);"esDebugForm clDebugForm clPublishedForm esPublishedForm clIgnoreRules esIgnoreRules".split(" ").forEach((t=>{e.searchParams.delete(t)}));let t=Array.from(e.searchParams.entries()).map((e=>"".concat(encodeURIComponent(e[0]),"=").concat(encodeURIComponent(e[1])))).join("&"),n=e.pathname.split("/").map((e=>{try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}));return"".concat(this._decodeURIComponent(e.origin)).concat(this._decodeURIComponent(n.join("/"))).concat(t?"?"+this._decodeURIComponent(t):"").concat(this._decodeURIComponent(e.hash))}_decodeURIComponent(e){try{return decodeURIComponent(e)}catch(t){return e}}isFulfilled(){return this.isOperandValueMatched(this.urlWithoutDebugParams(),!0)}}class $o extends Zo{constructor(e){super(e)}isFulfilled(e){return e.sessionUrlSearchParams.some((e=>{if((e=new URLSearchParams(e).get(this.condition.operand.value))&&this.isOperandValueMatched(e,!0))return!0}))}}class er extends Zo{constructor(e){super(e)}isFulfilled(e,t){let n=jo.getOperatorType(this.condition.operand.name,this.condition.operator);return Qo.create(n,this.condition.operator).isMatched(e,this.condition.value,t)}}class tr extends Zo{constructor(e){super(e)}isFulfilled(){if(!this.condition.value)return!0;var e=navigator.userAgent||navigator.vendor||window.opera;return e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"MOBILE":"DESKTOP",this.isOperandValueMatched(e)}}class nr extends Zo{constructor(e){super(e)}isFulfilled(){var e=jo.getOperatorType(this.condition.operand.name,this.condition.operator);return e=!!Qo.create(e,this.condition.operator).isMatched(this.condition.value),_o.log("HTML_ELEMENT  ".concat(this.condition.operator," ").concat(this.condition.value," = ").concat(e)),e}}class ir extends Zo{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched([n.countryCode])}}class or extends Zo{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched([String(n.regionGeonameId)])}}class rr extends Zo{constructor(e){super(e)}isFulfilled(e,t,n){return this.isOperandValueMatched([String(n.cityGeonameId)])}}class sr{static create(e){switch(e.operand.name){case"URL":return new Jo(e);case"URL_SEARCH_PARAM":return new $o(e);case"VISITOR":return new er(e);case"DEVICE_TYPE":return new tr(e);case"HTML_ELEMENT":return new nr(e);case"COUNTRY":return new ir(e);case"REGION":return new or(e);case"CITY":return new rr(e);default:throw Error("Unknown OperandName: "+e.operand.name)}}}class ar extends wo{constructor(e,t,n){super(),this.rule=e,this.fV=t,this.state={},this.cachingState={},this.locationData=n,this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return this.isRuleTypeEnabled(this.fV.rules,"TARGETING")}isFulfilled(e){return!this.isExcludeFulfilled(this.rule.schema.exclude,e)&&(e=this.isIncludeFulfilled(this.rule.schema.include,e),this.state.pageFulfilled=e&&(this.state.URL||this.state.URL_SEARCH_PARAM||this.state.HTML_ELEMENT),this.fV.rules.pageFulfilled=this.state.pageFulfilled,e)}isIncludeFulfilled(e,t){return this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!1})}isExcludeFulfilled(e,t){return!!e.groups.length&&this.areGroupsFulFilled(e.groups,e.relation,t,{exclude:!0})}areGroupsFulFilled(e,t,n){this.cachingState={relation:t,fulfilledGroupsCount:0};let i=e.map(((e,t)=>(((e=this.isGroupFulfilled(e,n)).hasUserLeavesPage||e.hasReadPercent)&&(this.cachingState.groupIndexContainingCachingRules=t),this.cachingState.fulfilledGroupsCount+=Number(e.groupFulfilled),e))),o=i.filter((e=>(({groupFulfilled:e}=e),e)));return e=H(e.length,o.length,t),this.cachingState={...this.cachingState,fulfilled:e,groups:i,relation:t},e}isGroupFulfilled(e,t){var n=e.relation;let i=e.conditions.length,o={groupFulfilled:!0,groupRelation:n,conditions:[]};if(!i)return o;let r=!1,s=!1,a=0;return n=H(i,(e=e.conditions.map((e=>{const n=sr.create(e).isFulfilled(t,this.fV,this.locationData);return Object.assign(this.state,{[e.operand.name]:n}),"PAGE_READ_PERCENT"===e.operator&&(s=!0),"USER_LEAVES_PAGE"===e.operator&&(r=!0),n||"PAGE_READ_PERCENT"===e.operator||"USER_LEAVES_PAGE"===e.operator||a++,{fulfilled:n,conditionModel:e}}))).filter((e=>(({fulfilled:e}=e),e))).length,n),{...o,groupFulfilled:n,conditions:e,hasReadPercent:s,hasUserLeavesPage:r,numberOfFailedConditions:a}}}class lr{constructor(e){this.fV=e,this.state={},this.uniquePlacementsGetter=new qi(this.fV),this._uniquePresentPlacements=[],this.isFulfilled=this.isFulfilled.bind(this)}isEnabled(){return"BUILT_IN"===this.fV.type}uniquePresentPlacements(){return this._uniquePresentPlacements}checkUniquePresentPlacements(){this._uniquePresentPlacements=this.uniquePlacementsGetter.getUniquePresentPlacements()}isFulfilled(e){return this.checkUniquePresentPlacements(),0<this._uniquePresentPlacements.length||e(this.fV.id)}}class cr{constructor(e){t(this,"_semaphore",new Eo),this.rulesService=e}invalidate(){let e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter((e=>{var t;return(t=this._semaphore.canLock(e.formVariant.id))&&(t=e.allRulesFulfilled||(!e.rules[Do.FREQUENCY].enabled||e.rules[Do.FREQUENCY].fulfilled)&&(!e.rules[Do.HIDE].enabled||!e.rules[Do.HIDE].fulfilled)&&(!e.rules[Do.SCHEDULE].enabled||e.rules[Do.SCHEDULE].fulfilled)&&(function(e){if(e.rules[Do.TARGETING].enabled){if(({cachingState:e={}}=e.rules[Do.TARGETING].rule),void 0===e.groupIndexContainingCachingRules)return!1;var t=e.groups[e.groupIndexContainingCachingRules];let n=t.groupRelation===Uo.OR||!t.numberOfFailedConditions;return e.relation===Uo.OR?e.fulfilled||t.fulfilled||n:(t=e.fulfilledGroupsCount-Number(t.groupFulfilled)==e.groups.length-1,e.fulfilled||t&&n)}return!1}(e)||!!(e.formVariant.rules[Do.SELECTOR]&&e.formVariant.rules[Do.SELECTOR].enabled&&e.formVariant.rules[Do.SELECTOR].selector))),t}));return this._cache(e)}async _cache(e){if(e.length)return e=e.map((e=>(({formVariant:e}=e),e))),e=await this.rulesService.filterByAsyncRules(e),this._cacheForms(e),e}async _cacheForms(e){try{for await(let t of e){if(!this._semaphore.canLock(t.id))continue;this._semaphore.lock(t.id);let{manifests:e,appearance:n}=await yo.prepareForDisplay(t),i=e.filter((e=>{var t;return 0<(null==e||null===(t=e.resourcesPropPaths)||void 0===t?void 0:t.length)})).map((e=>n.document.views.map((t=>{const i=[];return d(t,(t=>{if(t.name===e.name){var o=e.resourcesPropPaths.map((e=>ae(t.props,e,n))).filter(Boolean);o=k(o,1/0),i.push(...o.filter(Boolean))}})),F(t=i.map((e=>this._loadResource(e))))}))));await F(i)}}catch(t){throw this._semaphore.unlockAll(e.map((e=>e.id))),t}}_loadResource(e){var t;let n=e.startsWith("url")?((null===(t=/url\((.*)\)/.exec(e))||void 0===t?void 0:t[1])||"").replace(/['"]/g,""):e;return/^https?:\/\//.test(n)?new Promise(((t,i)=>{let o=new Image;o.onload=()=>t(e),o.onerror=()=>i(e),o.src=n})):Promise.reject("Not a URL")}}var dr=new class{constructor(e){t(this,"intervalTimerId",null),t(this,"locationData",null),t(this,"resourcesSemaphore",new Eo),t(this,"resourcesCache",new cr(this)),this.store=e,this.alreadyCheckedFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.showFormByClickingElementFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set,this.subscriptions=[]}activate(e,t){this.userActionsDetector=e,this.locationData=t,this.checkRules(),this.subscriptions.push(this.userActionsDetector.on("mouseout",(()=>{this.checkRules({mouseout:!0})})),this.userActionsDetector.on("mouseover",(()=>{this.checkRules({mouseout:!1})})),zi.on("PAGE_VIEW_CHANGED",this.onPageViewChanged.bind(this)),zi.on("SHOW_WIDGET_BY_CLICKING_ELEMENT",this.onShowWidgetByClickingElement.bind(this)),zi.on("SHOW_WIDGET_BY_CUSTOM_CODE",this.onShowWidgetByCustomCode.bind(this))),this.intervalTimerId=setInterval((()=>{this.checkRules()}),500)}getStats(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{...this.userActionsDetector.getStats(),...e}}currentPageRendered(e){return this.currentPageRenderedWidgetIds.has(e)}async checkRules(e){try{let t={...this.getStats(e),cacheTimeShiftMs:-500},n=this.getPublishedFormVariantsAvailableForRendering().filter((e=>this.resourcesSemaphore.canLock(e.id))).map((e=>re(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)))));this.destroyIfNeeded(t);let i=n.filter((e=>this.filterBySyncRulesFromFvStats(e))).map((e=>(({formVariant:e}=e),e)));i=i.filter((e=>this.filterByDataThatPresentInStorageBeforeAsyncRules(e,t)));let o=await this.filterByAsyncRules(i),r=o.map((e=>e.id));this.resourcesSemaphore.lockAll(r);let s=o.reduce(((e,t)=>Object.assign(e,{[t.id]:!0})),{}),a=n.filter((e=>!s[e.formVariant.id]));setTimeout((()=>{this.resourcesCache.invalidate(a)}),0),t.mouseout&&o.forEach((e=>this.showWidgetOnMouseoutIds.add(e.id))),o.length&&await yo.display(o,(e=>{this.resourcesSemaphore.unlock(e),this.currentPageRenderedWidgetIds.add(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.resourcesSemaphore.unlock(e)}),(e=>{this.userActionsDetector.sessionStat.addToSkipList(e)}))}catch(e){this.resourcesSemaphore.unlockAll(),ce.error(e,"Failed on form rules check")}}getAbTestsFormsToExclude(){let e=new Set,t=(fe.getConfig().formConfig||{}).abTests||[],n=fe.getFormAbTestsFormVariants().reduce(((e,t)=>e.concat(t.formId)),[]);return t.forEach((t=>{t.rules.forEach((t=>{n.includes(t.formId)||e.add(t.formId)}))})),e}getPublishedFormVariantsAvailableForRendering(){let e=et.publishedFormIdToDebug(),t=et.isDebugShouldIgnoreRules(),n=fe.getConfig(),i=tt.getFormVariantsToRender(n);return 0<e&&(i=i.filter((t=>t.formId===e||"FOR_ALL"===n.forms[t.formId].publishStatus))),t||(i=i.filter((e=>!this.getAbTestsFormsToExclude().has(e.formId)))),0<this.currentPageRenderedWidgetIds.size?i.filter((e=>!this.currentPageRenderedWidgetIds.has(e.id))):i}async filterByAsyncRules(e){let t=et.publishedFormIdToDebug(),n=et.isDebugShouldIgnoreRules(),{features:i={}}=fe.getConfig();return!0===(null==i?void 0:i.CHECK_SEGMENT_MEMBERSHIP)?Ro.processAsyncRules(e,n,t):Mo.processAsyncRules(e,n,t)}filterBySyncRulesFromFvStats(e){let t=e.formVariant;return!((!et.isDebugShouldIgnoreRules()||et.publishedFormIdToDebug()!==t.formId&&!et.isDebugVariantShouldBeShown(tt.getDebugFormVariants(),t.id))&&t.rules)||!t.rules.CUSTOM_CODE.enabled&&this._syncRulesStatsPredicate(e)}filterByDataThatPresentInStorageBeforeAsyncRules(e,t){var n,i,o,r;return!(null!==(n=e.asyncRules)&&void 0!==n&&null!==(i=n.HIDE_FOR_SUBSCRIBERS)&&void 0!==i&&i.enabled&&!1===(null===(o=e.asyncRules)||void 0===o||null===(r=o.HIDE_FOR_SUBSCRIBERS)||void 0===r?void 0:r.checkThisWidgetOnly)&&(e=Object.values(t.formVariants).find((e=>!!e.submit)),t=(t=ge.get("clContactId"))&&"0"!==t,e&&t))}filterBySyncRules(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return!((!et.isDebugShouldIgnoreRules()||et.publishedFormIdToDebug()!==e.formId&&!et.isDebugVariantShouldBeShown(tt.getDebugFormVariants(),e.id))&&e.rules)||!e.rules.CUSTOM_CODE.enabled&&(n=re(e,t,this.userActionsDetector.sessionStat,this.locationData,(e=>this.currentPageRendered(e)),n),this._syncRulesStatsPredicate(n))}_syncRulesStatsPredicate(e){let{formVariant:t,allRulesFulfilled:n,rules:i,stats:o}=e;if(_o.log("formVariant ".concat(t.id," annoyance"),i.ANNOYANCE.fulfilled),_o.log("formVariant ".concat(t.id," hide"),i.HIDE.fulfilled),_o.log("formVariant ".concat(t.id," schedule"),i.SCHEDULE.fulfilled),_o.log("formVariant ".concat(t.id," frequency"),i.FREQUENCY.fulfilled),_o.log("formVariant ".concat(t.id," targeting"),i.TARGETING.fulfilled),_o.log("formVariant ".concat(t.id," placement"),i.PLACEMENT.fulfilled),i.ANNOYANCE.enabled)if("SHOW_IF_THERE_ARE_NO_FLOATING_WIDGETS_DISPLAYED"===i.ANNOYANCE.rule.annoyanceType){e=n&&!i.ANNOYANCE.fulfilled;let r=n&&!bo.isRenderingAllowed(o,t.id,t.type);if(e||r)return o.skipList.includes(t.id)||this.userActionsDetector.sessionStat.addToSkipList(t.id),!1}else if(!i.ANNOYANCE.fulfilled)return!1;return!(i.HIDE.enabled&&i.HIDE.fulfilled||i.SCHEDULE.enabled&&!i.SCHEDULE.fulfilled||i.FREQUENCY.enabled&&!i.FREQUENCY.fulfilled||i.PLACEMENT.enabled&&!i.PLACEMENT.fulfilled)&&(i.TARGETING.enabled&&i.TARGETING.fulfilled)}isWidgetShownOnMouseout(e){return this.showWidgetOnMouseoutIds.has(e.id)?e.rules.TARGETING.schema.exclude.groups.some((e=>e.conditions.some((e=>"USER_NOT_HOVER_WIDGET"===e.operator))))?((e=JSON.parse(JSON.stringify(e))).rules.TARGETING.schema.include.groups.forEach((e=>{e.conditions=e.conditions.filter((e=>"USER_LEAVES_PAGE"!==e.operator))})),e.rules.TARGETING.schema.include.groups=e.rules.TARGETING.schema.include.groups.filter((e=>0<e.conditions.length)),{shown:!0,checkIt:!0,formVariant:e}):{shown:!0,checkIt:!1,formVariant:e}:{shown:!1,checkIt:!1,formVariant:e}}destroyIfNeeded(e){let t=so.getShownForms();Object.keys(t).filter((e=>0<t[e].length)).map((e=>t[e])).forEach((t=>{t.forEach((t=>{if(!this.showAnotherWidgetFormVariantIds.has(t)&&!this.showFormByClickingElementFormVariantIds.has(t)&&!this.showFormByCustomCodeFormVariantIds.has(t)){var n=tt.getFormVariant(t),i=this.isWidgetShownOnMouseout(n);if(!i.shown||i.checkIt){i.shown&&i.checkIt&&(n=i.formVariant),t=this.currentPageRenderedWidgetIds.has(t),i="LAUNCHER"===n.type;var o=this.filterByDataThatPresentInStorageBeforeAsyncRules(n,e);(!this.filterBySyncRules(n,e,t?["FREQUENCY","HIDE"]:[])||i&&!o)&&(so.destroyForm(n),this.alreadyCheckedFormVariantIds.delete(n.id),xe.has(n.type)&&this.userActionsDetector.sessionStat.setAnnoyLastClosed())}}}))}))}destroy(){this.userActionsDetector&&this.userActionsDetector.destroy(),this.intervalTimerId&&clearInterval(this.intervalTimerId),this.subscriptions.forEach((e=>e.off()))}onShowWidgetByClickingElement(e){this.showFormByClickingElementFormVariantIds.add(e.id)}onShowWidgetByCustomCode(e){this.showFormByCustomCodeFormVariantIds.add(e)}onShowWidgetFromAnotherWidget(e){this.showAnotherWidgetFormVariantIds.add(e.id)}onPageViewChanged(){this.showFormByClickingElementFormVariantIds=new Set,this.showAnotherWidgetFormVariantIds=new Set,this.currentPageRenderedWidgetIds=new Set,this.alreadyCheckedFormVariantIds=new Set,this.showFormByCustomCodeFormVariantIds=new Set,this.showWidgetOnMouseoutIds=new Set}}(fe);class hr{constructor(e){({accountId:e}=e),this._payload={accountId:e,type:"view",referrer:window.location.href}}get(){return btoa(JSON.stringify(this._payload))}}var ur=new class{constructor(e){this.params=e}handle(e){var t=fe.getPrefix();"localhost"===window.location.hostname||"cl"!==t.debugPrefix||(t=et.getQueryParamNames(),et.isDebugQueryStringPresentInUrl(t)||(t=0<tt.getFormVariants().filter((t=>"FOR_ALL"===tt.getForm(t.formId).publishStatus&&function(e,t){var n;let i=["HIDE_AFTER","SHOW_AFTER"];var o;return null===(n=e.rules.SCHEDULE)||void 0===n||!n.enabled||!((null===(o=e.rules.SCHEDULE)||void 0===o?void 0:o.predicates)||[]).filter((e=>(null==e?void 0:e.isActive)&&i.includes(null==e?void 0:e.name))).some((n=>!1===new Go.predicates[n.name](n,e).is(t.sessionStat)))}(t,e))).length,ot.isInstanceInDebugMode()||!t))||this.onPageViewed()}onPageViewed(){let e=new hr(this.params).get();Ke.execute(new Ue("/forms/v1/page/event").get(),"POST",e,{"Content-Type":"text/plain","cl-customer-id":Ze.getUserIdentifier()}).catch((e=>ce.error(e,"onFormPageView error on FormPageViewedEventHandler: ")))}}(je.createPageParams());class mr{constructor(){this.observer=this.prevPath=null,window.globalHistoryLength=window.history.length;let e={apply(){return window.globalHistoryLength=isNaN(window.globalHistoryLength)&&window.history.length||++window.globalHistoryLength,Reflect.apply(...arguments)}};history.pushState=new Proxy(history.pushState,e),history.replaceState=new Proxy(history.replaceState,e)}getPrevPath(){return this.prevPath}getCurrentPath(){let e=new URL(location.href);return e.search="",e.toString()}getPrevHistoryLength(){return this.prevHistoryLength}getCurrentHistoryLength(){return window.globalHistoryLength}setPrevPath(e){this.prevPath=e}setPrevHistoryLength(e){this.prevHistoryLength=e}isPathChanged(){return this.getCurrentPath()!==this.getPrevPath()}isHistoryLengthChanged(){return this.getCurrentHistoryLength()!==this.getPrevHistoryLength()}observe(e){this.setPrevPath(this.getCurrentPath()),this.observer=new MutationObserver((()=>{let t=this.isPathChanged(),n=this.isHistoryLengthChanged();t&&this.setPrevPath(this.getCurrentPath()),n&&this.setPrevHistoryLength(this.getCurrentHistoryLength()),t&&n&&e()})),this.observer.observe(document.body,mr.config)}destroy(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}t(mr,"config",{childList:!0,subtree:!0});var pr=new mr;var gr=new class{compute(e,t){let n=new ai;t=t.map((e=>({...e,id:e.variantId})));let i=n.calculateFromWeights(t);return e.find((e=>e.id===i.variantId))}};class Er{constructor(e){this.variantComputationByRulesService=e}getExperimentVariantsConfig(){throw Error("You have to implement the method setExperimentVariants!")}getExperimentVariantsFromConfig(){throw Error("You have to implement the method getExperimentVariantsFromConfig!")}addExperimentVariant(e,t,n){throw Error("You have to implement the method addExperimentVariant!")}getExperimentVariants(){throw Error("You have to implement the method getExperimentVariants!")}setExperimentVariants(e){throw Error("You have to implement the method setExperimentVariants!")}activate(){let e=this.getExperimentVariantsConfig();this._removeOldExperimentsFromStorage(this.getExperimentVariants(),e),this._removeModifiedExperimentsFromStorage(this.getExperimentVariants(),e),this._writeNewExperimentsToStorage(this.getExperimentVariants(),e)}_removeOldExperimentsFromStorage(e){let t=this.getExperimentVariantsFromConfig();e=e.filter((e=>t.find((t=>t.id===e.id)))),this.setExperimentVariants(e)}_removeModifiedExperimentsFromStorage(e,t){t&&t.length&&(t=t.reduce(((t,n)=>{const{itemVariants:i,trafficSplitRules:o}=n;return t.concat(this._getUnmodifiedVariants(i,e,o))}),[]),this.setExperimentVariants(t))}_writeNewExperimentsToStorage(e,t){let n=new Map,i=new Map;t.forEach((t=>{let{itemVariants:o,trafficSplitRules:r}=t;var s=e.find((e=>o.find((t=>t.id===e.id))));let a=o.map((e=>e.formId)),l=[...n.entries()].map((e=>{let[t,n]=e;return a.filter((e=>n.has(e))).length===a.length?t:null})).filter(Boolean)[0];if(l&&i.has(l)){let e=i.get(l);s=this.getExperimentVariantsConfig().find((e=>e.testId===l)).itemVariants.findIndex((t=>t.formId===e.formId)),this.addExperimentVariant(o[s],r,t.testId)}else{let e=new Set(o.map((e=>e.linkedToVariantId)));n.set(t.testId,e),s||(s=this.variantComputationByRulesService.compute(o,r),s=this.addExperimentVariant(s,r,t.testId),i.set(t.testId,s))}}))}_generateHash(e,t){return"".concat(e,".").concat(t.length,".").concat(t.map((e=>e.weight)).join("."))}_getUnmodifiedVariants(e,t,n){return n&&n.length&&e&&e.length?t.filter((t=>e.some((e=>t.hash===this._generateHash(e.id,n))))):t}}var vr=new class extends Er{constructor(e){super(e)}getExperimentVariantsConfig(){let e=Object.values(fe.getConfig().formVariants||{}),t=[];return fe.getFormAbTestsConfig().forEach((n=>{let i=[],o=n.rules.map((t=>{var n;const o=e.find((e=>e.formId===t.formId));return o&&i.push(o),{...t,variantId:null!==(n=null==o?void 0:o.id)&&void 0!==n?n:null}})).filter((e=>null!==e.variantId));i.length&&t.push({itemVariants:i,trafficSplitRules:o,testId:n.id})})),t}setExperimentVariants(e){fe.setFormAbTestFormVariants(e)}getExperimentVariants(){return fe.getFormAbTestsFormVariants()}addExperimentVariant(e,t,n){return e={testId:n,formId:e.formId,id:e.id,hash:this._generateHash(e.id,t)},fe.addAbTestFormVariant(e),e}getExperimentVariantsFromConfig(){return this.getExperimentVariantsConfig().reduce(((e,t)=>e.concat(t.itemVariants)),[])}}(gr);var fr=new class{execute(e){let t=e.rules.TARGETING.schema.include.groups[0].conditions.slice(),n=[];return t.find((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"===e.operand.name))&&(t=t.filter((e=>"HIDE_FOR_THOSE_WHO_CLOSED_WIDGET"!==e.operand.name)),n.push({name:"WIDGET_CLOSED",isActive:!0,params:{unit:"COUNT",amount:1}})),e.rules.TARGETING={...e.rules.TARGETING,schema:{...e.rules.TARGETING.schema,include:{...e.rules.TARGETING.schema.include,groups:[{...e.rules.TARGETING.schema.include.groups[0],conditions:t},...e.rules.TARGETING.schema.include.groups.slice(1)]},exclude:{...e.rules.TARGETING.schema.exclude,relation:Uo.OR}}},e.rules.HIDE||(e.rules.HIDE={enabled:!!n.length,type:Do.HIDE,relation:Uo.OR,hideFor:null,conditions:n}),e}};var yr=new class extends Bi{getData(){if(!this._shouldMetricBeCollected(this._getLastDate(),24)){let e=this._getData().data;return e&&e.countryCode?Promise.resolve(e):this._requestDataFromServer()}return this._updateMetricCollectionDate(),this._requestDataFromServer()}_getData(){return fe.getLocationData()}_setData(e){fe.setLocationData(e)}_requestDataFromServer(){return Ke.execute(new Ue("/forms/v1/location").get(),"GET",null,{"Content-Type":"application/json"}).then((e=>(this._storeData(e.body),e.body))).catch((()=>({body:{}})))}}(24);class _r{static findTestId(e,t){return(e=e.find((e=>e.rules.some((e=>e.formId===t)))))?e.id:null}}class Tr{constructor(e,t,n){this.store=e,this.userIdentifierStorageService=t,this.storageService=n}activate(){var e=this.userIdentifierStorageService.getUserIdentifier();this.storageKey="".concat(this.store.getPrefix().storagePrefix).concat(e,".interactions"),e=this.storageService.get(this.storageKey)||this._initializeInteractionMap(),this._appendInteractionIds(e)}_initializeInteractionMap(){let e={};var t=this.store.getConfig().forms;for(let n of Object.values(t))t=Xe.generate(),e[n.id]=t,n.__interactionId=t;return this.storageService.set(this.storageKey,e),e}_appendInteractionIds(e){var t=this.store.getConfig().forms;let n=[];for(let i of Object.values(t))(t=e[i.id])?i.__interactionId=t:(t=Xe.generate(),e[i.id]=t,i.__interactionId=t,n.push(i));0<n.length&&this.storageService.set(this.storageKey,e)}}var br=new class{getGeolocationRules(e){let t=this.getGeolocationRulesIndex(e);return-1===t?null:e[t]}getGeolocationRulesIndex(e){return e.findIndex((e=>{var t;return["COUNTRY","REGION","CITY"].includes(null==e||null===(t=e.conditions[0])||void 0===t?void 0:t.operand.name)}))}getFormVariantsWithLocationRules(e){return e.filter((e=>{let t=this.getGeolocationRules(e.rules.TARGETING.schema.include.groups);return e=this.getGeolocationRules(e.rules.TARGETING.schema.exclude.groups),t||e}))}};class Cr{constructor(){this.entryModuleType=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"STATIC"}getComponentManifests(){return this.getAllComponents().map((e=>{var t;return null===(t=e.define)||void 0===t?void 0:t.manifest}))}getAllComponents(){return Object.values(this.getWcRegister().modelNameToTagMap).map((e=>this.getWcRegister().getComponentTagName(e,this.entryModuleType))).map((e=>customElements.get(e))).filter((e=>!!e))}async loadComponentsIfNecessary(e,t){let n=new Set;e.views.forEach((e=>{It.iterateDepthFirst(e,(e=>{n.add(e.name)}))}));let i=(e=this.getComponentManifests()).map((e=>e.name)),o=[...n].filter((e=>!i.includes(e)));return o.length?(await this.loadComponents(o,t),{manifests:this.getComponentManifests()}):{manifests:e}}async loadComponents(e,t){return e=this.buildComponentModulesPaths(this.getComponentNamesToLoad(e),t),e=await this.importComponentModules(e),this.registerModules(e),e.map((e=>e.default))}getComponentNamesToLoad(e){return e}buildComponentModulesPaths(e,t){return e.map((e=>"".concat(t,"scripts/").concat(e,".js")))}async importComponentModules(e){return Promise.all(e.map((e=>import(e))))}registerModules(e){e.forEach((e=>{this.getWcRegister().registerComponent(e.default,this.entryModuleType)}))}getWcRegister(){return jn}}var Ir=new class{async activate(){this.apiHandlers={},new Tr(fe,Ze,ge).activate(),this.userActionsDetector=new ke,zi.on("SHOW_WIDGET_FROM_ANOTHER_WIDGET",this._showWidgetFromAnotherWidget.bind(this)),zi.on("CONTACT_DATA_SUBMIT",this._onContactSubmit.bind(this));let e=tt.getFormVariants().map((e=>fr.execute(e))),t={};br.getFormVariantsWithLocationRules(e).length&&(t=await yr.getData()),Mo.activate(),vr.activate(),so.activateAll(this.userActionsDetector,new Cr),dr.activate(this.userActionsDetector,t),ao.activate(),lo.activate(),ur.handle(this.userActionsDetector),pr.observe(this.detectPageView.bind(this)),jn.register(S,"STATIC"),zi.emit("COMPONENTS_LOADED",null)}detectPageView(){zi.emit("PAGE_VIEW_CHANGED",null),this.userActionsDetector.performDetection(),ur.handle(this.userActionsDetector),dr.checkRules()}showFormFromCustomCode(e){({formVariantId:e}=e);let t=tt.getForm(je.parseFormVariantId(e).formId);t&&("DEBUG"===t.publishStatus?et.isDebugVariantShouldBeShown(tt.getDebugFormVariants(),e)&&(so.showFormFromCustomCode(tt.getFormVariant(e)),zi.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)):(so.showFormFromCustomCode(tt.getFormVariant(e)),zi.emit("SHOW_WIDGET_BY_CUSTOM_CODE",e)))}addOnWidgetEventsHandlers(e,t){this.apiHandlers={...this.apiHandlers,CONTACT_DATA_SUBMIT:{...this.apiHandlers.CONTACT_DATA_SUBMIT,[e.formVariantId]:t}}}_onContactSubmit(e){({formVariantId:e}=e);try{this.apiHandlers.hasOwnProperty("CONTACT_DATA_SUBMIT")&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]&&this.apiHandlers.CONTACT_DATA_SUBMIT[e]({type:"CONTACT_DATA_SUBMIT"})}catch(e){}}async _showWidgetFromAnotherWidget(e){let t=_r.findTestId(fe.getFormAbTestsConfig(),e.linkedToVariantId);if(t){var n=vr.getExperimentVariants().find((e=>e.testId===t));n&&(e.linkedToVariantId=n.formId)}let i=tt.getFormVariantByVariantId(e.linkedToVariantId);n=tt.getFormVariant(e.formVariantId);let o=e.triggeredByLauncher?"Launcher":"Rules";ot.isInDebugMode(n.formId)||new dt(je.createFormParams(n.id,e.triggeredBy)).handle(),i?so.showFormFromCustomCode(i,o):await(new $e).loadIfNeeded([e.linkedToVariantId]).then((()=>{if(i=tt.getFormVariantByVariantId(e.linkedToVariantId))so.showFormFromCustomCode(i,o);else{let t='Error SHOW_WIDGET: widget not found. "'.concat(e.formVariantId,'" tried to show "').concat(e.linkedToVariantId,'"');ce.error(t)}})),i&&dr.onShowWidgetFromAnotherWidget(i)}destroy(){var e;null===(e=this.userActionsDetector)||void 0===e||e.destroy(),so.destroyAll(),ao.destroy(),lo.destroy(),pr.destroy()}};class Or{static getInstance(){var e=function(){e.c(arguments)};return e.q=[],e.c=function(){e.q.push(arguments)},window.claspo=window.claspo||e,window.claspo}}class Sr{static paramObjectHasFormVariantIdProperty(e){return!!(e[0][1]&&e[0][1].hasOwnProperty("formVariantId")&&"string"==typeof e[0][1].formVariantId&&e[0][1].formVariantId.length)}static callbackAsSecondArgPresent(e){return!(!e[0][2]||"function"!=typeof e[0][2])}static isShowFormFromCustomCodeValid(e){return Sr.paramObjectHasFormVariantIdProperty(e)}static isOnWidgetEventsValid(e){return Sr.paramObjectHasFormVariantIdProperty(e)&&Sr.callbackAsSecondArgPresent(e)}}class Ar{static getInstance(){var e=function(){e.c(arguments)};return e.q=[],e.c=function(){e.q.push(arguments)},window.eS=window.eS||e,window.eS}}let Nr=new class{init(e,t){window.claspo.__inited=!0,fe.setPrefix("cl","cl."),fe.setInstanceDebugMode(!!localStorage.getItem("claspo-scripts")),e&&e.disableCookiesUsage?Ze.disable():Ze.activate(),Ir.activate(),window.addEventListener("beforeunload",(()=>{this.destroy()}))}destroy(){Ir.destroy()}};!function(t){async function n(){if(!/(bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)/i.test(navigator.userAgent)){await async function(){let t=[];if(_e(navigator.userAgent)&&t.push(e(fe.getConfig().apiConfig.chunkShimUrl||"https://scripts.claspo.io/scripts/shim.js")),Te){let n=fe.getConfig().apiConfig.chunkIntersectionObserverUrl||"https://scripts.claspo.io/scripts/intersection-observer.js";t.push(e(n))}return Promise.all(t).catch((e=>{}))}();try{new le(t).run(),window.scriptLog09u8y9("OK")}catch(e){ce.error(e)}}}"loading"===document.readyState?be(document,"DOMContentLoaded",(()=>{n()})):n()}(new class{constructor(e){this.modulesInitService=e,this.hasFormsInQueue=this.formsReadyToProcessCommands=!1,zi.on("COMPONENTS_LOADED",(()=>{this.formsReadyToProcessCommands=!0,this.hasFormsInQueue&&(this.hasFormsInQueue=!1,this._processEventQueue(Ar.getInstance()))}))}process(){let e=Or.getInstance(),t=e.q.find((e=>"init"===e[0][0]));e.__inited||(e.__inited=!0,t?this.modulesInitService.init(t[0][1],t[0][2]):this.modulesInitService.init(),this._processEventQueue(e))}_processEventQueue(e){this._processShowFormsQueue(e),this._processOnWidgetEventsQueue(e);let t=this;e.q.push=function(){Array.prototype.push.apply(this,arguments),t._processEventQueue(e)}}_processShowFormsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"showWidget"===e[0][0]));e.q=e.q.filter((e=>"showWidget"!==e[0][0])),t.forEach((e=>{let t=e[0][1];Sr.isShowFormFromCustomCodeValid(e)&&Ir.showFormFromCustomCode(t)}))}else this.hasFormsInQueue=!0}_processOnWidgetEventsQueue(e){if(this.formsReadyToProcessCommands){var t=e.q.filter((e=>"onWidgetEvents"===e[0][0]));e.q=e.q.filter((e=>"onWidgetEvents"!==e[0][0])),t.forEach((e=>{Sr.isOnWidgetEventsValid(e)&&Ir.addOnWidgetEventsHandlers(e[0][1],e[0][2])}))}else this.hasFormsInQueue=!0}}(Nr))}();
} catch (error) {
    window.scriptLog09u8y9('ERROR', 'BOOTSTRAP_ERROR', error);
}
